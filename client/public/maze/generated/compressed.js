// Automatically generated file.  Do not edit!
var g;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){var b=typeof Symbol!="undefined"&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if(typeof a.length=="number")return{next:aa(a)};throw Error(String(a)+" is not an iterable or ArrayLike");}var ca=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ea=da(this);function fa(a,b){if(b)a:{var c=ea;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&b!=null&&ca(c,a,{configurable:!0,writable:!0,value:b})}}
fa("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,h){this.On=f;ca(this,"description",{configurable:!0,writable:!0,value:h})}if(a)return a;c.prototype.toString=function(){return this.On};var d="jscomp_symbol_"+(Math.random()*1E9>>>0)+"_",e=0;return b});
fa("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=ea[b[c]];typeof d==="function"&&typeof d.prototype[a]!="function"&&ca(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(aa(this))}})}return a});function ha(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
function ia(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
fa("WeakMap",function(a){function b(l){this.Nd=(k+=Math.random()+1).toString();if(l){l=ba(l);for(var m;!(m=l.next()).done;)m=m.value,this.set(m[0],m[1])}}function c(){}function d(l){var m=typeof l;return m==="object"&&l!==null||m==="function"}function e(l){if(!ia(l,h)){var m=new c;ca(l,h,{value:m})}}function f(l){var m=Object[l];m&&(Object[l]=function(n){if(n instanceof c)return n;Object.isExtensible(n)&&e(n);return m(n)})}if(function(){if(!a||!Object.seal)return!1;try{var l=Object.seal({}),m=Object.seal({}),
n=new a([[l,2],[m,3]]);if(n.get(l)!=2||n.get(m)!=3)return!1;n.delete(l);n.set(m,4);return!n.has(l)&&n.get(m)==4}catch(w){return!1}}())return a;var h="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var k=0;b.prototype.set=function(l,m){if(!d(l))throw Error("Invalid WeakMap key");e(l);if(!ia(l,h))throw Error("WeakMap key fail: "+l);l[h][this.Nd]=m;return this};b.prototype.get=function(l){return d(l)&&ia(l,h)?l[h][this.Nd]:void 0};b.prototype.has=function(l){return d(l)&&
ia(l,h)&&ia(l[h],this.Nd)};b.prototype.delete=function(l){return d(l)&&ia(l,h)&&ia(l[h],this.Nd)?delete l[h][this.Nd]:!1};return b});
fa("Map",function(a){function b(){var k={};return k.Mc=k.next=k.head=k}function c(k,l){var m=k[1];return ha(function(){if(m){for(;m.head!=k[1];)m=m.Mc;for(;m.next!=m.head;)return m=m.next,{done:!1,value:l(m)};m=null}return{done:!0,value:void 0}})}function d(k,l){var m=l&&typeof l;m=="object"||m=="function"?f.has(l)?m=f.get(l):(m=""+ ++h,f.set(l,m)):m="p_"+l;var n=k[0][m];if(n&&ia(k[0],m))for(k=0;k<n.length;k++){var w=n[k];if(l!==l&&w.key!==w.key||l===w.key)return{id:m,list:n,index:k,entry:w}}return{id:m,
list:n,index:-1,entry:void 0}}function e(k){this[0]={};this[1]=b();this.size=0;if(k){k=ba(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}}if(function(){if(!a||typeof a!="function"||!a.prototype.entries||typeof Object.seal!="function")return!1;try{var k=Object.seal({x:4}),l=new a(ba([[k,"s"]]));if(l.get(k)!="s"||l.size!=1||l.get({x:4})||l.set({x:4},"t")!=l||l.size!=2)return!1;var m=l.entries(),n=m.next();if(n.done||n.value[0]!=k||n.value[1]!="s")return!1;n=m.next();return n.done||n.value[0].x!=
4||n.value[1]!="t"||!m.next().done?!1:!0}catch(w){return!1}}())return a;var f=new WeakMap;e.prototype.set=function(k,l){k=k===0?0:k;var m=d(this,k);m.list||(m.list=this[0][m.id]=[]);m.entry?m.entry.value=l:(m.entry={next:this[1],Mc:this[1].Mc,head:this[1],key:k,value:l},m.list.push(m.entry),this[1].Mc.next=m.entry,this[1].Mc=m.entry,this.size++);return this};e.prototype.delete=function(k){k=d(this,k);return k.entry&&k.list?(k.list.splice(k.index,1),k.list.length||delete this[0][k.id],k.entry.Mc.next=
k.entry.next,k.entry.next.Mc=k.entry.Mc,k.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this[0]={};this[1]=this[1].Mc=b();this.size=0};e.prototype.has=function(k){return!!d(this,k).entry};e.prototype.get=function(k){return(k=d(this,k).entry)&&k.value};e.prototype.entries=function(){return c(this,function(k){return[k.key,k.value]})};e.prototype.keys=function(){return c(this,function(k){return k.key})};e.prototype.values=function(){return c(this,function(k){return k.value})};e.prototype.forEach=
function(k,l){for(var m=this.entries(),n;!(n=m.next()).done;)n=n.value,k.call(l,n[1],n[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var h=0;return e});function ja(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}fa("Array.prototype.keys",function(a){return a?a:function(){return ja(this,function(b){return b})}});
fa("Object.is",function(a){return a?a:function(b,c){return b===c?b!==0||1/b===1/c:b!==b&&c!==c}});fa("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(c<0&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}});
fa("String.prototype.includes",function(a){return a?a:function(b,c){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return(this+"").indexOf(b,c||0)!==-1}});
fa("String.prototype.replaceAll",function(a){return a?a:function(b,c){if(b instanceof RegExp&&!b.global)throw new TypeError("String.prototype.replaceAll called with a non-global RegExp argument.");return b instanceof RegExp?this.replace(b,c):this.replace(new RegExp(String(b).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),c)}});
var ka={},la;
var ma=28,na=ma,oa=[,2,1,4,3];
var p=function(){return typeof self==="object"?self:typeof window==="object"?window:typeof global==="object"?global:this}();
var q={};p.Blockly||(p.Blockly={});p.Blockly.Msg||(p.Blockly.Msg=q);function pa(a){a=String(a).toLowerCase().trim();var b=qa[a];if(b)return b;b=a.substring(0,2)=="0x"?"#"+a.substring(2):a;b=b[0]=="#"?b:"#"+b;if(/^#[0-9a-f]{6}$/.test(b))return b;if(/^#[0-9a-f]{3}$/.test(b))return["#",b[1],b[1],b[2],b[2],b[3],b[3]].join("");var c=a.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return c&&(a=Number(c[1]),b=Number(c[2]),c=Number(c[3]),a>=0&&a<256&&b>=0&&b<256&&c>=0&&c<256)?ra(a,b,c):null}
function ra(a,b,c){b=a<<16|b<<8|c;return a<16?"#"+(16777216|b).toString(16).substr(1):"#"+b.toString(16)}function sa(a){a=pa(a);if(!a)return[0,0,0];a=parseInt(a.substr(1),16);return[a>>16,a>>8&255,a&255]}function ta(a,b,c){a=pa(a);if(!a)return null;b=pa(b);if(!b)return null;a=sa(a);b=sa(b);return ra(Math.round(b[0]+c*(a[0]-b[0])),Math.round(b[1]+c*(a[1]-b[1])),Math.round(b[2]+c*(a[2]-b[2])))}
var qa={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"};function r(a,b){this.x=a;this.y=b}function ua(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1}function va(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}function wa(a,b){return new r(a.x-b.x,a.y-b.y)}function xa(a,b){return new r(a.x+b.x,a.y+b.y)}r.prototype.clone=function(){return new r(this.x,this.y)};r.prototype.scale=function(a){this.x*=a;this.y*=a;return this};r.prototype.translate=function(a,b){this.x+=a;this.y+=b;return this};function ya(a,b,c,d){this.top=a;this.bottom=b;this.left=c;this.right=d}ya.prototype.contains=function(a,b){return a>=this.left&&a<=this.right&&b>=this.top&&b<=this.bottom};function za(a){return a.length?a.reduce(function(b,c){return b.length<c.length?b:c}).length:0}function Aa(a,b){if(!a.length)return 0;if(a.length==1)return a[0].length;var c=0;b=b||za(a);for(var d=0;d<b;d++){for(var e=a[0][d],f=1;f<a.length;f++)if(e!=a[f][d])return c;e==" "&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f][d])&&e!=" ")return c;return b}
function Ca(a,b){if(!a.length)return 0;if(a.length==1)return a[0].length;var c=0;b=b||za(a);for(var d=0;d<b;d++){for(var e=a[0].substr(-d-1,1),f=1;f<a.length;f++)if(e!=a[f].substr(-d-1,1))return c;e==" "&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f].charAt(a[f].length-d-1))&&e!=" ")return c;return b}
function Da(a,b){a=a.split("\n");for(var c=0;c<a.length;c++){var d=c;var e=a[c],f=b;if(e.length<=f)var h=e;else{for(var k=e.trim().split(/\s+/),l=0;l<k.length;l++)k[l].length>f&&(f=k[l].length);l=-Infinity;var m=1;do{var n=l;h=e;e=[];var w=k.length/m,y=1;for(l=0;l<k.length-1;l++)y<(l+1.5)/w?(y++,e[l]=!0):e[l]=!1;e=Ea(k,e,f);l=Fa(k,e,f);w=k;y=[];for(var E=0;E<w.length;E++)y.push(w[E]),e[E]!==void 0&&y.push(e[E]?"\n":" ");e=y.join("");m++}while(l>n)}a[d]=h}return a.join("\n")}
function Fa(a,b,c){for(var d=[0],e=[],f=0;f<a.length;f++)d[d.length-1]+=a[f].length,b[f]===!0?(d.push(0),e.push(a[f].charAt(a[f].length-1))):b[f]===!1&&d[d.length-1]++;a=Math.max.apply(Math,d);for(f=b=0;f<d.length;f++)b-=Math.pow(Math.abs(c-d[f]),1.5)*2,b-=Math.pow(a-d[f],1.5),".?!".indexOf(e[f])!=-1?b+=c/3:",;)]}".indexOf(e[f])!=-1&&(b+=c/4);d.length>1&&d[d.length-1]<=d[d.length-2]&&(b+=.5);return b}
function Ea(a,b,c){for(var d=Fa(a,b,c),e,f=0;f<b.length-1;f++)if(b[f]!=b[f+1]){var h=[].concat(b);h[f]=!h[f];h[f+1]=!h[f+1];var k=Fa(a,h,c);k>d&&(d=k,e=h)}return e?Ea(a,e,c):b};function Ga(a,b){this.width=a;this.height=b};function Ha(a){var b;(b=Ia(a,"display"))||(b=a.currentStyle?a.currentStyle.display:null);if((b||a.style&&a.style.display)!="none")return new Ga(a.offsetWidth,a.offsetHeight);b=a.style;var c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";var f=a.offsetWidth;a=a.offsetHeight;b.display=c;b.position=e;b.visibility=d;return new Ga(f,a)}
function Ia(a,b){return document.defaultView&&document.defaultView.getComputedStyle&&(a=document.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||"":""}function Ja(a){var b=new r(0,0);a=a.getBoundingClientRect();var c=document.documentElement;c=new r(window.pageXOffset||c.scrollLeft,window.pageYOffset||c.scrollTop);b.x=a.left+c.x;b.y=a.top+c.y;return b};var Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua;
(function(a){function b(d){return c.indexOf(d.toUpperCase())!=-1}Ua=a;var c=Ua.toUpperCase();Ka=b("Trident")||b("MSIE");La=b("Edge");b("JavaFX");!b("Chrome")&&b("CriOS");Ma=b("WebKit")&&!La;Na=b("Gecko")&&!Ma&&!Ka&&!La;Oa=b("Android");a=p.navigator&&p.navigator.maxTouchPoints;Pa=b("iPad")||b("Macintosh")&&a>0;Qa=b("iPod");Ra=b("iPhone")&&!Pa&&!Qa;Sa=b("Macintosh");Ta=Pa||Oa&&!b("Mobile")||b("Silk");!Ta&&(Qa||Ra||Oa||b("IEMobile"))})(p.navigator&&p.navigator.userAgent||"");
function Va(a){a.preventDefault();a.stopPropagation()}function Wa(a){return a.target.type=="textarea"||a.target.type=="text"||a.target.type=="number"||a.target.type=="email"||a.target.type=="password"||a.target.type=="search"||a.target.type=="tel"||a.target.type=="url"||a.target.isContentEditable||a.target.dataset&&a.target.dataset.Wq=="true"}
function Xa(a){var b=new r(0,0),c=a.getAttribute("x");c&&(b.x=parseInt(c,10));if(c=a.getAttribute("y"))b.y=parseInt(c,10);if(c=(c=a.getAttribute("transform"))&&c.match(Ya))b.x+=Number(c[1]),c[3]&&(b.y+=Number(c[3]));(a=a.getAttribute("style"))&&a.indexOf("translate")>-1&&(a=a.match(Za))&&(b.x+=Number(a[1]),a[3]&&(b.y+=Number(a[3])));return b}
function $a(a){for(var b=0,c=0;a;){var d=Xa(a);b+=d.x;c+=d.y;if((" "+(a.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!=-1)break;a=a.parentNode}return new r(b,c)}var Ya=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Za=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/;function ab(a){return a.ctrlKey&&Sa?!0:a.button==2}function cb(a,b,c){var d=b.createSVGPoint();d.x=a.clientX;d.y=a.clientY;c||(c=b.getScreenCTM().inverse());return d.matrixTransform(c)}
function db(a){switch(a.deltaMode){default:return{x:a.deltaX,y:a.deltaY};case 1:return{x:a.deltaX*40,y:a.deltaY*40};case 2:return{x:a.deltaX*125,y:a.deltaY*125}}}function eb(a){if(typeof a!="string")return a;a=fb(a,!1);return a.length?String(a[0]):""}
function fb(a,b){var c=[],d=a.split("");d.push("");var e=0;a=[];for(var f=null,h=0;h<d.length;h++){var k=d[h];e==0?k=="%"?((k=a.join(""))&&c.push(k),a.length=0,e=1):a.push(k):e==1?k=="%"?(a.push(k),e=0):b&&"0"<=k&&k<="9"?(e=2,f=k,(k=a.join(""))&&c.push(k),a.length=0):k=="{"?e=3:(a.push("%",k),e=0):e==2?"0"<=k&&k<="9"?f+=k:(c.push(parseInt(f,10)),h--,e=0):e==3&&(k==""?(a.splice(0,0,"%{"),h--,e=0):k!="}"?a.push(k):(e=a.join(""),/[A-Z]\w*/i.test(e)?(k=e.toUpperCase(),(k=k.lastIndexOf("BKY_",0)==0?k.substring(4):
null)&&k in q?(e=q[k],typeof e=="string"?Array.prototype.push.apply(c,fb(e,b)):b?c.push(String(e)):c.push(e)):c.push("%{"+e+"}")):c.push("%{"+e+"}"),e=a.length=0))}(k=a.join(""))&&c.push(k);b=[];for(h=a.length=0;h<c.length;++h)typeof c[h]=="string"?a.push(c[h]):((k=a.join(""))&&b.push(k),a.length=0,b.push(c[h]));(k=a.join(""))&&b.push(k);a.length=0;return b}function gb(){for(var a=hb.length,b=[],c=0;c<20;c++)b[c]=hb.charAt(Math.random()*a);return b.join("")}var hb="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
function ib(){if(jb!==void 0)return jb;if(!p.getComputedStyle)return!1;var a=document.createElement("p"),b="none",c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var d in c)if(a.style[d]!==void 0){a.style[d]="translate3d(1px,1px,1px)";b=p.getComputedStyle(a);if(!b)return document.body.removeChild(a),!1;b=b.getPropertyValue(c[d])}document.body.removeChild(a);return jb=
b!=="none"}var jb;function kb(a,b){b=a.indexOf(b);if(b==-1)return!1;a.splice(b,1);return!0}function lb(a,b){var c=Object.create(null),d=mb(a,!0);b&&(a=nb(a))&&(a=d.indexOf(a),d.splice(a,d.length-a));for(a=0;b=d[a];a++)c[b.type]?c[b.type]++:c[b.type]=1;return c}
function ob(a){var b=typeof a=="string"?eb(a):a,c=Number(b);if(!isNaN(c)&&0<=c&&c<=360){var d=b=a=0,e=Math.floor(c/60),f=c/60-e,h=165.75*.55,k=165.75*(1-.45*f);f=165.75*(1-.45*(1-f));switch(e){case 1:a=k;b=165.75;d=h;break;case 2:a=h;b=165.75;d=f;break;case 3:a=h;b=k;d=165.75;break;case 4:a=f;b=h;d=165.75;break;case 5:a=165.75;b=h;d=k;break;case 6:case 0:a=165.75,b=f,d=h}a=ra(Math.floor(a),Math.floor(b),Math.floor(d));return{rp:c,Yf:a}}if(c=pa(b))return{rp:null,Yf:c};c='Invalid colour: "'+b+'"';a!=
b&&(c+=' (from "'+a+'")');throw Error(c);};var pb="ontouchstart"in p||!!(p.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!p.navigator||!p.navigator.maxTouchPoints&&!p.navigator.msMaxTouchPoints),qb=null,rb={};
p.PointerEvent?rb={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:pb&&(rb={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]});var sb=0;
function tb(a,b){ub();a.changedTouches&&a.changedTouches.length!=1||(sb=setTimeout(function(){a.changedTouches&&(a.button=2,a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY);b&&vb(b,a)},750))}function ub(){sb&&(clearTimeout(sb),sb=0)}function xb(a){return a.pointerId!=void 0?a.pointerId:a.changedTouches&&a.changedTouches[0]&&a.changedTouches[0].identifier!==void 0&&a.changedTouches[0].identifier!==null?a.changedTouches[0].identifier:"mouse"}
function yb(a){var b=xb(a);return qb!==void 0&&qb!==null?qb==b:a.type=="mousedown"||a.type=="touchstart"||a.type=="pointerdown"?(qb=b,!0):!1}function zb(a){return a.type.lastIndexOf("touch",0)==0||a.type.lastIndexOf("mouse",0)==0||a.type.lastIndexOf("pointer",0)==0}function Ab(a){return a.type.lastIndexOf("touch",0)==0||a.type.lastIndexOf("pointer",0)==0}
function Bb(a){var b=[];if(a.changedTouches)for(var c=0;c<a.changedTouches.length;c++)b[c]={type:a.type,changedTouches:[a.changedTouches[c]],target:a.target,stopPropagation:function(){a.stopPropagation()},preventDefault:function(){a.preventDefault()}};else b.push(a);return b};function t(a,b,c,d,e,f){function h(y){var E=!e;y=Bb(y);for(var bb=0,Ba;Ba=y[bb];bb++)if(!E||!zb(Ba)||yb(Ba)){var wb=Ba;if(wb.type.lastIndexOf("touch",0)==0){var ce=wb.changedTouches[0];wb.clientX=ce.clientX;wb.clientY=ce.clientY}c?d.call(c,Ba):d(Ba);k=!0}}var k=!1,l=[];if(p.PointerEvent&&b in rb)for(var m=0,n;n=rb[b][m];m++)a.addEventListener(n,h,!1),l.push([a,n,h]);else if(a.addEventListener(b,h,!1),l.push([a,b,h]),b in rb){var w=function(y){h(y);var E=!f;k&&E&&y.preventDefault()};for(m=0;n=rb[b][m];m++)a.addEventListener(n,
w,!1),l.push([a,n,w])}return l}function u(a,b,c,d){function e(m){c?d.call(c,m):d(m)}var f=[];if(p.PointerEvent&&b in rb)for(var h=0,k;k=rb[b][h];h++)a.addEventListener(k,e,!1),f.push([a,k,e]);else if(a.addEventListener(b,e,!1),f.push([a,b,e]),b in rb){var l=function(m){if(m.changedTouches&&m.changedTouches.length==1){var n=m.changedTouches[0];m.clientX=n.clientX;m.clientY=n.clientY}e(m);m.preventDefault()};for(h=0;k=rb[b][h];h++)a.addEventListener(k,l,!1),f.push([a,k,l])}return f}
function v(a){for(;a.length;){var b=a.pop();b[0].removeEventListener(b[1],b[2],!1)}};
function Cb(){this.Tc=Object.create(null);this.Ce=Object.create(null)}function Db(a,b){var c=b.component.id;if(a.Tc[c])throw Error('Plugin "'+c+'" with capabilities "'+a.Tc[c].Rc+'" already added.');a.Tc[c]=b;for(var d=[],e=0;e<b.Rc.length;e++){var f=String(b.Rc[e]).toLowerCase();d.push(f);a.Ce[f]===void 0?a.Ce[f]=[c]:a.Ce[f].push(c)}a.Tc[c].Rc=d}
function Eb(a,b){var c=a.Tc[b];if(c){for(var d=0;d<c.Rc.length;d++){var e=String(c.Rc[d]).toLowerCase();a.Ce[e].splice(a.Ce[e].indexOf(b),1)}delete a.Tc[b]}}function Fb(a,b){var c=Gb;c=String(c).toLowerCase();return a.Tc[b].Rc.indexOf(c)!==-1}function Hb(a,b){b=String(b).toLowerCase();b=a.Ce[b];if(!b)return[];var c=[],d=[],e=a.Tc;b.forEach(function(f){d.push(e[f])});d.sort(function(f,h){return f.weight-h.weight});d.forEach(function(f){c.push(f.component)});return c}function Ib(a){this.kg=a}
Ib.prototype.toString=function(){return this.kg};var Jb=new Ib("positionable"),Kb=new Ib("drag_target"),Gb=new Ib("delete_area"),Lb=new Ib("autohideable");
function x(a){this.Vp=a}x.prototype.toString=function(){return this.Vp};var Mb=new x("animate"),Nb=new x("circle"),Ob=new x("clipPath"),Pb=new x("defs"),Qb=new x("feComposite"),Rb=new x("feGaussianBlur"),Sb=new x("fePointLight"),Tb=new x("feSpecularLighting"),Ub=new x("filter"),Vb=new x("g"),Wb=new x("image"),Xb=new x("line"),Yb=new x("path"),Zb=new x("pattern"),$b=new x("rect"),ac=new x("svg"),bc=new x("text"),cc=new x("tspan");var dc=null,ec=0,fc=null;function z(a,b,c){a=document.createElementNS("http://www.w3.org/2000/svg",String(a));for(var d in b)a.setAttribute(d,b[d]);document.body.runtimeStyle&&(a.runtimeStyle=a.currentStyle=a.style);c&&c.appendChild(a);return a}function A(a,b){var c=a.getAttribute("class")||"";a.setAttribute("class",c+" "+b)}
function hc(a,b){for(var c=(a.getAttribute("class")||"").split(/\s+/),d=0;d<c.length;d++)c[d]&&c[d]!=b||(c.splice(d,1),d--);c.length?a.setAttribute("class",c.join(" ")):a.removeAttribute("class")}function ic(a,b){return(" "+(a.getAttribute("class")||"")+" ").indexOf(" "+b+" ")!=-1}function jc(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function kc(a,b){var c=b.nextSibling;b=b.parentNode;if(!b)throw Error("Reference node has no parent.");c?b.insertBefore(a,c):b.appendChild(a)}
function lc(a,b){a.style.transform=b;a.style["-webkit-transform"]=b}function mc(){ec++;dc||(dc=Object.create(null))}function nc(){ec--;ec||(dc=null)}function oc(a,b,c,d){var e=a.textContent;a=e+"\n"+a.className.baseVal;var f;if(dc&&(f=dc[a]))return f;fc||(f=document.createElement("canvas"),f.className="blocklyComputeCanvas",document.body.appendChild(f),fc=f.getContext("2d"));fc.font=c+" "+b+" "+d;f=fc.measureText(e).width;dc&&(dc[a]=f);return f};function pc(a,b,c){if(c<a){var d=c;c=a;a=d}return Math.max(a,Math.min(b,c))};

var qc,rc,sc,tc=null,uc=null,vc=null,wc=null,xc="",yc="";
function zc(){if(!qc){var a=document.createElement("div");a.className="blocklyDropDownDiv";(Ac||document.body).appendChild(a);qc=a;var b=document.createElement("div");b.className="blocklyDropDownContent";a.appendChild(b);rc=b;b=document.createElement("div");b.className="blocklyDropDownArrow";a.appendChild(b);sc=b;qc.style.opacity=0;qc.style.transition="transform 0.25s, opacity 0.25s";a.addEventListener("focusin",function(){A(a,"blocklyFocused")});a.addEventListener("focusout",function(){hc(a,"blocklyFocused")})}}
function Bc(a,b,c,d){a=Cc(a,c.left,c.right,d.width);return{Mj:a.Ke,Nj:b,wj:a.Ke,xj:b+16,Ae:a.Ae,Ti:-9,Ri:!0,Si:!0}}function Dc(a,b,c,d){a=Cc(a,c.left,c.right,d.width);return{Mj:a.Ke,Nj:b-d.height,wj:a.Ke,xj:b-d.height-16,Ae:a.Ae,Ti:d.height-2-8,Ri:!1,Si:!0}}function Cc(a,b,c,d){var e=a;a=pc(b,a-d/2,c-d);b=pc(12,e-8-a,d-12-16);return{Ae:b,Ke:a}}function Ec(){var a=qc;a.style.transform="translate(0, 0)";a.style.opacity=0;vc=setTimeout(function(){Fc()},250);wc&&(wc(),wc=null)}
function Fc(){if(uc){vc&&clearTimeout(vc);var a=qc;a.style.transform="";a.style.left="";a.style.top="";a.style.opacity=0;a.style.display="none";a.style.backgroundColor="";a.style.borderColor="";wc&&(wc(),wc=null);rc.textContent="";rc.style.width="";uc=null;xc&&(hc(a,xc),xc="");yc&&(hc(a,yc),yc="");Gc(Hc)}};var Ic=Object.create(null);function Jc(a){this.kg=a}Jc.prototype.toString=function(){return this.kg};var Kc=new Jc("connectionChecker"),Lc=new Jc("cursor"),Mc=new Jc("event"),Nc=new Jc("field"),Oc=new Jc("renderer"),Pc=new Jc("toolbox"),Qc=new Jc("theme"),Rc=new Jc("flyoutsVerticalToolbox"),Sc=new Jc("metricsManager"),Tc=new Jc("blockDragger");
function B(a,b,c){if(!(a instanceof Jc)&&typeof a!="string"||String(a).trim()=="")throw Error('Invalid type "'+a+'". The type must be a non-empty string or a Blockly.registry.Type.');a=String(a).toLowerCase();if(typeof b!="string"||b.trim()=="")throw Error('Invalid name "'+b+'". The name must be a non-empty string.');b=b.toLowerCase();if(!c)throw Error("Can not register a null value");var d=Ic[a];d||(d=Ic[a]=Object.create(null));switch(a){case String(Nc):if(typeof c.L!="function")throw Error('Type "'+
a+'" must have a fromJson function');}if(d[b])throw Error('Name "'+b+'" with type "'+a+'" already registered.');d[b]=c}function Uc(a,b,c){a=String(a).toLowerCase();b=b.toLowerCase();var d=Ic[a];if(!d||!d[b]){b="Unable to find ["+b+"]["+a+"] in the registry.";if(c)throw Error(b+" You must require or register a "+a+" plugin.");console.warn(b);return null}return d[b]}function Vc(a,b,c){b=b.plugins[a.toString()]||"default";return typeof b=="function"?b:Uc(a,b,c)};var Wc="",Xc=!0,C=0,Yc=["create","move"],Zc=[];function D(a){C==0&&(Zc.length||setTimeout($c,0),Zc.push(a))}function $c(){for(var a=ad(Zc,!0),b=Zc.length=0,c;c=a[b];b++)if(c.hb){var d=bd[c.hb]||null;if(d){var e=c;if(e.Ta)for(d.le.push(e),d.rg.length=0;d.le.length>d.xl&&d.xl>=0;)d.le.shift();for(var f=0;c=d.Ea[f];f++)c(e)}}}
function ad(a,b){a=a.slice();b||a.reverse();for(var c=[],d=Object.create(null),e=0,f;f=a[e];e++)if(!f.Sh()){var h=[f.Sj?"ui":f.type,f.ga,f.hb].join(" "),k=d[h],l=k?k.event:null;if(!k)d[h]={event:f,index:e},c.push(f);else if(f.type=="move"&&k.index==e-1)l.Zd=f.Zd,l.Yd=f.Yd,l.gd=f.gd,k.index=e;else if(f.type=="change"&&f.element==l.element&&f.name==l.name)l.newValue=f.newValue;else if(f.type=="viewport_change")l.Sb=f.Sb,l.Rb=f.Rb,l.scale=f.scale,l.lg=f.lg;else if(f.type!="click"||l.type!="bubble_open")d[h]=
{event:f,index:e},c.push(f)}a=c.filter(function(m){return!m.Sh()});b||a.reverse();for(e=1;f=a[e];e++)f.type=="change"&&f.element=="mutation"&&a.unshift(a.splice(e,1)[0]);return a}function F(a){Wc=typeof a=="boolean"?a?gb():"":a}function cd(a){var b=[];a=mb(a,!1);for(var c=0,d;d=a[c];c++)b[c]=d.id;return b}function G(a){return Uc(Mc,a)};
function dd(){this.vc=null;this.hb=void 0;this.group=Wc;this.Ta=Xc}g=dd.prototype;g.Sj=!1;g.P=function(){var a={type:this.type};this.group&&(a.group=this.group);return a};g.L=function(a){this.vc=!1;this.group=a.group};g.Sh=function(){return!1};g.run=function(){};function ed(a){if(a.hb)var b=bd[a.hb]||null;if(!b)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return b};function H(a,b){a.i=b.prototype;a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function fd(a,b){for(var c in b)a[c]=b[c]}function gd(a){return Object.values?Object.values(a):Object.keys(a).map(function(b){return a[b]})};function I(a){return document.createElementNS("https://developers.google.com/blockly/xml",a)};function hd(a){for(var b=J,c=I("xml"),d=id(b),e=I("variables"),f=0,h;h=d[f];f++){var k=I("variable");k.appendChild(document.createTextNode(h.name));h.type&&k.setAttribute("type",h.type);k.id=h.Pa();e.appendChild(k)}e.hasChildNodes()&&c.appendChild(e);e=[].concat(b.Ci);e.length>1&&(b.zc.offset=Math.sin(3*Math.PI/180),b.o&&(b.zc.offset*=-1),e.sort(b.zc));for(d=0;f=e[d];d++)c.appendChild(f.ir(a));b=b.ra(!0);for(d=0;e=b[d];d++)c.appendChild(jd(e,a));return c}
function jd(a,b){if(a.yb()&&(a=kd(a,!1)[0],!a))return new DocumentFragment;var c;a.j.o&&(c=a.j.Wf());b=ld(a,b);var d=a.ba();b.setAttribute("x",Math.round(a.j.o?c-d.x:d.x));b.setAttribute("y",Math.round(d.y));return b}
function ld(a,b){if(a.yb())return(a=kd(a,!1)[0])?ld(a):new DocumentFragment;var c=I(a.S?"shadow":"block");c.setAttribute("type",a.type);b||c.setAttribute("id",a.id);if(a.ed){var d=a.ed();d&&(d.hasChildNodes()||d.hasAttributes())&&c.appendChild(d)}d=0;for(var e;e=a.v[d];d++)for(var f=0,h;h=e.$[f];f++){var k=!1;h.name&&(h.Fl?k=!0:h.qf&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),
k=!0));k?(k=I("field"),k.setAttribute("name",h.name||""),k.textContent=h.pb,h=k):h=null;h&&c.appendChild(h)}if(d=a.Vb.text)e=a.Vb.size,f=a.Vb.ln,h=I("comment"),h.appendChild(document.createTextNode(d)),h.setAttribute("pinned",f),h.setAttribute("h",e.height),h.setAttribute("w",e.width),c.appendChild(h);a.data&&(d=I("data"),d.appendChild(document.createTextNode(a.data)),c.appendChild(d));for(d=0;e=a.v[d];d++){var l;f=!0;e.type!=5&&(k=e.connection.G(),e.type==1?l=I("value"):e.type==3&&(l=I("statement")),
h=e.connection.Ne(),!h||k&&k.S||l.appendChild(md(h,b)),k&&(h=ld(k,b),h.nodeType==Node.ELEMENT_NODE&&(l.appendChild(h),f=!1)),l.setAttribute("name",e.name),f||c.appendChild(l))}a.Ic!=void 0&&a.Ic!=a.vp&&c.setAttribute("inline",a.Ic);a.isCollapsed()&&c.setAttribute("collapsed",!0);a.isEnabled()||c.setAttribute("disabled",!0);nd(a)||a.S||c.setAttribute("deletable",!1);a.Qa()||a.S||c.setAttribute("movable",!1);a.Kb()||c.setAttribute("editable",!1);if(d=nb(a))h=ld(d,b),h.nodeType==Node.ELEMENT_NODE&&(l=
I("next"),l.appendChild(h),c.appendChild(l));h=a.B&&a.B.Ne();!h||d&&d.S||l.appendChild(md(h,b));return c}function md(a,b){for(var c=a=a.cloneNode(!0),d;c;)if(b&&c.nodeName=="shadow"&&c.removeAttribute("id"),c.firstChild)c=c.firstChild;else{for(;c&&!c.nextSibling;)d=c,c=c.parentNode,d.nodeType==Node.TEXT_NODE&&d.data.trim()==""&&c.firstChild!=d&&jc(d);c&&(d=c,c=c.nextSibling,d.nodeType==Node.TEXT_NODE&&d.data.trim()==""&&jc(d))}return a}
function od(a){return(new XMLSerializer).serializeToString(a).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")}function pd(a){var b=(new DOMParser).parseFromString(a,"text/xml");if(!b||!b.documentElement||b.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+a);return b.documentElement}
function qd(a,b){var c;b.o&&(c=b.Wf());var d=[];mc();var e=Wc;e||F(!0);b.Ua&&b.Ua(!1);var f=!0;try{for(var h=0,k;k=a.childNodes[h];h++){var l=k.nodeName.toLowerCase(),m=k;if(l=="block"||l=="shadow"&&!Xc){var n=rd(m,b);d.push(n.id);var w=m.hasAttribute("x")?parseInt(m.getAttribute("x"),10):10,y=m.hasAttribute("y")?parseInt(m.getAttribute("y"),10):10;isNaN(w)||isNaN(y)||n.moveBy(b.o?c-w:w,y);f=!1}else{if(l=="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(l=="variables"){if(f)for(var E=
void 0,bb=b,Ba=0;E=m.childNodes[Ba];Ba++){if(E.nodeType==Node.ELEMENT_NODE){var wb=E.getAttribute("type"),ce=E.getAttribute("id");bb.Wc(E.textContent,wb,ce)}}else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");f=!1}}}}finally{e||F(!1),nc()}b.Ua&&b.Ua(!0);D(new (G("finished_loading"))(b))}
function rd(a,b){if(a instanceof sd){var c=a;a=b;b=c;console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}C++;c=b.Le();try{var d=td(a,b),e=mb(d,!1);if(b.J){ud(d,!1);for(var f=e.length-1;f>=0;f--)e[f].Zf();for(f=e.length-1;f>=0;f--)e[f].V(!1);setTimeout(function(){d.disposed||ud(d,!0)},1);vd(d);wd(b)}else for(f=e.length-1;f>=0;f--);}finally{C--}if(C==0){a=xd(b,c);for(f=0;f<a.length;f++)b=a[f],D(new (G("var_create"))(b));D(new (G("create"))(d))}return d}
function yd(a,b){for(var c=0,d;d=a[c];c++){var e=d.textContent,f=d.getAttribute("pinned")=="true",h=parseInt(d.getAttribute("w"),10);d=parseInt(d.getAttribute("h"),10);b.df(e);b.Vb.ln=f;isNaN(h)||isNaN(d)||(b.Vb.size=new Ga(h,d));f&&b.ep&&!b.xb&&setTimeout(function(){b.Ub.ya(!0)},1)}}function zd(a){for(var b={Af:null,Bf:null},c=0,d;d=a.childNodes[c];c++)d.nodeType==Node.ELEMENT_NODE&&(d.nodeName.toLowerCase()=="block"?b.Af=d:d.nodeName.toLowerCase()=="shadow"&&(b.Bf=d));return b}
function td(a,b,c,d){var e=a.getAttribute("type");if(!e)throw TypeError("Block type unspecified: "+a.outerHTML);var f=a.getAttribute("id");f=b.ik(e,f);for(var h=[],k=[],l=[],m=[],n=[],w=[],y=0,E;E=a.childNodes[y];y++)if(E.nodeType!=Node.TEXT_NODE)switch(E.nodeName.toLowerCase()){case "mutation":h.push(E);break;case "comment":if(!ka.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}k.push(E);break;case "data":l.push(E);break;case "title":case "field":m.push(E);
break;case "value":case "statement":n.push(E);break;case "next":w.push(E);break;default:console.warn("Ignoring unknown tag: "+E.nodeName)}y=!1;E=0;for(var bb;bb=h[E];E++)f.Ed&&(f.Ed(bb),f.Zf&&(y=!0));h=y;yd(k,f);for(k=0;y=l[k];k++)f.data=y.textContent;if(c)if(d)if(f.D)c.connect(f.D);else throw TypeError("Next block does not have previous statement.");else if(f.u)c.connect(f.u);else if(f.D)c.connect(f.D);else throw TypeError("Child block does not have output or previous statement.");for(c=0;k=m[c];c++)l=
k.getAttribute("name"),d=f,(y=Ad(d,l))?y.zj(k):console.warn("Ignoring non-existent field "+l+" in block "+d.type);for(m=0;d=n[m];m++){l=d.getAttribute("name");c=Bd(f,l);if(!c){console.warn("Ignoring non-existent input "+l+" in block "+e);break}d=zd(d);if(d.Af){if(!c.connection)throw TypeError("Input connection does not exist.");td(d.Af,b,c.connection,!1)}d.Bf&&c.connection.xg(d.Bf)}for(e=0;n=w[e];e++){n=zd(n);if(n.Af){if(!f.B)throw TypeError("Next statement does not exist.");if(f.B.isConnected())throw TypeError("Next statement is already connected.");
td(n.Af,b,f.B,!0)}n.Bf&&f.B&&f.B.xg(n.Bf)}h&&f.Zf();(b=a.getAttribute("inline"))&&f.ge(b=="true");(b=a.getAttribute("disabled"))&&f.pd(b!="true"&&b!="disabled");if(b=a.getAttribute("deletable"))f.bm=b=="true";(b=a.getAttribute("movable"))&&f.Rk(b=="true");(b=a.getAttribute("editable"))&&f.Qk(b=="true");(b=a.getAttribute("collapsed"))&&f.ce(b=="true");if(a.nodeName.toLowerCase()=="shadow"){a=kd(f,!1);for(b=0;w=a[b];b++)if(!w.S)throw TypeError("Shadow block not allowed non-shadow child.");if(Cd(f).length)throw TypeError("Shadow blocks cannot have variable references.");
f.Wk(!0)}return f};function Dd(a){Dd.i.constructor.call(this);this.ga=(this.vc=typeof a=="undefined")?"":a.id;this.hb=this.vc?"":a.j.id}H(Dd,dd);Dd.prototype.P=function(){var a=Dd.i.P.call(this);a.blockId=this.ga;return a};Dd.prototype.L=function(a){Dd.i.L.call(this,a);this.ga=a.blockId};function Ed(a,b,c,d,e){Ed.i.constructor.call(this,a);a&&(this.element=typeof b=="undefined"?"":b,this.name=typeof c=="undefined"?"":c,this.oldValue=typeof d=="undefined"?"":d,this.newValue=typeof e=="undefined"?"":e)}H(Ed,Dd);g=Ed.prototype;
g.type="change";g.P=function(){var a=Ed.i.P.call(this);a.element=this.element;this.name&&(a.name=this.name);a.oldValue=this.oldValue;a.newValue=this.newValue;return a};g.L=function(a){Ed.i.L.call(this,a);this.element=a.element;this.name=a.name;this.oldValue=a.oldValue;this.newValue=a.newValue};g.Sh=function(){return this.oldValue==this.newValue};
g.run=function(a){var b=ed(this).Ib(this.ga);if(b)switch(b.Xd&&b.Xd.ya(!1),a=a?this.newValue:this.oldValue,this.element){case "field":(b=Ad(b,this.name))?Fd(b,a):console.warn("Can't set non-existent field: "+this.name);break;case "comment":b.df(a||null);break;case "collapsed":b.ce(!!a);break;case "disabled":b.pd(!a);break;case "inline":b.ge(!!a);break;case "mutation":var c="";b.ed&&(c=(c=b.ed())&&od(c));if(b.Ed){var d=pd(a||"<mutation/>");b.Ed(d)}D(new Ed(b,"mutation",null,c,a));break;default:console.warn("Unknown change type: "+
this.element)}else console.warn("Can't change non-existent block: "+this.ga)};function Gd(a){Gd.i.constructor.call(this,a);a&&(a.S&&(this.Ta=!1),this.xml=a.j.J?jd(a):ld(a),this.Od=cd(a))}H(Gd,Dd);Gd.prototype.type="create";Gd.prototype.P=function(){var a=Gd.i.P.call(this);a.xml=od(this.xml);a.ids=this.Od;this.Ta||(a.recordUndo=this.Ta);return a};Gd.prototype.L=function(a){Gd.i.L.call(this,a);this.xml=pd(a.xml);this.Od=a.ids;a.recordUndo!==void 0&&(this.Ta=a.recordUndo)};
Gd.prototype.run=function(a){var b=ed(this);if(a)a=I("xml"),a.appendChild(this.xml),qd(a,b);else{a=0;for(var c;c=this.Od[a];a++){var d=b.Ib(c);d?d.dispose(!1):c==this.ga&&console.warn("Can't uncreate non-existent block: "+c)}}};function Hd(a){Hd.i.constructor.call(this,a);if(a){if(a.getParent())throw Error("Connected blocks cannot be deleted.");a.S&&(this.Ta=!1);this.Ze=a.j.J?jd(a):ld(a);this.Od=cd(a)}}H(Hd,Dd);Hd.prototype.type="delete";
Hd.prototype.P=function(){var a=Hd.i.P.call(this);a.oldXml=od(this.Ze);a.ids=this.Od;this.Ta||(a.recordUndo=this.Ta);return a};Hd.prototype.L=function(a){Hd.i.L.call(this,a);this.Ze=pd(a.oldXml);this.Od=a.ids;a.recordUndo!==void 0&&(this.Ta=a.recordUndo)};Hd.prototype.run=function(a){var b=ed(this);if(a){a=0;for(var c;c=this.Od[a];a++){var d=b.Ib(c);d?d.dispose(!1):c==this.ga&&console.warn("Can't delete non-existent block: "+c)}}else a=I("xml"),a.appendChild(this.Ze),qd(a,b)};
function Id(a){Id.i.constructor.call(this,a);a&&(a.S&&(this.Ta=!1),a=Jd(this),this.$m=a.gn,this.Xm=a.Em,this.lk=a.Xl)}H(Id,Dd);g=Id.prototype;g.type="move";g.P=function(){var a=Id.i.P.call(this);this.Zd&&(a.newParentId=this.Zd);this.Yd&&(a.newInputName=this.Yd);this.gd&&(a.newCoordinate=Math.round(this.gd.x)+","+Math.round(this.gd.y));this.Ta||(a.recordUndo=this.Ta);return a};
g.L=function(a){Id.i.L.call(this,a);this.Zd=a.newParentId;this.Yd=a.newInputName;if(a.newCoordinate){var b=a.newCoordinate.split(",");this.gd=new r(Number(b[0]),Number(b[1]))}a.recordUndo!==void 0&&(this.Ta=a.recordUndo)};function Kd(a){var b=Jd(a);a.Zd=b.gn;a.Yd=b.Em;a.gd=b.Xl}function Jd(a){var b=ed(a).Ib(a.ga);a={};var c=b.getParent();if(c){if(a.gn=c.id,b=Ld(c,b))a.Em=b.name}else a.Xl=b.ba();return a}g.Sh=function(){return this.$m==this.Zd&&this.Xm==this.Yd&&ua(this.lk,this.gd)};
g.run=function(a){var b=ed(this),c=b.Ib(this.ga);if(c){var d=a?this.Zd:this.$m,e=a?this.Yd:this.Xm,f=a?this.gd:this.lk;a=null;if(d&&(a=b.Ib(d),!a)){console.warn("Can't connect to non-existent block: "+d);return}c.getParent()&&Md(c);if(f)e=c.ba(),c.moveBy(f.x-e.x,f.y-e.y);else{c=c.u||c.D;b=c.type;if(e){if(a=Bd(a,e))var h=a.connection}else b==4&&(h=a.B);h?c.connect(h):console.warn("Can't connect to non-existent input: "+e)}}else console.warn("Can't move non-existent block: "+this.ga)};
B(Mc,"create",Gd);B(Mc,"delete",Hd);B(Mc,"change",Ed);B(Mc,"move",Id);function Nd(a){this.vc=typeof a=="undefined";this.hb=a?a.id:"";this.group=Wc;this.Ta=!1}H(Nd,dd);Nd.prototype.type="finished_loading";Nd.prototype.P=function(){var a={type:this.type};this.group&&(a.group=this.group);this.hb&&(a.workspaceId=this.hb);return a};Nd.prototype.L=function(a){this.vc=!1;this.hb=a.workspaceId;this.group=a.group};B(Mc,"finished_loading",Nd);function Od(a){Od.i.constructor.call(this);this.vc=typeof a=="undefined";this.hb=a?a:"";this.Ta=!1}H(Od,dd);Od.prototype.Sj=!0;function Pd(a,b,c,d){Pd.i.constructor.call(this,a?a.j.id:void 0);this.ga=a?a.id:null;this.element=typeof b=="undefined"?"":b;this.oldValue=typeof c=="undefined"?"":c;this.newValue=typeof d=="undefined"?"":d}H(Pd,Od);Pd.prototype.type="ui";
Pd.prototype.P=function(){var a=Pd.i.P.call(this);a.element=this.element;this.newValue!==void 0&&(a.newValue=this.newValue);this.ga&&(a.blockId=this.ga);return a};Pd.prototype.L=function(a){Pd.i.L.call(this,a);this.element=a.element;this.newValue=a.newValue;this.ga=a.blockId};B(Mc,"ui",Pd);function Qd(a){Qd.i.constructor.call(this);this.wd=(this.vc=typeof a=="undefined")?"":a.Pa();this.hb=this.vc?"":a.j.id}H(Qd,dd);Qd.prototype.P=function(){var a=Qd.i.P.call(this);a.varId=this.wd;return a};Qd.prototype.L=function(a){Qd.i.P.call(this);this.wd=a.varId};function Rd(a){Rd.i.constructor.call(this,a);a&&(this.ne=a.type,this.me=a.name)}H(Rd,Qd);Rd.prototype.type="var_create";Rd.prototype.P=function(){var a=Rd.i.P.call(this);a.varType=this.ne;a.varName=this.me;return a};
Rd.prototype.L=function(a){Rd.i.L.call(this,a);this.ne=a.varType;this.me=a.varName};Rd.prototype.run=function(a){var b=ed(this);a?b.Wc(this.me,this.ne,this.wd):b.Je(this.wd)};function Sd(a){Sd.i.constructor.call(this,a);a&&(this.ne=a.type,this.me=a.name)}H(Sd,Qd);Sd.prototype.type="var_delete";Sd.prototype.P=function(){var a=Sd.i.P.call(this);a.varType=this.ne;a.varName=this.me;return a};Sd.prototype.L=function(a){Sd.i.L.call(this,a);this.ne=a.varType;this.me=a.varName};
Sd.prototype.run=function(a){var b=ed(this);a?b.Je(this.wd):b.Wc(this.me,this.ne,this.wd)};function Td(a,b){Td.i.constructor.call(this,a);a&&(this.mk=a.name,this.jk=typeof b=="undefined"?"":b)}H(Td,Qd);Td.prototype.type="var_rename";Td.prototype.P=function(){var a=Td.i.P.call(this);a.oldName=this.mk;a.newName=this.jk;return a};Td.prototype.L=function(a){Td.i.L.call(this,a);this.mk=a.oldName;this.jk=a.newName};Td.prototype.run=function(a){var b=ed(this);a?b.af(this.wd,this.jk):b.af(this.wd,this.mk)};
B(Mc,"var_create",Rd);B(Mc,"var_delete",Sd);B(Mc,"var_rename",Td);function Ud(a){this.Gf=a;this.va()}g=Ud.prototype;g.aa=null;g.oc=null;g.Gf=null;g.od=1;g.Eg=null;g.Ul=new r(0,0);g.va=function(){this.aa||(this.aa=z(ac,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklyBlockDragSurface"},this.Gf),this.oc=z(Vb,{},this.aa))};
function Vd(a,b){if(a.oc.childNodes.length)throw Error("Already dragging a block.");a.oc.appendChild(b);a.aa.style.display="block";a.Eg=new r(0,0)}g.lf=function(a,b){this.Eg=new r(a*this.od,b*this.od);a=this.Eg.x;b=this.Eg.y;a=a.toFixed(0);b=b.toFixed(0);this.aa.style.display="block";lc(this.aa,"translate3d("+a+"px, "+b+"px, 0px)")};g.Dj=function(){var a=Xa(this.aa);return new r(a.x/this.od,a.y/this.od)};g.I=function(){return this.aa};
g.mh=function(a){a?a.appendChild(this.oc.firstChild):this.oc.removeChild(this.oc.firstChild);this.aa.style.display="none";if(this.oc.childNodes.length)throw Error("Drag group was not cleared.");this.Eg=null};var Wd=!1,Xd=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;",
"left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);",
"color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {",
"max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;",
"border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;",
"}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;",
"}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;",
"}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",
".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {",
"margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;",
"}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",
".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",
".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {",
"box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {",
"background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"];function Yd(a,b){this.Pe=a;this.Zk=b.spacing;this.Mm=b.length;this.wp=(this.Wj=a.firstChild)&&this.Wj.nextSibling;this.Pp=b.snap}Yd.prototype.od=1;Yd.prototype.dispose=function(){this.Pe=null};Yd.prototype.update=function(a){this.od=a;var b=this.Zk*a||100;this.Pe.setAttribute("width",b);this.Pe.setAttribute("height",b);b=Math.floor(this.Zk/2)+.5;var c=b-this.Mm/2,d=b+this.Mm/2;b*=a;c*=a;d*=a;Zd(this.Wj,a,c,d,b,b);Zd(this.wp,a,b,b,c,d)};
function Zd(a,b,c,d,e,f){a&&(a.setAttribute("stroke-width",b),a.setAttribute("x1",c),a.setAttribute("y1",e),a.setAttribute("x2",d),a.setAttribute("y2",f))}Yd.prototype.moveTo=function(a,b){this.Pe.setAttribute("x",a);this.Pe.setAttribute("y",b);(Ka||La)&&this.update(this.od)};function $d(){this.name="classic";B(Qc,"classic",this)}$d.prototype.Yb=function(){return this.name+"-theme"};var ae={};ae=new $d;function be(a){if(!a)return null;if(a instanceof Element||typeof a=="string"){if(a){if(typeof a!="string"&&(Ka&&a.outerHTML?a=a.outerHTML:a instanceof Element||(a=null)),typeof a=="string"&&(a=pd(a),a.nodeName.toLowerCase()!="xml"))throw TypeError("Toolbox should be an <xml> document.");}else a=null;var b={contents:de(a)};a instanceof Node&&ee(a,b);a=b}b=a.kind;var c=a.contents;if(b&&b!="flyoutToolbox"&&b!="categoryToolbox")throw Error("Invalid toolbox kind "+b+". Please supply either flyoutToolbox or categoryToolbox");
if(!c)throw Error("Toolbox must have a contents attribute.");return a}function fe(a){return a?a.contents?a.contents:Array.isArray(a)&&a.length>0&&!a[0].nodeType?a:de(a):[]}function ge(a){if(!a)return!1;var b=a.kind;return b?b=="categoryToolbox":!!a.contents.filter(function(c){return c.kind.toUpperCase()=="CATEGORY"}).length}
function de(a){var b=[],c=a.childNodes;c||(c=a);a=0;for(var d;d=c[a];a++)if(d.tagName){var e={},f=d.tagName.toUpperCase();e.kind=f;f=="BLOCK"?e.blockxml=d:d.childNodes&&d.childNodes.length>0&&(e.contents=de(d));ee(d,e);b.push(e)}return b}function ee(a,b){for(var c=0;c<a.attributes.length;c++){var d=a.attributes[c];d.nodeName.indexOf("css-")>-1?(b.cssconfig=b.cssconfig||{},b.cssconfig[d.nodeName.replace("css-","")]=d.value):b[d.nodeName]=d.value}};function he(a){var b=!!a.readOnly;if(b)var c=null,d=!1,e=!1,f=!1,h=!1,k=!1,l=!1;else{c=be(a.toolbox);d=ge(c);e=a.trashcan;e===void 0&&(e=d);var m=a.maxTrashcanContents;e?m===void 0&&(m=32):m=0;f=a.collapse;f===void 0&&(f=d);h=a.comments;h===void 0&&(h=d);k=a.disable;k===void 0&&(k=d);l=a.sounds;l===void 0&&(l=!0)}var n=!!a.rtl;var w=a.toolboxPosition!=="end"==n?3:2;var y=a.css;y===void 0&&(y=!0);var E="https://blockly-demo.appspot.com/static/media/";a.media?E=a.media:a.path&&(E=a.path+"media/");var bb=
a.oneBasedIndex===void 0?!0:!!a.oneBasedIndex,Ba=a.renderer||"geras",wb=a.plugins||{};this.o=n;this.gi=bb;this.collapse=f;this.Qo=h;this.disable=k;this.readOnly=b;this.fk=a.maxBlocks||Infinity;this.Yh=a.maxInstances;this.ji=E;this.um=d;b=a.move||{};f={};b.scrollbars===void 0&&a.scrollbars===void 0?f.scrollbars=d:typeof b.scrollbars=="object"?(f.scrollbars={},f.scrollbars.Lj=!!b.scrollbars.horizontal,f.scrollbars.vertical=!!b.scrollbars.vertical,f.scrollbars.Lj&&f.scrollbars.vertical?f.scrollbars=
!0:f.scrollbars.Lj||f.scrollbars.vertical||(f.scrollbars=!1)):f.scrollbars=!!b.scrollbars||!!a.scrollbars;f.nf=f.scrollbars&&b.wheel!==void 0?!!b.wheel:typeof f.scrollbars=="object";f.Gc=f.scrollbars?b.drag===void 0?!0:!!b.drag:!1;this.Sa=f;this.xm=e;this.Zh=m;this.qp=l;this.op=y;this.Sd=c;c=a.grid||{};d={};d.spacing=Number(c.spacing)||0;d.$i=c.colour||"#888";d.length=c.length===void 0?1:Number(c.length);d.dr=d.spacing>0&&!!c.snap;this.tm=d;c=a.zoom||{};d={};d.controls=c.controls===void 0?!1:!!c.controls;
d.nf=c.wheel===void 0?!1:!!c.wheel;d.Sp=c.startScale===void 0?1:Number(c.startScale);d.hg=c.maxScale===void 0?3:Number(c.maxScale);d.jg=c.minScale===void 0?.3:Number(c.minScale);d.Mp=c.scaleSpeed===void 0?1.2:Number(c.scaleSpeed);d.jn=c.pinch===void 0?d.nf||d.controls:!!c.pinch;this.qa=d;this.Cb=w;this.Lk=Ba;this.Mk=a.rendererOverrides;this.Gj=null;this.ob=a.parentWorkspace;this.plugins=wb};
function ie(a,b,c,d,e){this.g=a;b=b===void 0?!0:b;c=c===void 0?!0:c;var f=b&&c;b&&(this.ea=new je(a,!0,f,d,e));c&&(this.X=new je(a,!1,f,d,e));f&&(this.Hf=z($b,{height:ke,width:ke,"class":"blocklyScrollbarBackground"},null),kc(this.Hf,a.td));this.Y=null}g=ie.prototype;g.dispose=function(){jc(this.Hf);this.Y=this.g=this.Hf=null;this.ea&&(this.ea.dispose(),this.ea=null);this.X&&(this.X.dispose(),this.X=null)};
g.resize=function(){var a=this.g.$b();if(a){var b=!1,c=!1;this.Y&&this.Y.Xa==a.Xa&&this.Y.gb==a.gb&&this.Y.ib==a.ib&&this.Y.Za==a.Za?(this.Y&&this.Y.scrollWidth==a.scrollWidth&&this.Y.Rb==a.Rb&&this.Y.scrollLeft==a.scrollLeft||(b=!0),this.Y&&this.Y.scrollHeight==a.scrollHeight&&this.Y.Sb==a.Sb&&this.Y.scrollTop==a.scrollTop||(c=!0)):c=b=!0;if(b||c){try{C++,this.ea&&b&&this.ea.resize(a),this.X&&c&&this.X.resize(a)}finally{C--}le(this.g)}this.ea&&this.X&&(this.Y&&this.Y.Xa==a.Xa&&this.Y.Za==a.Za||this.Hf.setAttribute("x",
this.X.position.x),this.Y&&this.Y.gb==a.gb&&this.Y.ib==a.ib||this.Hf.setAttribute("y",this.ea.position.y));this.Y=a}};g.ri=function(a,b){this.ea&&this.ea.ri(a,b);this.X&&this.X.ri(a,b)};g.set=function(a,b,c){this.ea&&this.ea.set(a,!1);this.X&&this.X.set(b,!1);if(c||c===void 0)a={},this.ea&&(a.x=me(this.ea)),this.X&&(a.y=me(this.X)),this.g.vg(a)};g.ee=function(a){this.ea&&this.ea.ee(a);this.X&&this.X.ee(a)};
g.isVisible=function(){var a=!1;this.ea&&(a=this.ea.isVisible());this.X&&(a=a||this.X.isVisible());return a};
function je(a,b,c,d,e){this.g=a;this.kd=c||!1;this.Md=b;this.Td=e!==void 0?e:.5;this.ratio=this.Y=null;a="blocklyScrollbar"+(this.Md?"Horizontal":"Vertical");d&&(a+=" "+d);this.xc=z(ac,{"class":a},null);this.m=z(Vb,{},this.xc);this.La=z($b,{"class":"blocklyScrollbarBackground"},this.m);d=Math.floor((ke-5)/2);this.Bb=z($b,{"class":"blocklyScrollbarHandle",rx:d,ry:d},this.m);this.g.Na.subscribe(this.Bb,"scrollbarColour","fill");this.g.Na.subscribe(this.Bb,"scrollbarOpacity","fill-opacity");kc(this.xc,
K(this.g));this.position=new r(0,0);d=ke;b?(this.La.setAttribute("height",d),this.xc.setAttribute("height",d),this.Bb.setAttribute("height",d-5),this.Bb.setAttribute("y",2.5),this.Vh="width",this.mn="x"):(this.La.setAttribute("width",d),this.xc.setAttribute("width",d),this.Bb.setAttribute("width",d-5),this.Bb.setAttribute("x",2.5),this.Vh="height",this.mn="y");this.dn=t(this.La,"mousedown",this,this.Dp);this.fn=t(this.Bb,"mousedown",this,this.Ep)}var ne,oe;g=je.prototype;g.xk=new r(0,0);g.xn=0;
g.Ob=0;g.Xc=0;g.Xf=0;g.Jc=!0;g.Dd=!0;var ke=15;pb&&(ke=25);g=je.prototype;g.dispose=function(){pe();v(this.dn);this.dn=null;v(this.fn);this.fn=null;jc(this.xc);this.La=this.m=this.xc=null;this.Bb&&(this.g.Na.unsubscribe(this.Bb),this.Bb=null);this.g=null};function qe(a,b){return b=b<=0||isNaN(b)?0:Math.min(b,a.Ob)}function re(a,b){a.Xc=b;a.Bb.setAttribute(a.Vh,a.Xc)}function se(a,b){return b=b<=0||isNaN(b)?0:Math.min(b,a.Ob-a.Xc)}function te(a,b){a.Xf=b;a.Bb.setAttribute(a.mn,a.Xf)}
function ue(a,b){a.Ob=b;a.xc.setAttribute(a.Vh,a.Ob);a.La.setAttribute(a.Vh,a.Ob)}g.setPosition=function(a,b){this.position.x=a;this.position.y=b;lc(this.xc,"translate("+(this.position.x+this.xk.x)+"px,"+(this.position.y+this.xk.y)+"px)")};
g.resize=function(a){if(!a&&(a=this.g.$b(),!a))return;var b;if(!(b=!this.Y)){b=a;var c=this.Y;b=!(b.Xa==c.Xa&&b.gb==c.gb&&b.Rb==c.Rb&&b.Sb==c.Sb&&b.ib==c.ib&&b.Za==c.Za&&b.scrollWidth==c.scrollWidth&&b.scrollHeight==c.scrollHeight&&b.scrollLeft==c.scrollLeft&&b.scrollTop==c.scrollTop)}b&&(this.Md?(b=a,ve(this,b)?we(this,b):xe(this,b)):(b=a,ve(this,b)?ye(this,b):ze(this,b)),this.Y=a,Ae(this))};function ve(a,b){return a.Y?a.Y.Xa!==b.Xa||a.Y.gb!==b.gb||a.Y.Za!==b.Za||a.Y.ib!==b.ib:!0}
function we(a,b){var c=b.Xa-a.Td*2;a.kd&&(c-=ke);ue(a,Math.max(0,c));c=b.Za+a.Td;a.kd&&a.g.o&&(c+=ke);a.setPosition(c,b.ib+b.gb-ke-a.Td);xe(a,b)}function xe(a,b){if(b.Xa>=b.scrollWidth)re(a,a.Ob),te(a,0),a.kd||a.ya(!1);else{a.kd||a.ya(!0);var c=a.Ob*b.Xa/b.scrollWidth;c=qe(a,c);re(a,c);c=b.scrollWidth-b.Xa;var d=a.Ob-a.Xc;b=(b.Rb-b.scrollLeft)/c*d;b=se(a,b);te(a,b);a.ratio=d/c}}
function ye(a,b){var c=b.gb-a.Td*2;a.kd&&(c-=ke);ue(a,Math.max(0,c));a.setPosition(a.g.o?b.Za+a.Td:b.Za+b.Xa-ke-a.Td,b.ib+a.Td);ze(a,b)}function ze(a,b){if(b.gb>=b.scrollHeight)re(a,a.Ob),te(a,0),a.kd||a.ya(!1);else{a.kd||a.ya(!0);var c=a.Ob*b.gb/b.scrollHeight;c=qe(a,c);re(a,c);c=b.scrollHeight-b.gb;var d=a.Ob-a.Xc;b=(b.Sb-b.scrollTop)/c*d;b=se(a,b);te(a,b);a.ratio=d/c}}g.isVisible=function(){return this.Jc};g.ee=function(a){var b=a!=this.Dd;this.Dd=a;b&&this.Lg()};
g.ya=function(a){var b=a!=this.isVisible();if(this.kd)throw Error("Unable to toggle visibility of paired scrollbars.");this.Jc=a;b&&this.Lg()};g.Lg=function(){this.Dd&&this.isVisible()?this.xc.setAttribute("display","block"):this.xc.setAttribute("display","none")};
g.Dp=function(a){Gc(this.g);qb=null;pe();if(ab(a))a.stopPropagation();else{var b=cb(a,K(this.g),Be(this.g));b=this.Md?b.x:b.y;var c=$a(this.Bb);c=this.Md?c.x:c.y;var d=this.Xf,e=this.Xc*.95;b<=c?d-=e:b>=c+this.Xc&&(d+=e);te(this,se(this,d));Ae(this);a.stopPropagation();a.preventDefault()}};
g.Ep=function(a){Gc(this.g);pe();ab(a)?a.stopPropagation():(this.Qp=this.Xf,Ce(this.g),this.xn=this.Md?a.clientX:a.clientY,ne=t(document,"mouseup",this,this.Gp),oe=t(document,"mousemove",this,this.Fp),a.stopPropagation(),a.preventDefault())};g.Fp=function(a){te(this,se(this,this.Qp+((this.Md?a.clientX:a.clientY)-this.xn)));Ae(this)};g.Gp=function(){De(this.g);qb=null;pe()};function pe(){Ee(!0);ne&&(v(ne),ne=null);oe&&(v(oe),oe=null)}function me(a){a=a.Xf/(a.Ob-a.Xc);isNaN(a)&&(a=0);return a}
function Ae(a){var b=me(a),c={};a.Md?c.x=b:c.y=b;a.g.vg(c)}g.set=function(a,b){te(this,se(this,a*this.ratio));(b||b===void 0)&&Ae(this)};g.ri=function(a,b){this.xk=new r(a,b)};var Fe=!1,Ge=!1,He=0,Ie=0,Je=0,Ke=0,Le=null,Me=null,Ne=null;function Oe(a){for(;a&&a.Qb;){if(typeof a.Qb=="string"||typeof a.Qb=="function")return a;a=a.Qb}return null}function Pe(a){a.zp=u(a,"mouseover",null,Qe);a.xp=u(a,"mouseout",null,Re);a.addEventListener("mousemove",Se,!1)}function Te(a){a&&(v(a.zp),v(a.xp),a.removeEventListener("mousemove",Se))}function Qe(a){Ge||(a=Oe(a.currentTarget),Le!=a&&(Ue(),Me=null,Le=a),clearTimeout(He))}
function Re(){Ge||(He=setTimeout(function(){Me=Le=null;Ue()},1),clearTimeout(Ie))}function Se(a){if(Le&&Le.Qb&&!Ge)if(Fe){var b=Je-a.pageX;a=Ke-a.pageY;Math.sqrt(b*b+a*a)>10&&Ue()}else Me!=Le&&(clearTimeout(Ie),Je=a.pageX,Ke=a.pageY,Ie=setTimeout(Ve,750))}function Ue(){Fe&&(Fe=!1,Ne&&(Ne.style.display="none"));Ie&&clearTimeout(Ie)}
function Ve(){if(!Ge&&(Me=Le,Ne)){Ne.textContent="";var a;if(a=Oe(Le)){for(a=a.Qb;typeof a=="function";)a=a();if(typeof a!="string")throw Error("Tooltip function must return a string.");}else a="";a=Da(a,50);a=a.split("\n");for(var b=0;b<a.length;b++){var c=document.createElement("div");c.appendChild(document.createTextNode(a[b]));Ne.appendChild(c)}a=Le.o;b=document.documentElement.clientWidth;c=document.documentElement.clientHeight;Ne.style.direction=a?"rtl":"ltr";Ne.style.display="block";Fe=!0;
var d=Je;d=a?d-(0+Ne.offsetWidth):d+0;var e=Ke+10;e+Ne.offsetHeight>c+window.scrollY&&(e-=Ne.offsetHeight+20);a?d=Math.max(5-window.scrollX,d):d+Ne.offsetWidth>b+window.scrollX-10&&(d=b-Ne.offsetWidth-10);Ne.style.top=e+"px";Ne.style.left=d+"px"}};function We(a,b,c){Array.isArray(c)&&(c=c.join(" "));a.setAttribute("aria-"+b,c)};function Xe(a,b){this.l=a;this.type=b}g=Xe.prototype;g.K=null;g.disposed=!1;g.Ee=null;g.ui=null;g.x=0;g.y=0;
g.oh=function(a){var b=this.A(),c=a.A();a.isConnected()&&a.disconnect();if(this.isConnected()){var d=this.Ne(!0);this.ui=null;var e=this.G();if(e.S)e.dispose(!1);else{this.disconnect();var f=e}this.ui=d}var h;C==0&&(h=new (G("move"))(c));if(!this||!a)throw Error("Cannot connect null connections.");this.K=a;a.K=this;c.si(b);h&&(Kd(h),D(h));f&&(a=this.type===1?f.u:f.D,(c=Ye(c,a))?a.connect(c):a.tk(this))};
g.dispose=function(){if(this.isConnected()){this.xg(null);var a=this.G();a&&Md(a)}this.disposed=!0};g.A=function(){return this.l};function Ze(a){return a.type==1||a.type==3}g.isConnected=function(){return!!this.K};g.tk=function(){};g.connect=function(a){if(this.K!=a&&$e(this,a,!1)==0){var b=Wc;b||F(!0);Ze(this)?this.oh(a):a.oh(this);b||F(!1)}};function af(a,b){var c=null;b=b.u;for(var d=0,e;e=a.v[d];d++)if((e=e.connection)&&$e(b,e,!1)==0){if(c)return null;c=e}return c}
function Ye(a,b){if(b.type===2){a:{b=b.A();for(var c;c=af(a,b);)if(a=c.G(),!a||a.S){b=c;break a}b=null}return b}return(a=a.Th(!0))&&$e(b,a,!1)==0?a:null}g.disconnect=function(){var a=this.K;if(!a)throw Error("Source connection not connected.");if(a.K!=this)throw Error("Target connection not connected to source connection.");if(Ze(this)){var b=this.l;var c=a.A();a=this}else b=a.A(),c=this.l;var d=Wc;d||F(!0);this.jj(b,c);c.S||a.tg();d||F(!1)};
g.jj=function(a,b){var c;C==0&&(c=new (G("move"))(b));this.K=this.K.K=null;b.si(null);c&&(Kd(c),D(c))};g.tg=function(){var a=this.A(),b=this.Ne();if(a.j&&b)if(a=rd(b,a.j),a.u)this.connect(a.u);else if(a.D)this.connect(a.D);else throw Error("Child block does not have output or previous statement.");};g.G=function(){return this.isConnected()?this.K.A():null};g.cn=function(){!this.isConnected()||this.K&&$e(this,this.K,!1)==0||Md(Ze(this)?this.G():this.l)};
g.cf=function(a){a?(Array.isArray(a)||(a=[a]),this.Ee=a,this.cn()):this.Ee=null};g.xg=function(a){this.ui=a;a=this.G();a?a.S&&(a.dispose(!1),this.tg()):this.tg()};g.Ne=function(a){return a&&this.G().S?ld(this.G()):this.ui};g.Tm=function(){return[]};g.rc=function(){for(var a=null,b=this.l.v,c=0;c<b.length;c++)if(b[c].connection===this){a=b[c];break}return a};function $e(a,b,c,d){if(a&&b){if(Ze(a)){var e=a.A();var f=b.A()}else f=a.A(),e=b.A();e=e==f?1:b.type!=oa[a.type]?2:e.j!==f.j?5:e.S&&!f.S?6:0}else e=3;if(e!=0)a=e;else{a:if(e=a.Ee,f=b.Ee,e&&f){for(var h=0;h<e.length;h++)if(f.indexOf(e[h])!=-1){e=!0;break a}e=!1}else e=!0;a=e?c&&!bf(a,b,d||0)?7:0:4}return a}
function bf(a,b,c){if(cf(a,b)>c||b.A().yb())return!1;switch(b.type){case 4:return a.K||df.indexOf(b)!=-1?a=!1:b.K?(a=b.G(),a=a.yb()?!(a.D&&a.D.G()):!1):a=!0,a;case 2:if(b.isConnected()&&!b.G().yb()||a.isConnected())return!1;break;case 1:if(b.isConnected()&&!b.G().Qa()&&!b.G().S)return!1;break;case 3:if(b.isConnected()&&!a.A().B&&!b.G().S&&b.G().B)return!1;break;default:return!1}return df.indexOf(b)!=-1?!1:!0}B(Kc,"default",function(){});function ef(a){this.Z=Object.create(null);this.j=a}g=ef.prototype;g.clear=function(){this.Z=Object.create(null)};g.af=function(a,b){var c=this.Oe(a);if(!c)throw Error("Tried to rename a variable that didn't exist. ID: "+a);var d=this.Gh(b,c.type);a=ff(this.j);F(!0);try{if(d&&d.Pa()!=c.Pa()){var e=c.type;b!=d.name&&gf(d,b,a);for(b=0;b<a.length;b++){var f,h=a[b];for(d=0;f=h.v[d];d++)for(var k=0;f.$[k];k++);}D(new (G("var_delete"))(c));this.Z[e].splice(this.Hh(e).indexOf(c),1)}else gf(c,b,a)}finally{F(!1)}};
function gf(a,b,c){D(new (G("var_rename"))(a,b));a.name=b;for(a=0;a<c.length;a++)for(var d=c[a],e=0;b=d.v[e];e++)for(var f=0;b.$[f];f++);}g.Wc=function(a,b,c){var d=this.Gh(a,b);if(d){if(c&&d.Pa()!=c)throw Error('Variable "'+a+'" is already in use and its id is "'+d.Pa()+'" which conflicts with the passed in id, "'+c+'".');return d}if(c&&this.Oe(c))throw Error('Variable id, "'+c+'", is already in use.');b=b||"";d=new hf(this.j,a,b,c||gb());a=this.Z[b]||[];a.push(d);delete this.Z[b];this.Z[b]=a;return d};
g.Je=function(a){var b=this.Oe(a);if(b){var c=b.name,d=this.Fj(a);a=0;for(var e;e=d[a];a++)if(e.type=="procedures_defnoreturn"||e.type=="procedures_defreturn"){a=jf(e,"NAME");c=q.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",c).replace("%2",a);kf(c);return}var f=this;d.length>1?(c=q.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length)).replace("%2",c),lf(c,function(h){h&&b&&mf(f,b,d)})):mf(f,b,d)}else console.warn("Can't delete non-existent variable: "+a)};
function mf(a,b,c){var d=Wc;d||F(!0);try{for(var e=0;e<c.length;e++)c[e].dispose(!0);var f=a.Z[b.type];a=0;for(var h;h=f[a];a++)if(h.Pa()==b.Pa()){f.splice(a,1);D(new (G("var_delete"))(b));break}}finally{d||F(!1)}}g.Gh=function(a,b){if(b=this.Z[b||""])for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a.toLowerCase())return d;return null};g.Oe=function(a){for(var b=Object.keys(this.Z),c=0;c<b.length;c++)for(var d=b[c],e=0,f;f=this.Z[d][e];e++)if(f.Pa()==a)return f;return null};
g.Hh=function(a){return(a=this.Z[a||""])?a.slice():[]};g.Le=function(){var a=[],b;for(b in this.Z)a=a.concat(this.Z[b]);return a};g.Fj=function(a){for(var b=[],c=ff(this.j),d=0;d<c.length;d++){var e=Cd(c[d]);if(e)for(var f=0;f<e.length;f++)e[f].Pa()==a&&b.push(c[d])}return b};function sd(a){this.id=gb();bd[this.id]=this;this.options=a||new he({});this.o=!!this.options.o;this.Cb=this.options.Cb;new (Vc(Kc,this.options,!0))(this);this.Hg=[];this.Ci=[];Object.create(null);this.Ea=[];this.le=[];this.rg=[];this.Ui=Object.create(null);this.Pc=Object.create(null);this.Z=new ef(this);this.ki=null}g=sd.prototype;g.J=!1;g.Qj=!1;g.xl=1024;g.qh=null;g.dispose=function(){this.Ea.length=0;this.clear();delete bd[this.id]};
g.zc=function(a,b){a=a.ba();b=b.ba();return a.y+sd.prototype.zc.offset*a.x-(b.y+sd.prototype.zc.offset*b.x)};g.gh=function(a){this.Hg.push(a)};g.ni=function(a){if(!kb(this.Hg,a))throw Error("Block not present in workspace's list of top-most blocks.");};g.ra=function(a){var b=[].concat(this.Hg);a&&b.length>1&&(this.zc.offset=Math.sin(3*Math.PI/180),this.o&&(this.zc.offset*=-1),b.sort(this.zc));return b};function nf(a,b){return a.Pc[b]?a.Pc[b].slice(0):[]}
function ff(a){var b=a.ra(!1);for(a=0;a<b.length;a++)b.push.apply(b,kd(b[a],!1));return b.filter(function(c){return!c.yb()})}g.clear=function(){this.Qj=!0;try{var a=Wc;for(a||F(!0);this.Hg.length;)this.Hg[0].dispose(!1);for(;this.Ci.length;)this.Ci[this.Ci.length-1].dispose(!1);a||F(!1);this.Z.clear();this.ki&&this.ki.clear()}finally{this.Qj=!1}};g.af=function(a,b){this.Z.af(a,b)};g.Wc=function(a,b,c){return this.Z.Wc(a,b,c)};g.Fj=function(a){return this.Z.Fj(a)};g.Je=function(a){this.Z.Je(a)};
g.Gh=function(a,b){return this.Z.Gh(a,b)};g.Oe=function(a){return this.Z.Oe(a)};g.Hh=function(a){return this.Z.Hh(a)};g.Le=function(){return this.Z.Le()};g.Wf=function(){return 0};g.ik=function(a,b){return new of(this,a,b)};function pf(a){return isNaN(a.options.fk)?Infinity:a.options.fk-ff(a).length}function qf(a,b){if(!rf(a))return!0;var c=0,d;for(d in b){if(b[d]>(a.options.Yh?(a.options.Yh[d]!==void 0?a.options.Yh[d]:Infinity)-nf(a,d).length:Infinity))return!1;c+=b[d]}return c>pf(a)?!1:!0}
function rf(a){return a.options.fk!=Infinity||!!a.options.Yh}function sf(a,b){var c=b?a.rg:a.le;a=b?a.le:a.rg;var d=c.pop();if(d){for(var e=[d];c.length&&d.group&&d.group==c[c.length-1].group;)e.push(c.pop());for(c=0;d=e[c];c++)a.push(d);e=ad(e,b);Xc=!1;try{for(c=0;d=e[c];c++)d.run(b)}finally{Xc=!0}}}function tf(a,b){a.Ea.push(b)}g.Ib=function(a){return this.Ui[a]||null};g.Xk=function(a){this.Z=a};var bd=Object.create(null);function uf(){var a=[],b;for(b in bd)a.push(bd[b]);return a};function vf(a){this.Gf=a;this.va()}g=vf.prototype;g.aa=null;g.Gf=null;g.va=function(){this.aa||(this.aa=z(ac,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklyWsDragSurface blocklyOverflowVisible"},null),this.Gf.appendChild(this.aa))};g.lf=function(a,b){a=a.toFixed(0);b=b.toFixed(0);this.aa.style.display="block";lc(this.aa,"translate3d("+a+"px, "+b+"px, 0px)")};g.Dj=function(){return Xa(this.aa)};
g.mh=function(a){if(!a)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var b=this.aa.childNodes[0],c=this.aa.childNodes[1];if(!(b&&c&&ic(b,"blocklyBlockCanvas")&&ic(c,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");this.Fk!=null?kc(b,this.Fk):a.insertBefore(b,a.firstChild);kc(c,b);this.aa.style.display="none";if(this.aa.childNodes.length)throw Error("Drag surface was not cleared.");lc(this.aa,"");this.Fk=null};function wf(a,b,c){if(!b)throw Error("Cannot create a node without a location.");this.Kg=a;this.N=b;this.Mn=null;(a=c||null)&&a.Ln&&(this.Mn=a.Ln)}var xf=!1;function yf(a){return a?new wf("field",a):null}function zf(a){if(!a)return null;var b=a.type;return b==1||b==3&&a.rc()?Af(a.rc()):b==3?new wf("next",a):b==2?new wf("output",a):b==4?new wf("previous",a):null}function Af(a){return a&&a.connection?new wf("input",a.connection):null}function Bf(a){return a?new wf("block",a):null}
function Cf(a){return a?new wf("stack",a):null}g=wf.prototype;g.getType=function(){return this.Kg};function Df(a,b){a=a.N;a instanceof of||(a=a.A());if(!a||!a.j)return null;var c=a.ac();a=c.j.ra(!0);for(var d=0,e;e=a[d];d++)if(c.id==e.id)return b=d+(b?1:-1),b==-1||b==a.length?null:Cf(a[b]);throw Error("Couldn't find "+(b?"next":"previous")+" stack?!");}function Ef(a){if(!a)return null;do var b=a.D&&a.D.G();while(b&&nb(b)==a&&(a=b));return(b=a.D||a.u)&&b.K&&b.K.rc()?Af(b.K.rc()):Cf(a)}
g.A=function(){return this.getType()==="block"?this.N:this.getType()==="stack"?this.N:this.getType()==="workspace"?null:this.N.A()};
g.next=function(){switch(this.Kg){case "stack":return Df(this,!0);case "output":var a=this.N;return Bf(a.A());case "field":a:{var b=this.N,c=b.rc();a=b.A();b=c.$.indexOf(b)+1;c=a.v.indexOf(c);for(var d;d=a.v[c];c++){for(var e=d.$;b<e.length;){if(Ff(e[b])||xf){a=yf(e[b]);break a}b++}b=0;if(d.connection){a=Af(d);break a}}a=null}return a;case "input":a:{b=this.N.rc();a=b.A();for(b=a.v.indexOf(b)+1;c=a.v[b];b++){d=c.$;e=0;for(var f;f=d[e];e++)if(Ff(f)||xf){a=yf(f);break a}if(c.connection){a=Af(c);break a}}a=
null}return a;case "block":return zf(this.N.B);case "previous":return a=this.N,Bf(a.A());case "next":return a=this.N,zf(a.K)}return null};g.Zc=function(){switch(this.Kg){case "workspace":var a=this.N.ra(!0);if(a.length>0)return Cf(a[0]);break;case "stack":a=this.N;var b=a.D||a.u;return b?zf(b):Bf(a);case "block":a=this.N;a:{a=a.v;b=0;for(var c;c=a[b];b++){for(var d=c.$,e=0,f;f=d[e];e++)if(Ff(f)||xf){a=yf(f);break a}if(c.connection){a=Af(c);break a}}a=null}return a;case "input":return zf(this.N.K)}return null};
g.md=function(){switch(this.Kg){case "stack":return Df(this,!1);case "field":a:{var a=this.N;var b=a.rc();var c=a.A();a=b.$.indexOf(a)-1;for(var d=c.v.indexOf(b),e;e=c.v[d];d--){if(e.connection&&e!==b){b=Af(e);break a}for(e=e.$;a>-1;){if(Ff(e[a])||xf){b=yf(e[a]);break a}a--}d-1>=0&&(a=c.v[d-1].$.length-1)}b=null}return b;case "input":a:{b=this.N.rc();c=b.A();for(a=c.v.indexOf(b);d=c.v[a];a--){if(d.connection&&d!==b){b=Af(d);break a}d=d.$;e=d.length-1;for(var f;f=d[e];e--)if(Ff(f)||xf){b=yf(f);break a}}b=
null}return b;case "block":return b=this.N,zf(b.D||b.u);case "previous":b=this.N;if((b=b.K)&&!b.rc())return zf(b);break;case "next":return b=this.N,Bf(b.A())}return null};
g.jd=function(){switch(this.Kg){case "stack":var a=this.N,b=a.ba();a=a.j;return(b=new r(b.x,b.y+-20),a)?new wf("workspace",a,{Ln:b}):null;case "output":return b=this.N,(a=b.K)?zf(a):Cf(b.A());case "field":return Bf(this.N.A());case "input":return b=this.N,Bf(b.A());case "block":return a=this.N,Ef(a);case "previous":return b=this.N,Ef(b.A());case "next":return b=this.N,Ef(b.A())}return null};var Gf=Object.create(null);var Hf=Object.create(null);function If(a,b){if(typeof a!="string"||a.trim()=="")throw Error('Error: Invalid extension name "'+a+'"');if(Hf[a])throw Error('Error: Extension "'+a+'" is already registered.');if(typeof b!="function")throw Error('Error: Extension "'+a+'" must be a function');Hf[a]=b}
function Jf(a,b,c){var d=Hf[a];if(typeof d!="function")throw Error('Error: Extension "'+a+'" not found.');if(c){if(Kf(b).length)throw Error('Error: tried to apply mutation "'+a+'" to a block that already has mutator functions.  Block id: '+b.id);}else var e=Kf(b);d.apply(b);if(c){a='Error after applying mutator "'+a+'": ';if(typeof b.Ed!="function")throw Error(a+'Applying a mutator didn\'t add "domToMutation"');if(typeof b.ed!="function")throw Error(a+'Applying a mutator didn\'t add "mutationToDom"');
c=b.bj!==void 0;d=b.fj!==void 0;if(c&&d){if(typeof b.bj!="function")throw Error(a+"compose must be a function.");if(typeof b.fj!="function")throw Error(a+"decompose must be a function.");}else if(c||d)throw Error(a+'Must have both or neither of "compose" and "decompose"');}else{a:if(c=e,b=Kf(b),b.length!=c.length)b=!1;else{for(d=0;d<b.length;d++)if(c[d]!=b[d]){b=!1;break a}b=!0}if(!b)throw Error('Error when applying extension "'+a+'": mutation properties changed when applying a non-mutator extension.');
}}function Kf(a){var b=[];a.Ed!==void 0&&b.push(a.Ed);a.ed!==void 0&&b.push(a.ed);a.bj!==void 0&&b.push(a.bj);a.fj!==void 0&&b.push(a.fj);return b}If("parent_tooltip_when_inline",function(){this.Xp=this.Qb;this.zg(function(){var a=this.getParent();return a&&Lf(a)&&a.Qb||this.Xp}.bind(this))});function Mf(a){var b=Uc(Nc,a.type);return b?b.L(a):(console.warn("Blockly could not create a field of type "+a.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)};var Nf=0,Of=null;function Pf(a,b,c,d){var e=(new Date-c)/150;e>1?jc(a):(a.setAttribute("transform","translate("+(a.Zp+(b?-1:1)*a.Ql.width*d/2*e)+","+(a.$p+a.Ql.height*d*e)+") scale("+(1-e)*d+")"),setTimeout(Pf,10,a,b,c,d))}function Qf(a,b,c){var d=(new Date-b)/150;d>1?jc(a):(a.setAttribute("r",d*25*c),a.style.opacity=1-d,Nf=setTimeout(Qf,10,a,b,c))}
function Rf(a,b,c){var d=(new Date-c)/200;d>1?a.Bg="":(a.Bg="skewX("+Math.round(Math.sin(d*Math.PI*3)*(1-d)*b)+")",Of=a,Nf=setTimeout(Rf,10,a,b,c));a.setAttribute("transform",a.Jg+a.Bg)}function Sf(){if(Of){clearTimeout(Nf);var a=Of;a.Bg="";a.setAttribute("transform",a.Jg);Of=null}};function Tf(a,b,c){Tf.i.constructor.call(this,a?a.j.id:void 0);this.ga=a?a.id:null;this.Im=b;this.Sl=c}H(Tf,Od);Tf.prototype.type="drag";Tf.prototype.P=function(){var a=Tf.i.P.call(this);a.isStart=this.Im;a.blockId=this.ga;a.blocks=this.Sl;return a};Tf.prototype.L=function(a){Tf.i.L.call(this,a);this.Im=a.isStart;this.ga=a.blockId;this.Sl=a.blocks};B(Mc,"drag",Tf);function Uf(a){this.vd=L=a;this.g=a.j;this.bd=this.Tj=null;this.Qf=Vf(this,this.vd);this.Ra=this.ta=null;this.jc=!1;this.Pf=this.Kj=this.Ud=null;this.ih=Wf(this)}Uf.prototype.dispose=function(){this.ih.length=0;C++;try{this.Qf&&this.Qf.dispose(),this.bd&&this.bd.dispose()}finally{C--}};
Uf.prototype.update=function(a,b){var c=this.ta&&this.Ra?na:ma;for(var d=null,e=null,f=0;f<this.ih.length;f++){var h=this.ih[f],k=h.closest(c,a);k.connection&&(d=k.connection,e=h,c=k.li)}c={closest:d,local:e,li:c};if((this.jc=this.Yk(c,b))||Xf(this,c,a)){C++;c.closest?(a=this.ta!=c.closest,b=this.Ra!=c.local,this.ta&&this.Ra&&(a||b||this.jc)&&Yf(this)):Yf(this);this.Ra=this.ta=this.Ud=null;if(!this.jc&&(a=c.closest,b=c.local,a))if(a==this.ta||a.A().yb())console.log("Trying to connect to an insertion marker");
else{this.ta=a;this.Ra=b;a=this.ta;b=this.Ra;c=this.vd;b.type==2||b.type==4?((d=!a.isConnected())||(d=a.G(),d=!!Ye(c,b.type===2?d.u:d.D)),b=d?0:2):b=0;switch(b){case 1:this.Kj=this.ta.A();break;case 0:d=this.Ra;b=this.ta;c=this.Tj&&d==this.Tj?this.bd:this.Qf;d=c.Cj(d.A(),d);if(d==this.Ud)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");c.V();c.J=!0;c.I().setAttribute("visibility","visible");d&&b&&(d.type!=3&&d.type!=1||c.moveBy(b.x-d.x,b.y-d.y));b&&d.connect(b);
this.Ud=d;break;case 2:this.Pf=this.ta.G(),Zf(this.Pf.sa,"blocklyReplaceable",!0)}a&&(c=a.l.j.pa.C(),b=$f(c,a),a.type==1||a.type==2?(c=c.xe,b=M(0,-c)+N("v",c)+b.Mb+N("v",c)):(c=c.uf-c.ma,b=M(-c,0)+N("h",c)+b.ld+N("h",c)),c=a.l.ba(),Xe.Bm=z(Yb,{"class":"blocklyHighlightedConnectionPath",d:b,transform:"translate("+(a.x-c.x)+","+(a.y-c.y)+")"+(a.l.o?" scale(-1 1)":"")},a.l.I()))}C--}};
function Vf(a,b){var c=b.type;C++;try{var d=a.g.ik(c);d.un(!0);if(b.ed){var e=b.ed();e&&d.Ed(e)}for(a=0;a<b.v.length;a++){var f=b.v[a];if(f.name!="_TEMP_COLLAPSED_INPUT"){var h=d.v[a];if(!h)throw Error("The insertion marker manager tried to create a marker but the result is missing an input. If you are using a mutator, make sure your domToMutation method is properly defined.");for(c=0;c<f.$.length;c++){var k=f.$[c],l=h.$[c];if(!l)throw Error("The insertion marker manager tried to create a marker but the result is missing a field. If you are using a mutator, make sure your domToMutation method is properly defined.");
Fd(l,k.pb)}}}d.ce(b.isCollapsed());d.ge(Lf(b));d.Zf();d.I().setAttribute("visibility","hidden")}finally{C--}return d}function Wf(a){var b=a.vd.Zb(!1),c=a.vd.Th(!0);if(c&&c!=a.vd.B){b.push(c);a.Tj=c;if(a.bd){C++;try{a.bd.dispose()}finally{C--}}a.bd=Vf(a,c.A())}return b}
function Xf(a,b,c){var d=b.local,e=b.closest;b=b.li;if(d&&e){if(a.Ra&&a.ta){if(a.ta==e&&a.Ra==d)return!1;d=a.Ra.x+c.x-a.ta.x;a=a.Ra.y+c.y-a.ta.y;a=Math.sqrt(d*d+a*a);return!(e&&b>a-8)}if(a.Ra||a.ta)console.error("Only one of localConnection_ and closestConnection_ was set.");else return!0}else return!(!a.Ra||!a.ta);console.error("Returning true from shouldUpdatePreviews, but it's not clear why.");return!0}Uf.prototype.Yk=function(a,b){return b&&Fb(this.g.Ec,b.id)?ag(b,this.vd,a&&!!a.closest):!1};
function Yf(a){a.ta&&a.ta.G()&&(jc(Xe.Bm),delete Xe.Bm);if(a.Pf)Zf(a.Pf.sa,"blocklyReplaceable",!1),a.Pf=null;else if(a.Kj)a.Kj=null;else if(a.Ud)if(a.Ud){var b=a.Ud,c=b.A(),d=c.B,e=c.D,f=c.u;f=b.type==1&&!(f&&f.K);!(b!=d||e&&e.K)||f?Md(b.G(),!1):b.type==3&&b!=d?(d=b.K,Md(d.A(),!1),e=e?e.K:null,Md(c,!0),e&&e.connect(d)):Md(c,!0);if(b.K)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");a.Ud=null;(a=c.I())&&a.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")}
Uf.prototype.Me=function(){var a=[];this.Qf&&a.push(this.Qf);this.bd&&a.push(this.bd);return a};function bg(a,b){this.ka=a;this.g=b;this.qc=new Uf(this.ka);this.Ja=null;this.jc=!1;this.rd=this.ka.ba();b=[];a=mb(a,!1);for(var c=0,d;d=a[c];c++){d=cg(d);for(var e=0;e<d.length;e++){var f={location:d[e].Tq(),icon:d[e]};b.push(f)}}this.Bh=b}g=bg.prototype;g.dispose=function(){this.Bh.length=0;this.qc&&this.qc.dispose()};
g.yi=function(a,b){Wc||F(!0);var c=new (G("drag"))(this.ka,!0,mb(this.ka,!1));D(c);this.g.Rh&&dg(this.ka);mc();this.g.Ua(!1);Sf();if(this.ka.getParent()||b&&this.ka.B&&this.ka.B.G())Md(this.ka,b),a=this.$e(a),a=xa(this.rd,a),this.ka.translate(a.x,a.y),a=this.ka,a.j.jb.play("disconnect"),a.j.scale<1||(b=eg(a).height,b=Math.atan(10/b)/Math.PI*180,a.o||(b*=-1),Rf(a.I(),b,new Date)),a=this.qc,a.ih=Wf(a);this.ka.fe(!0);a=this.ka;a.Ng&&(b=a.ba(),a.I().removeAttribute("transform"),a.j.qb.lf(b.x,b.y),(b=
a.I())&&Vd(a.j.qb,b))};g.Gc=function(a,b){b=this.$e(b);fg(this.ka,xa(this.rd,b));for(var c=0;c<this.Bh.length;c++){var d=this.Bh[c];d.icon.cr(xa(d.location,b))}c=this.Ja;this.Ja=gg(this.g,a);this.qc.update(b,this.Ja);a=this.jc;this.jc=this.qc.jc;a!=this.jc&&Zf(this.ka.sa,"blocklyDraggingDelete",this.jc);this.Ja!==c&&c&&c.pk();this.Ja&&this.Ja.qk()};
g.Nf=function(a,b){this.Gc(a,b);this.Bh=[];a=new (G("drag"))(this.ka,!1,mb(this.ka,!1));D(a);nc();Sf();b=this.$e(b);a=xa(this.rd,b);var c=this.ka;c.Ng&&(c.translate(a.x,a.y),c.j.qb.mh(c.j.xa));this.Ja&&this.Ja.rk();this.jc?(hg(this),this.ka.dispose(!1,!0),df=[],a=!0):a=!1;if(!a)if(this.ka.fe(!1),b){ig(this.ka,b.x,b.y);hg(this);if(this.qc.ta){if(b=this.qc,b.ta&&(C++,Yf(b),C--,b.Ra.connect(b.ta),b.vd.J)){c=(Ze(b.Ra)?b.ta:b.Ra).A();var d=c.j;a=d.scale;d.jb.play("click");if(!(a<1)){var e=jg(d,c.I());
c.u?(e.x+=(c.o?3:-3)*a,e.y+=13*a):c.D&&(e.x+=(c.o?-23:23)*a,e.y+=3*a);c=z(Nb,{cx:e.x,cy:e.y,r:0,fill:"none",stroke:"#888","stroke-width":10},K(d));Qf(c,new Date,a)}dg(b.vd.ac())}}else this.ka.V();kg(this.ka)}else lg(this.ka.j,this.g.zb.Id(!0),this.ka);this.g.Ua(!0);F(!1)};function hg(a){var b=new (G("move"))(a.ka);b.lk=a.rd;Kd(b);D(b)}g.$e=function(a){a=new r(a.x/this.g.scale,a.y/this.g.scale);this.g.Rh&&a.scale(1/this.g.options.ob.scale);return a};
g.Me=function(){return this.qc&&this.qc.Me?this.qc.Me():[]};B(Tc,"default",bg);function mg(a,b){this.kb=a;this.g=b;this.Ja=null;this.Og=!1;this.rd=this.kb.ba();this.Fd=ib()&&b.qb?b.qb:null}mg.prototype.dispose=function(){this.Fd=this.g=this.kb=null};function ng(a,b,c){a.$e(c);fg(a.kb,a.Fd);c=a.Ja;a.Ja=gg(a.g,b);b=a.Og;a.Og=a.Yk(a.Ja);b!=a.Og&&Zf(a.kb.sa,"blocklyDraggingDelete",a.Og);a.Ja!==c&&c&&c.pk();a.Ja&&a.Ja.qk()}mg.prototype.Yk=function(a){return a&&Fb(this.g.Ec,a.id)?ag(a,this.kb,!1):!1};
function og(a,b,c){ng(a,b,c);b=a.$e(c);b=xa(a.rd,b);a.kb.moveTo(b.x,b.y);a.Ja&&a.Ja.rk();a.Og?a.kb.dispose(!1,!0):(a.Fd&&a.Fd.mh(a.g.td),a.kb.fe&&a.kb.fe(!1));a.g.Ua(!0);F(!1)}mg.prototype.$e=function(a){a=new r(a.x/this.g.scale,a.y/this.g.scale);this.g.Rh&&a.scale(1/this.g.options.ob.scale);return a};function pg(a,b,c){pg.i.constructor.call(this,a?a.j.id:b);this.ga=a?a.id:null;this.zn=c}H(pg,Od);pg.prototype.type="click";pg.prototype.P=function(){var a=pg.i.P.call(this);a.targetType=this.zn;this.ga&&(a.blockId=this.ga);return a};pg.prototype.L=function(a){pg.i.L.call(this,a);this.zn=a.targetType;this.ga=a.blockId};B(Mc,"click",pg);function qg(a){this.g=a;this.Cm=rg(this.g);this.In=sg(this.g);this.Tp=new r(a.scrollX,a.scrollY)}qg.prototype.dispose=function(){this.g=null};qg.prototype.yi=function(){L&&tg(L);Ce(this.g)};qg.prototype.Nf=function(a){this.Gc(a);De(this.g)};qg.prototype.Gc=function(a){a=xa(this.Tp,a);if(this.Cm&&this.In)this.g.scroll(a.x,a.y);else if(this.Cm)this.g.scroll(a.x,this.g.scrollY);else if(this.In)this.g.scroll(this.g.scrollX,a.y);else throw new TypeError("Invalid state.");};function ug(a,b){this.Rm=null;this.ab=new r(0,0);this.za=this.Ma=this.gf=this.hf=this.fc=null;this.ej=b;this.ag=this.Qd=this.cg=this.Jd=!1;this.dc=a;this.M=this.pe=this.lc=this.Qc=this.ei=this.di=null;this.ym=this.Nh=this.Se=this.Tl=!1}g=ug.prototype;g.dispose=function(){qb=null;Ge=!1;this.ej.Oa=null;this.di&&v(this.di);this.ei&&v(this.ei);this.lc&&this.lc.dispose();this.pe&&this.pe.dispose();this.Qc&&this.Qc.dispose()};
function vg(a,b){a.ab=wa(new r(b.clientX,b.clientY),a.Rm);if(a.Jd)var c=!1;else c=a.ab,a.Jd=Math.sqrt(c.x*c.x+c.y*c.y)>(a.M?10:5),c=a.Jd;if(c){if(a.Tl)throw Error("updateIsDragging_ should only be called once per gesture.");a.Tl=!0;a.fc?(a.ag=!0,a.Qc=new mg(a.fc,a.za),c=a.Qc,Wc||F(!0),c.g.Ua(!1),c.kb.$q(!1),c.Fd&&(c.kb.moveTo(0,0),c.Fd.lf(c.rd.x,c.rd.y),Vd(c.Fd,c.kb.I())),c.kb.fe&&c.kb.fe(!0),ng(a.Qc,a.dc,a.ab),c=!0):c=!1;if(!c){if(a.Ma){if(a.M){if(a.Ma&&a.Ma.isEnabled()){if(!(c=!wg(a.M))){c=a.ab;
c=Math.atan2(c.y,c.x)/Math.PI*180;var d=a.M.Yo;c=c<d&&c>-d||c<-180+d||c>180-d?!0:!1}c?(a.za=a.M.O,xg(a.za),Wc||F(!0),a.gf=null,a.Ma=yg(a.M,a.Ma),a.Ma.select(),c=!0):c=!1}else c=!1;a.Qd=c}else a.Ma.Qa()&&(a.Qd=!0);a.Qd?(a.lc=new (Vc(Tc,a.ej.options,!0))(a.Ma,a.za),a.lc.yi(a.ab,a.ym),a.lc.Gc(a.dc,a.ab),c=!0):c=!1}else c=!1;if(c=!c)if(a.M)c=wg(a.M);else if(c=a.za)c=a.za,c=c.options.Sa&&c.options.Sa.Gc;c&&(a.pe=new qg(a.za),a.cg=!0,a.pe.yi())}ub()}a.dc=b}
g.kj=function(a){Wa(a)?this.cancel():(this.Se=!0,Sf(),xg(this.za),this.za.Rh&&this.za.resize(),Ee(!!this.M),Gc(this.za),this.dc=a,Ue(),Ge=!0,this.Ma&&this.Ma.select(),ab(a)?vb(this,a):(a.type.toLowerCase()!="touchstart"&&a.type.toLowerCase()!="pointerdown"||a.pointerType=="mouse"||tb(a,this),this.Rm=new r(a.clientX,a.clientY),this.ym=a.altKey||a.ctrlKey||a.metaKey,this.Rl(a)))};
g.Rl=function(a){this.di=t(document,"mousemove",null,this.Qe.bind(this));this.ei=t(document,"mouseup",null,this.Ih.bind(this));a.preventDefault();a.stopPropagation()};g.Qe=function(a){vg(this,a);this.cg?this.pe.Gc(this.ab):this.Qd?this.lc.Gc(this.dc,this.ab):this.ag&&ng(this.Qc,this.dc,this.ab);a.preventDefault();a.stopPropagation()};
g.Ih=function(a){vg(this,a);ub();if(this.Nh)console.log("Trying to end a gesture recursively.");else{this.Nh=!0;if(this.ag)og(this.Qc,a,this.ab);else if(this.Qd)this.lc.Nf(a,this.ab);else if(this.cg)this.pe.Nf(this.ab);else if(this.fc&&!this.Jd)this.fc.Np&&this.fc.Np(),this.fc.select&&this.fc.select();else if(zg(this)){var b=this.hf,c=this.dc;Ff(b)&&b.xi(c);Ag(this)}else!this.gf||this.Jd||zg(this)?this.gf||this.fc||this.hf||this.Jd||(b=this.ej,L&&tg(L),b=this.za||b,D(new (G("click"))(null,b.id,"workspace"))):
(this.M&&this.M.Ad?this.Ma.isEnabled()&&(Wc||F(!0),kg(yg(this.M,this.Ma))):(b=new (G("click"))(this.gf,this.za.id,"block"),D(b)),Ag(this),F(!1));a.preventDefault();a.stopPropagation();this.dispose()}};g.cancel=function(){this.Nh||(ub(),this.ag?og(this.Qc,this.dc,this.ab):this.Qd?this.lc.Nf(this.dc,this.ab):this.cg&&this.pe.Nf(this.ab),this.dispose())};
function vb(a,b){a.Ma?(Ag(a),Ee(!!a.M),a.Ma.wi(b)):a.fc?a.fc.wi(b):a.za&&!a.M&&(Ee(),a.za.wi(b));b.preventDefault();b.stopPropagation();a.dispose()}function Bg(a,b,c){if(a.Se)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");a.za||(a.za=c);a.dc=b;a.kj(b)}function Cg(a,b,c){if(a.Se)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");a.M||(a.M=c);Bg(a,b,c.g)}function Ag(a){a.Ma&&!a.M&&dg(a.Ma)}
function Dg(a,b){a.gf||a.fc||(a.gf=b,b.xb&&b!=b.ac()?Eg(a,b.ac()):Eg(a,b))}function Eg(a,b){b.S?Eg(a,b.getParent()):a.Ma=b}function zg(a){return(a.hf?Ff(a.hf):!1)&&!a.Jd&&(!a.M||!a.M.Ad)}g.wb=function(){return this.cg||this.Qd||this.ag};g.Me=function(){return this.lc?this.lc.Me():[]};function Fg(){for(var a=uf(),b=0,c;c=a[b];b++)if(c.Oa)return!0;return!1};function Gg(){this.Gb=this.Wb=this.$i=null;this.type="marker"}function Hg(a,b){var c=a.Wb;a.Wb=b;a.Gb&&a.Gb.Xb(c,a.Wb)}Gg.prototype.Xb=function(){this.Gb&&this.Gb.Xb(this.Wb,this.Wb)};Gg.prototype.cb=function(){this.Gb&&this.Gb.cb()};Gg.prototype.dispose=function(){this.Gb&&this.Gb.dispose()};function Ig(){Ig.i.constructor.call(this);this.type="cursor"}H(Ig,Gg);Ig.prototype.next=function(){var a=this.Wb;if(!a)return null;for(a=a.next();a&&a.next()&&(a.getType()=="next"||a.getType()=="block");)a=a.next();a&&Hg(this,a);return a};Ig.prototype.Zc=function(){var a=this.Wb;if(!a)return null;if(a.getType()=="previous"||a.getType()=="output")a=a.next();(a=a.Zc())&&Hg(this,a);return a};
Ig.prototype.md=function(){var a=this.Wb;if(!a)return null;for(a=a.md();a&&a.md()&&(a.getType()=="next"||a.getType()=="block");)a=a.md();a&&Hg(this,a);return a};Ig.prototype.jd=function(){var a=this.Wb;if(!a)return null;(a=a.jd())&&a.getType()=="block"&&(a=a.md()||a);a&&Hg(this,a);return a};B(Lc,"default",Ig);function Jg(a){this.Fc=this.Fb=null;this.gg=Object.create(null);this.g=a}g=Jg.prototype;g.Tf=function(){return this.Fb};g.Vf=function(a){return this.gg[a]||null};g.Nc=function(a){a?(this.g.xa.appendChild(a),this.Fc=a):this.Fc=null};g.qd=function(a){a?this.g.xa&&(this.Fc?this.g.xa.insertBefore(a,this.Fc):this.g.xa.appendChild(a)):this.Lc=null};
g.dispose=function(){for(var a=Object.keys(this.gg),b=0,c;c=a[b];b++){var d=this.gg[c];if(d)d.dispose(),delete this.gg[c];else throw Error("Marker with ID "+c+" does not exist. Can only unregister markers that exist.");}this.gg=null;this.Fb&&(this.Fb.dispose(),this.Fb=null)};var Kg,Lg=null,Mg=null,Ng="",Og="";function Pg(a){var b=O,c=O.dispose;Qg();Lg=b;Mg=c;b=Kg;b.style.direction=a?"rtl":"ltr";b.style.display="block";a=Hc;Ng=a.pa.Yb();Og=a.Hc().Yb();A(b,Ng);A(b,Og)}function Qg(){if(Lg){Lg=null;var a=Kg;a.style.display="none";a.style.left="";a.style.top="";Mg&&Mg();Mg=null;a.textContent="";Ng&&(hc(a,Ng),Ng="");Og&&(hc(a,Og),Og="");Gc(Hc)}}function Rg(a,b,c){Kg.style.left=a+"px";Kg.style.top=b+"px";Kg.style.height=c+"px"};function Sg(a,b,c){this.pb=this.Hi;this.Bn=this.Gn=null;this.Va=new Ga(0,0);this.h=this.hk=this.ke=this.Wa=this.Aa=this.lb=this.Lc=this.Fc=null;c&&this.Cf(c);Fd(this,a);b&&(this.Gn=b)}g=Sg.prototype;g.Hi=null;g.name=void 0;g.disposed=!1;g.Qm=50;g.l=null;g.$c=!0;g.xd=!0;g.Vl=null;g.qf=!0;g.Fl=!1;g.Cf=function(a){var b=a.tooltip;typeof b=="string"&&(b=eb(a.tooltip));b&&this.zg(b)};g.C=function(){!this.h&&this.l&&this.l.j&&this.l.j.J&&(this.h=this.l.j.pa.C());return this.h};g.A=function(){return this.l};
g.init=function(){this.lb||(this.lb=z(Vb,{},null),this.isVisible()||(this.lb.style.display="none"),this.l.I().appendChild(this.lb),this.Kh(),Tg(this),this.zg(this.Bn),Pe(Ug(this)),this.hk=t(Ug(this),"mousedown",this,this.hd))};g.Kh=function(){Vg(this);Wg(this)};function Vg(a){a.Aa=z($b,{rx:a.C().Tg,ry:a.C().Tg,x:0,y:0,height:a.Va.height,width:a.Va.width,"class":"blocklyFieldRect"},a.lb)}
function Wg(a){a.Wa=z(bc,{"class":"blocklyText"},a.lb);a.C().Ii&&a.Wa.setAttribute("dominant-baseline","central");a.ke=document.createTextNode("");a.Wa.appendChild(a.ke)}g.zj=function(a){Fd(this,a.textContent)};g.dispose=function(){uc===this&&Ec();Lg==this&&Qg();Te(Ug(this));this.hk&&v(this.hk);jc(this.lb);this.disposed=!0};
function Tg(a){var b=a.lb;a.qf&&b&&(a.l.Kb()?(A(b,"blocklyEditableText"),hc(b,"blocklyNonEditableText"),b.style.cursor=a.Tn):(A(b,"blocklyNonEditableText"),hc(b,"blocklyEditableText"),b.style.cursor=""))}function Ff(a){return!!a.l&&a.l.Kb()&&!!a.xi&&typeof a.xi==="function"}g.isVisible=function(){return this.xd};g.ya=function(a){if(this.xd!=a){this.xd=a;var b=this.I();b&&(b.style.display=a?"block":"none")}};g.I=function(){return this.lb};g.Ia=function(){};
g.Kk=function(){this.ke&&(this.ke.nodeValue=Xg(this));this.En()};g.En=function(){var a=this.C(),b=this.Aa?this.C().rf:0,c=b*2,d=a.Ug,e=0;this.Wa&&(e=oc(this.Wa,a.tf+"pt",a.re,a.qe),c+=e);this.Aa&&(d=Math.max(d,a.ml));this.Va.height=d;this.Va.width=c;Yg(this,b,e);Zg(this)};function Yg(a,b,c){if(a.Wa){var d=a.C(),e=a.Va.height/2;a.Wa.setAttribute("x",a.l.o?a.Va.width-c-b:b);a.Wa.setAttribute("y",d.Ii?e:e-d.Ug/2+d.rl)}}
function Zg(a){a.Aa&&(a.Aa.setAttribute("width",a.Va.width),a.Aa.setAttribute("height",a.Va.height),a.Aa.setAttribute("rx",a.C().Tg),a.Aa.setAttribute("ry",a.C().Tg))}g.getSize=function(){if(!this.isVisible())return new Ga(0,0);this.$c?(this.Kk(),this.$c=!1):this.xd&&this.Va.width==0&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.Kk());return this.Va};
function Xg(a){var b=$g(a);if(!b)return"\u00a0";b.length>a.Qm&&(b=b.substring(0,a.Qm-2)+"\u2026");b=b.replace(/\s/g,"\u00a0");a.l&&a.l.o&&(b+="\u200f");return b}function $g(a){if(a.Ej){var b=a.Ej.call(a);if(b!==null)return String(b)}return String(a.pb)}g.fg=function(){this.$c=!0;this.h=null};function ah(a){a.$c=!0;a.l&&a.l.J&&(a.l.V(),a.l.rb(),a.hl())}
function Fd(a,b){if(b!==null){var c=a.Ah(b);b=bh(a,b,c);if(!(b instanceof Error)){if(c=a.Gn)if(c=c.call(a,b),b=bh(a,b,c),b instanceof Error)return;c=a.l;if(!c||!c.disposed){var d=a.pb;d===b?a.Lf(b):(c&&C==0&&D(new (G("change"))(c,"field",a.name||null,d,b)),a.Lf(b),a.$c&&ah(a))}}}}function bh(a,b,c){if(c===null)return a.$c&&ah(a),Error();c!==void 0&&(b=c);return b}g.Ah=function(a){return a===null||a===void 0?null:a};g.Lf=function(a){this.pb=a;this.$c=!0};
g.hd=function(a){if(this.l&&this.l.j&&(a=this.l.j.Gd(a))){if(a.Se)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");a.hf||(a.hf=this)}};g.zg=function(a){a||a===""||(a=this.l);var b=Ug(this);b?b.Qb=a:this.Bn=a};function Ug(a){return a.Vl||a.I()}g.rc=function(){for(var a=null,b=this.l,c=b.v,d=0;d<b.v.length;d++)for(var e=c[d],f=e.$,h=0;h<f.length;h++)if(f[h]===this){a=e;break}return a};g.rm=function(){return!1};
g.Nc=function(a){a?(this.lb.appendChild(a),this.Fc=a):this.Fc=null};g.qd=function(a){a?(this.lb.appendChild(a),this.Lc=a):this.Lc=null};g.hl=function(){var a=this.l.j;a.dg&&this.Fc&&a.Tf().Xb();a.dg&&this.Lc&&a.Vf("local_marker_1").Xb()};function ch(a,b,c){this.kh=null;ch.i.constructor.call(this,a,null,c);c||(this.kh=b||null)}H(ch,Sg);ch.prototype.Hi="";ch.L=function(a){var b=eb(a.text);return new ch(b,void 0,a)};ch.prototype.qf=!1;ch.prototype.Cf=function(a){ch.i.Cf.call(this,a);this.kh=a["class"]};ch.prototype.Kh=function(){Wg(this);this.kh&&A(this.Wa,this.kh)};ch.prototype.Ah=function(a){return a===null||a===void 0?null:String(a)};B(Nc,"field_label",ch);function dh(a,b,c,d){if(a!=5&&!b)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=a;this.name=b;this.l=c;this.connection=d;this.$=[]}g=dh.prototype;g.align=-1;g.xd=!0;g.A=function(){return this.l};
function eh(a,b,c,d){if(b<0||b>a.$.length)throw Error("index "+b+" out of bounds.");if(!(c||c==""&&d))return b;typeof c=="string"&&(c=Mf({type:"field_label",text:c}));if(c.l)throw Error("Field already bound to a block.");c.l=a.l;a.l.J&&(c.init(),c.Ia());c.name=d;c.ya(a.isVisible());c.Ek&&(b=eh(a,b,c.Ek));a.$.splice(b,0,c);++b;c.$k&&(b=eh(a,b,c.$k));a.l.J&&(a.l=a.l,a.l.V(),a.l.rb());return b}g.isVisible=function(){return this.xd};
g.ya=function(a){if(this.xd!=a){this.xd=a;for(var b=0,c;c=this.$[b];b++)c.ya(a);if(this.connection){this.connection=this.connection;if(a)fh(this.connection);else if(b=this.connection,gh(b,!1),b.K)for(b=mb(b.G(),!1),c=0;c<b.length;c++){for(var d=b[c],e=d.Zb(!0),f=0;f<e.length;f++)gh(e[f],!1);d=cg(d);for(f=0;f<d.length;f++)d[f].ya(!1)}if(b=this.connection.G())b.I().style.display=a?"block":"none"}}};g.fg=function(){for(var a=0,b;b=this.$[a];a++)b.fg()};
g.cf=function(a){if(!this.connection)throw Error("This input does not have a connection.");this.connection.cf(a)};g.xg=function(a){if(!this.connection)throw Error("This input does not have a connection.");this.connection.xg(a)};g.Ne=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.Ne()};g.init=function(){if(this.l.j.J)for(var a=0;a<this.$.length;a++)this.$[a].init()};
g.dispose=function(){for(var a=0,b;b=this.$[a];a++)b.dispose();this.connection&&this.connection.dispose();this.l=null};function of(a,b,c){if(hh&&typeof hh.prototype[b]!="undefined")throw Error('Block prototypeName "'+b+'" conflicts with Blockly.Generator members.');this.id=c&&!a.Ib(c)?c:gb();a.Ui[this.id]=this;this.D=this.B=this.u=null;this.v=[];this.Ic=void 0;this.disabled=!1;this.Qb="";this.contextMenu=!0;this.yc=null;this.Cc=[];this.jm=this.Sm=this.bm=!0;this.Bd=this.S=!1;this.Vb={text:null,ln:!1,size:new Ga(160,80)};this.Nn=new r(0,0);this.j=a;this.xb=a.ad;this.o=a.o;this.We=!1;this.tc=void 0;this.J=null;if(b){this.type=
b;c=Gf[b];if(!c||typeof c!="object")throw TypeError("Unknown block type: "+b);fd(this,c)}a.gh(this);a.Pc[this.type]||(a.Pc[this.type]=[]);a.Pc[this.type].push(this);(a=Wc)||F(!0);b=Xc;try{typeof this.init=="function"&&(Xc=!1,this.init(),Xc=b),C==0&&D(new (G("create"))(this))}finally{a||F(!1),Xc=b}this.vp=this.Ic;if(typeof this.onchange=="function"){if((a=this.onchange)&&typeof a!="function")throw Error("onchange must be a function.");this.mg&&kb(this.j.Ea,this.mg);if(this.onchange=a)this.mg=a.bind(this),
tf(this.j,this.mg)}}g=of.prototype;g.data=null;g.disposed=!1;g.Eb="#000000";g.Cg="";
g.dispose=function(a){if(this.j){this.mg&&kb(this.j.Ea,this.mg);Md(this,a);C==0&&D(new (G("delete"))(this));C++;try{if(this.j){this.j.ni(this);var b=this.j;b.Pc[this.type].splice(b.Pc[this.type].indexOf(this),1);b.Pc[this.type].length||delete b.Pc[this.type];delete this.j.Ui[this.id];this.j=null}L==this&&(L=null);for(var c=this.Cc.length-1;c>=0;c--)this.Cc[c].dispose(!1);c=0;for(var d;d=this.v[c];c++)d.dispose();this.v.length=0;var e=this.Zb(!0);c=0;for(var f;f=e[c];c++)f.dispose()}finally{C--,this.disposed=
!0}}};function Md(a,b){if(a.u){var c=null;a.u.isConnected()&&(c=a.u.K,a.u.disconnect());if(c&&b){a:{b=null;for(var d=0;d<a.v.length;d++){var e=a.v[d].connection;if(e&&e.type==1&&e.K){if(b){a=null;break a}b=e}}a=b}a&&a.isConnected()&&!a.G().S&&(a=a.K,a.disconnect(),$e(a,c,!1)==0?c.connect(a):a.tk(c))}}else a.D&&(c=null,a.D.isConnected()&&(c=a.D.K,a.D.disconnect()),d=nb(a),b&&d&&!d.S&&(a=a.B.K,a.disconnect(),c&&$e(c,a,!1)==0&&c.connect(a)))}
g.Zb=function(){var a=[];this.u&&a.push(this.u);this.D&&a.push(this.D);this.B&&a.push(this.B);for(var b=0,c;c=this.v[b];b++)c.connection&&a.push(c.connection);return a};g.Th=function(a){for(var b=this.B;b;){var c=b.G();if(!c||a&&c.S)return b;b=c.B}return null};g.rb=function(){};g.getParent=function(){return this.yc};function Ld(a,b){for(var c=0,d;d=a.v[c];c++)if(d.connection&&d.connection.G()==b)return d;return null}
function ih(a){do{var b=a;a=a.getParent();if(!a)return null}while(nb(a)==b);return a}function nb(a){return a.B&&a.B.G()}g.ac=function(){var a=this;do{var b=a;a=b.yc}while(a);return b};function kd(a,b){if(!b)return a.Cc;b=[];for(var c=0,d;d=a.v[c];c++)d.connection&&(d=d.connection.G())&&b.push(d);(a=nb(a))&&b.push(a);return b}
g.si=function(a){if(a!=this.yc){if(this.yc){kb(this.yc.Cc,this);if(this.D&&this.D.isConnected())throw Error("Still connected to previous block.");if(this.u&&this.u.isConnected())throw Error("Still connected to parent block.");this.yc=null}else this.j.ni(this);(this.yc=a)?a.Cc.push(this):this.j.gh(this)}};function mb(a,b){var c=[a];a=kd(a,b);for(var d,e=0;d=a[e];e++)c.push.apply(c,mb(d,b));return c}function nd(a){return a.bm&&!a.S&&!(a.j&&a.j.options.readOnly)}
g.Qa=function(){return this.Sm&&!this.S&&!(this.j&&this.j.options.readOnly)};g.Rk=function(a){this.Sm=a};g.Wk=function(a){this.S=a};g.yb=function(){return this.We};g.un=function(a){this.We=a};g.Kb=function(){return this.jm&&!(this.j&&this.j.options.readOnly)};g.Qk=function(a){this.jm=a;a=0;for(var b;b=this.v[a];a++)for(var c=0,d;d=b.$[c];c++)Tg(d)};
g.Cj=function(a,b){var c=this.Zb(!0);a=a.Zb(!0);if(c.length!=a.length)throw Error("Connection lists did not match in length.");for(var d=0;d<a.length;d++)if(a[d]==b)return c[d];return null};g.zg=function(a){this.Qb=a};g.Bj=function(){return this.Eb};g.pi=function(a){this.Eb=ob(a).Yf};g.ie=function(a){this.Cg=a};
function Ad(a,b){if(typeof b!=="string")throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(b===void 0?"nothing":b+" of type "+typeof b)+" instead");for(var c=0,d;d=a.v[c];c++)for(var e=0,f;f=d.$[e];e++)if(f.name===b)return f;return null}function Cd(a){for(var b=0,c;c=a.v[b];b++)for(var d=0;c.$[d];d++);return[]}function jf(a,b){return(a=Ad(a,b))?a.pb:null}
g.Vk=function(a,b){if(a){b===void 0&&(b=null);if(!this.D){if(this.u)throw Error("Remove output connection prior to adding previous connection.");this.D=this.eg(4)}this.D.cf(b)}else if(this.D){if(this.D.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.D.dispose();this.D=null}};
g.Sk=function(a,b){if(a)b===void 0&&(b=null),this.B||(this.B=this.eg(3)),this.B.cf(b);else if(this.B){if(this.B.isConnected())throw Error("Must disconnect next statement before removing connection.");this.B.dispose();this.B=null}};
g.Tk=function(a,b){if(a){b===void 0&&(b=null);if(!this.u){if(this.D)throw Error("Remove previous connection prior to adding output connection.");this.u=this.eg(2)}this.u.cf(b)}else if(this.u){if(this.u.isConnected())throw Error("Must disconnect output value before removing connection.");this.u.dispose();this.u=null}};g.ge=function(a){this.Ic!=a&&(D(new (G("change"))(this,"inline",null,this.Ic,a)),this.Ic=a)};
function Lf(a){if(a.Ic!=void 0)return a.Ic;for(var b=1;b<a.v.length;b++)if(a.v[b-1].type==5&&a.v[b].type==5)return!1;for(b=1;b<a.v.length;b++)if(a.v[b-1].type==1&&a.v[b].type==5)return!0;return!1}g.isEnabled=function(){return!this.disabled};g.pd=function(a){this.isEnabled()!=a&&(D(new (G("change"))(this,"disabled",null,this.disabled,!a)),this.disabled=!a)};function jh(a){for(a=ih(a);a;){if(a.disabled)return!0;a=ih(a)}return!1}g.isCollapsed=function(){return this.Bd};
g.ce=function(a){this.Bd!=a&&(D(new (G("change"))(this,"collapsed",null,this.Bd,a)),this.Bd=a)};
g.toString=function(a,b){function c(m){var n=m.Ee;!n&&m.K&&(n=m.K.Ee);return!!n&&(n.indexOf("Boolean")!=-1||n.indexOf("Number")!=-1)}function d(){h&&h.getType()==k.getType()&&h.N==k.N&&(h=null)}var e=[];b=b||"?";var f=xf;xf=!0;for(var h=Bf(this),k=h;h;){switch(h.getType()){case "input":var l=h.N;h.Zc()?c(l)&&e.push("("):e.push(b);break;case "field":l=h.N,l.name!="_TEMP_COLLAPSED_FIELD"&&e.push($g(l))}l=h;h=l.Zc()||l.next();if(!h){h=l.jd();for(d();h&&!h.next();)h=h.jd(),d(),h&&h.getType()=="input"&&
c(h.N)&&e.push(")");h&&(h=h.next())}}xf=f;for(b=2;b<e.length;b++)e[b-2]=="("&&e[b]==")"&&(e[b-2]=e[b-1],e.splice(b-1,2));e=e.reduce(function(m,n){return m+(m.substr(-1)=="("||n==")"?"":" ")+n},"");e=e.trim()||"???";a&&e.length>a&&(e=e.substring(0,a-3)+"...");return e};function kh(a,b){var c=Mf(b);return!c&&b.alt?typeof b.alt=="string"?(b=lh(b.alt))?kh(a,b):null:kh(a,b.alt):c}function mh(a){return a=="input_value"||a=="input_statement"||a=="input_dummy"}
function lh(a){return(a=a.trim())?{type:"field_label",text:a}:null}g.ze=function(a,b){var c=null;if(a==1||a==3)c=this.eg(a);a=new dh(a,b,this,c);this.v.push(a);return a};g.Ik=function(a,b){for(var c=0,d;d=this.v[c];c++)if(d.name==a)return d.dispose(),this.v.splice(c,1),!0;if(b)return!1;throw Error("Input not found: "+a);};function Bd(a,b){for(var c=0,d;d=a.v[c];c++)if(d.name==b)return d;return null}function nh(a,b){return(a=Bd(a,b))&&a.connection&&a.connection.G()}
g.df=function(a){this.Vb.text!=a&&(D(new (G("change"))(this,"comment",null,this.Vb.text,a)),this.Vb.text=a)};g.ba=function(){return this.Nn};g.moveBy=function(a,b){if(this.yc)throw Error("Block has parent.");var c=new (G("move"))(this);this.Nn.translate(a,b);Kd(c);D(c)};g.eg=function(a){return new Xe(this,a)};function oh(){this.cc=[];this.ae=this.Ka=this.ci=this.ai=this.$h=this.Dc=this.bi=this.Ld=this.wk=null}g=oh.prototype;
g.V=function(a){var b=document.createElement("div");b.className="blocklyMenu goog-menu blocklyNonSelectable";b.tabIndex=0;this.ae&&b.setAttribute("role",this.ae);this.Ka=b;for(var c=0,d;d=this.cc[c];c++)b.appendChild(d.va());this.bi=t(b,"mouseover",this,this.mp,!0);this.Dc=t(b,"click",this,this.hp,!0);this.$h=t(b,"mouseenter",this,this.kp,!0);this.ai=t(b,"mouseleave",this,this.lp,!0);this.ci=t(b,"keydown",this,this.ip);a.appendChild(b)};
g.focus=function(){var a=this.Ka;a&&(a.focus({preventScroll:!0}),A(a,"blocklyFocused"))};g.wg=function(a){this.ae=a};g.dispose=function(){this.bi&&(v(this.bi),this.bi=null);this.Dc&&(v(this.Dc),this.Dc=null);this.$h&&(v(this.$h),this.$h=null);this.ai&&(v(this.ai),this.ai=null);this.ci&&(v(this.ci),this.ci=null);for(var a=0,b;b=this.cc[a];a++)b.dispose();this.Ka=null};
function ph(a,b){for(var c=a.Ka;b&&b!=c;){if(ic(b,"blocklyMenuItem"))for(var d=0,e;e=a.cc[d];d++)if(e.Ka==b)return e;b=b.parentElement}return null}
g.ec=function(a){var b=this.Ld;b&&(b.ec(!1),this.Ld=null);if(a){a.ec(!0);this.Ld=a;b=this.Ka;var c=a.Ka,d=Ja(c),e=Ja(b);var f=Ia(b,"borderLeftWidth");Ia(b,"borderRightWidth");var h=Ia(b,"borderTopWidth");Ia(b,"borderBottomWidth");f=d.x-e.x-parseFloat(f);d=d.y-e.y-parseFloat(h);c=new Ga(c.offsetWidth,c.offsetHeight);e=b.clientHeight-c.height;h=b.scrollLeft;var k=b.scrollTop;h+=Math.min(f,Math.max(f-(b.clientWidth-c.width),0));k+=Math.min(d,Math.max(d-e,0));f=new r(h,k);b.scrollLeft=f.x;b.scrollTop=
f.y;We(b,"activedescendant",a.Pa())}};function qh(a,b,c){b+=c;for(var d;d=a.cc[b];){if(d.isEnabled()){a.ec(d);break}b+=c}}g.mp=function(a){(a=ph(this,a.target))&&(a.isEnabled()?this.Ld!=a&&this.ec(a):this.ec(null))};g.hp=function(a){var b=this.wk;this.wk=null;b&&typeof a.clientX=="number"&&va(b,new r(a.clientX,a.clientY))<1||(a=ph(this,a.target))&&a.isEnabled()&&a.yf&&a.yf(a)};g.kp=function(){this.focus()};g.lp=function(){if(this.Ka){var a=this.Ka;a&&(a.blur(),hc(a,"blocklyFocused"));this.ec(null)}};
g.ip=function(a){if(this.cc.length&&!(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)){var b=this.Ld;switch(a.keyCode){case 13:case 32:b&&b.isEnabled()&&b.yf&&b.yf(b);break;case 38:b=this.cc.indexOf(this.Ld);qh(this,b<0?this.cc.length:b,-1);break;case 40:qh(this,this.cc.indexOf(this.Ld),1);break;case 33:case 36:qh(this,-1,1);break;case 34:case 35:qh(this,this.cc.length,-1);break;default:return}a.preventDefault();a.stopPropagation()}};
g.getSize=function(){var a=this.Ka,b=Ha(a);b.height=a.scrollHeight;return b};var rh=0;function sh(a,b){this.cj=a;this.pb=b;this.Ch=!0;this.Ka=null;this.Ok=!1;this.ae=null;this.Am=this.Zi=this.Yi=!1;this.yf=null}g=sh.prototype;
g.va=function(){var a=document.createElement("div");a.id="blockly-"+(rh++).toString(36);this.Ka=a;a.className="blocklyMenuItem goog-menuitem "+(this.Ch?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.Zi?"blocklyMenuItemSelected goog-option-selected ":"")+(this.Am?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.Ok?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var b=document.createElement("div");b.className="blocklyMenuItemContent goog-menuitem-content";if(this.Yi){var c=document.createElement("div");
c.className="blocklyMenuItemCheckbox goog-menuitem-checkbox";b.appendChild(c)}c=this.cj;typeof this.cj=="string"&&(c=document.createTextNode(this.cj));b.appendChild(c);a.appendChild(b);this.ae&&a.setAttribute("role",this.ae);We(a,"selected",this.Yi&&this.Zi||!1);We(a,"disabled",!this.Ch);return a};g.dispose=function(){this.Ka=null};g.Pa=function(){return this.Ka.id};g.wg=function(a){this.ae=a};
g.ec=function(a){this.Am=a;var b=this.Ka;b&&this.isEnabled()&&(a?(A(b,"blocklyMenuItemHighlight"),A(b,"goog-menuitem-highlight")):(hc(b,"blocklyMenuItemHighlight"),hc(b,"goog-menuitem-highlight")))};g.isEnabled=function(){return this.Ch};g.pd=function(a){this.Ch=a};function th(a,b,c){a.yf=b.bind(c)};var O={sh:null,fb:null,show:function(a,b,c){Pg(c);if(b.length){var d=O.Ip(b,c);O.fb=d;O.Jp(d,a,c);setTimeout(function(){d.focus()},1);O.sh=null}else O.cb()},Ip:function(a,b){var c=new oh;c.wg("menu");for(var d=0,e;e=a[d];d++){var f=new sh(e.text);f.Ok=b;f.wg("menuitem");c.cc.push(f);f.pd(e.enabled);e.enabled&&th(f,function(){O.cb();this.oa(this.scope)},e)}return c},Jp:function(a,b,c){var d=document.body;var e=document.documentElement;d=new r(d.scrollLeft||e.scrollLeft,d.scrollTop||e.scrollTop);d=
new ya(d.y,document.documentElement.clientHeight+d.y,d.x,document.documentElement.clientWidth+d.x);var f=new ya(b.clientY+d.top,b.clientY+d.top,b.clientX+d.left,b.clientX+d.left);O.Uo(a);b=a.getSize();c&&(f.left+=b.width,f.right+=b.width,d.left+=b.width,d.right+=b.width);e=f.bottom+b.height>=d.bottom?f.top-b.height:f.bottom;c?(c=Math.max(f.right-b.width,d.left),c=Math.min(c,d.right-b.width)):(c=Math.min(f.left,d.right-b.width),c=Math.max(c,d.left));e<0?Rg(c,0,b.height+e):Rg(c,e,b.height);a.focus()},
Uo:function(a){a.V(Kg);var b=a.Ka;A(b,"blocklyContextMenu");t(b,"contextmenu",null,Va);a.focus()},cb:function(){Lg==O&&Qg();O.sh=null},dispose:function(){O.fb&&(O.fb.dispose(),O.fb=null)},Gq:function(a,b){return function(){C++;try{var c=rd(b,a.j),d=a.ba();d.x=a.o?d.x-ma:d.x+ma;d.y+=ma*2;c.moveBy(d.x,d.y)}finally{C--}C==0&&!c.S&&D(new (G("create"))(c));c.select()}}};function uh(){vh=this;this.Nb=Object.create(null)}var vh=null;uh.prototype.register=function(a){if(this.Nb[a.id])throw Error('Menu item with ID "'+a.id+'" is already registered.');this.Nb[a.id]=a};uh.prototype.unregister=function(a){if(!this.Nb[a])throw Error('Menu item with ID "'+a+'" not found.');delete this.Nb[a]};uh.prototype.getItem=function(a){return this.Nb[a]||null};
function wh(a,b){var c=[],d=vh.Nb;Object.keys(d).forEach(function(e){e=d[e];if(a==e.Ab){var f=e.wa(b);f!="hidden"&&(e={text:typeof e.bb=="function"?e.bb(b):e.bb,enabled:f=="enabled",oa:e.oa,scope:b,weight:e.weight},c.push(e))}});c.sort(function(e,f){return e.weight-f.weight});return c}new uh;function xh(a,b,c){xh.i.constructor.call(this,c);this.Wm=a;this.Um=b}H(xh,Od);xh.prototype.type="selected";xh.prototype.P=function(){var a=xh.i.P.call(this);a.oldElementId=this.Wm;a.newElementId=this.Um;return a};xh.prototype.L=function(a){xh.i.L.call(this,a);this.Wm=a.oldElementId;this.Um=a.newElementId};B(Mc,"selected",xh);function yh(a,b){yh.i.constructor.call(this,a,b);this.nc=a.j.qh[b];this.Yl=a.j.qh[oa[b]];this.$d=new r(0,0);this.Oc=zh;this.K=null}H(yh,Xe);var zh=-1;g=yh.prototype;g.dispose=function(){yh.i.dispose.call(this);this.Oc==1&&Ah(this.nc,this,this.y)};g.A=function(){return yh.i.A.call(this)};g.G=function(){return yh.i.G.call(this)};function cf(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}
function Bh(a,b){if(!a.l.j.wb()){var c=a.l.ac();if(!c.xb){var d=!1;if(!c.Qa()){c=b.A().ac();if(!c.Qa())return;b=a;d=!0}var e=L==c;e||c.fh();var f=b.x+ma+Math.floor(Math.random()*10)-a.x,h=b.y+ma+Math.floor(Math.random()*10)-a.y;d&&(h=-h);c.o&&(f=b.x-ma-Math.floor(Math.random()*10)-a.x);c.moveBy(f,h);e||c.sg()}}}
g.moveTo=function(a,b){if(this.Oc==zh){var c=this.nc;c.ua.splice(Ch(c,b),0,this);this.Oc=1}else this.Oc==1&&(Ah(this.nc,this,this.y),c=this.nc,c.ua.splice(Ch(c,b),0,this));this.x=a;this.y=b};g.moveBy=function(a,b){this.moveTo(this.x+a,this.y+b)};function Dh(a,b){a.moveTo(b.x+a.$d.x,b.y+a.$d.y)}function Eh(a,b,c){a.$d.x=b;a.$d.y=c}
function Fh(a){var b=a.K.x-a.x,c=a.K.y-a.y;if(b!=0||c!=0){a=a.G();var d=a.I();if(!d)throw Error("block is not rendered.");d=Xa(d);a.I().setAttribute("transform","translate("+(d.x-b)+","+(d.y-c)+")");ig(a,-b,-c)}}
g.closest=function(a,b){var c=this.Yl;if(c.ua.length){var d=this.y,e=this.x;this.x=e+b.x;this.y=d+b.y;var f=Ch(c,this.y);b=null;for(var h=a,k,l=f-1;l>=0&&Math.abs(c.ua[l].y-this.y)<=a;)k=c.ua[l],$e(this,k,!0,h)==0&&(b=k,h=cf(k,this)),l--;for(;f<c.ua.length&&Math.abs(c.ua[f].y-this.y)<=a;)k=c.ua[f],$e(this,k,!0,h)==0&&(b=k,h=cf(k,this)),f++;this.x=e;this.y=d;a={connection:b,li:h}}else a={connection:null,li:a};return a};
function gh(a,b){b&&a.Oc==1||!b&&a.Oc==0||a.l.xb||(b?(b=a.nc,b.ua.splice(Ch(b,a.y),0,a),a.Oc=1):(a.Oc==1&&Ah(a.nc,a,a.y),a.Oc=0))}function fh(a){gh(a,!0);var b=[];if(a.type!=1&&a.type!=3)return b;if(a=a.G()){if(a.isCollapsed()){var c=[];a.u&&c.push(a.u);a.B&&c.push(a.B);a.D&&c.push(a.D)}else c=a.Zb(!0);for(var d=0;d<c.length;d++)b.push.apply(b,fh(c[d]));b.length||(b[0]=a)}return b}
g.tk=function(a){var b=this.A();if(Xc){var c=Wc;setTimeout(function(){b.disposed||b.getParent()||(F(c),Bh(this,a),F(!1))}.bind(this),250)}};g.jj=function(a,b){yh.i.jj.call(this,a,b);a.J&&a.V();b.J&&(vd(b),b.V(),b.I().style.display="block")};g.tg=function(){yh.i.tg.call(this);var a=this.G();a&&(a.Zf(),a.V(!1),a=this.A(),a.J&&a.V())};g.Tm=function(a){return Gh(this.Yl,this,a)};
g.oh=function(a){yh.i.oh.call(this,a);var b=this.A();a=a.A();var c=b.J,d=a.J;c&&vd(b);d&&vd(a);c&&d&&(this.type==3||this.type==4?a.V():b.V());if(b=Ld(b,a))b=b.isVisible(),a.I().style.display=b?"block":"none"};g.cn=function(){!this.isConnected()||this.K&&$e(this,this.K,!1)==0||(Md(Ze(this)?this.G():this.l),this.l.rb())};function Hh(){Hh.i.constructor.call(this)}H(Hh,Ig);g=Hh.prototype;g.next=function(){var a=this.Wb;if(!a)return null;(a=Ih(this,a,this.Fn))&&Hg(this,a);return a};g.Zc=function(){return this.next()};g.md=function(){var a=this.Wb;if(!a)return null;(a=Jh(this,a,this.Fn))&&Hg(this,a);return a};g.jd=function(){return this.md()};function Ih(a,b,c){if(!b)return null;var d=b.Zc()||b.next();if(c(d))return d;if(d)return Ih(a,d,c);b=Kh(a,b.jd());return c(b)?b:b?Ih(a,b,c):null}
function Jh(a,b,c){if(!b)return null;var d=b.md();d=d?Lh(a,d):b.jd();return c(d)?d:d?Jh(a,d,c):null}g.Fn=function(a){var b=!1;a=a&&a.getType();if(a=="output"||a=="input"||a=="field"||a=="next"||a=="previous"||a=="workspace")b=!0;return b};function Kh(a,b){if(!b)return null;var c=b.next();return c?c:Kh(a,b.jd())}function Lh(a,b){if(!b.Zc())return b;for(b=b.Zc();b.next();)b=b.next();return Lh(a,b)}B(Lc,"basicCursor",Hh);function P(a,b,c){this.m=z(Vb,{},null);this.m.Jg="";this.style=Mh(a.pa.C(),null);this.sa=a.pa.Om(this.m,this.style);this.Jk=this.J=!1;this.j=a;this.D=this.B=this.u=null;this.Ng=ib()&&!!a.qb;var d=this.sa.Ca;d.Qb=this;Pe(d);P.i.constructor.call(this,a,b,c);this.m.dataset?this.m.dataset.id=this.id:Ka&&this.m.setAttribute("data-id",this.id)}H(P,of);g=P.prototype;g.height=0;g.width=0;g.Fi=null;
g.Zf=function(){if(!this.j.J)throw TypeError("Workspace is headless.");for(var a=0,b;b=this.v[a];a++)b.init();b=cg(this);for(a=0;a<b.length;a++)b[a].Mq();this.Ia();Zf(this.sa,"blocklyDraggable",this.Qa());a=this.I();this.j.options.readOnly||this.$o||!a||t(a,"mousedown",this,this.hd);this.$o=!0;a.parentNode||this.j.xa.appendChild(a)};
g.select=function(){if(this.S&&this.getParent())this.getParent().select();else if(L!=this){var a=null;if(L){a=L.id;C++;try{tg(L)}finally{C--}}a=new (G("selected"))(a,this.id,this.j.id);D(a);L=this;this.fh()}};function tg(a){if(L==a){var b=new (G("selected"))(a.id,null,a.j.id);b.hb=a.j.id;D(b);L=null;a.sg()}}g.Xd=null;g.Ub=null;g.Kn=null;function cg(a){var b=[];a.Xd&&b.push(a.Xd);a.Ub&&b.push(a.Ub);a.Kn&&b.push(a.Kn);return b}
g.si=function(a){var b=this.yc;if(a!=b){mc();P.i.si.call(this,a);nc();var c=this.I();if(!this.j.Qj&&c){var d=this.ba();a?(a.I().appendChild(c),a=this.ba(),ig(this,a.x-d.x,a.y-d.y)):b&&(this.j.xa.appendChild(c),this.translate(d.x,d.y));this.Ia()}}};g.ba=function(){var a=0,b=0,c=this.Ng?this.j.qb.oc:null,d=this.I();if(d){do{var e=Xa(d);a+=e.x;b+=e.y;this.Ng&&this.j.qb.oc.firstChild==d&&(e=this.j.qb.Dj(),a+=e.x,b+=e.y);d=d.parentNode}while(d&&d!=this.j.xa&&d!=c)}return new r(a,b)};
g.moveBy=function(a,b){if(this.yc)throw Error("Block has parent.");var c=C==0;if(c)var d=new (G("move"))(this);var e=this.ba();this.translate(e.x+a,e.y+b);ig(this,a,b);c&&(Kd(d),D(d));wd(this.j)};g.translate=function(a,b){this.I().setAttribute("transform","translate("+a+","+b+")")};g.moveTo=function(a){var b=this.ba();this.moveBy(a.x-b.x,a.y-b.y)};function fg(a,b){a.Ng?a.j.qb.lf(b.x,b.y):(a.m.Jg="translate("+b.x+","+b.y+")",a.m.setAttribute("transform",a.m.Jg+a.m.Bg))}
function Nh(a){if(a.j&&!a.j.wb()&&!a.getParent()&&!a.xb){var b=a.j.Jb;if(b&&b.Pp){var c=b.Zk,d=c/2,e=a.ba();b=Math.round((e.x-d)/c)*c+d-e.x;c=Math.round((e.y-d)/c)*c+d-e.y;b=Math.round(b);c=Math.round(c);b==0&&c==0||a.moveBy(b,c)}}}g.Sf=function(){var a=this.ba(),b=eg(this);if(this.o){var c=a.x-b.width;var d=a.x}else c=a.x,d=a.x+b.width;return new ya(a.y,a.y+b.height,c,d)};g.fg=function(){this.sa.Ff=this.j.pa.C();for(var a=0,b;b=this.v[a];a++)b.fg()};
g.ce=function(a){this.Bd!=a&&(P.i.ce.call(this,a),a?this.J&&this.V():Oh(this))};function Oh(a){for(var b=a.isCollapsed(),c=0,d;d=a.v[c];c++)d.name!="_TEMP_COLLAPSED_INPUT"&&d.ya(!b);if(b){d=cg(a);for(c=0;b=d[c];c++)b.ya(!1);c=a.toString(30);(d=Ad(a,"_TEMP_COLLAPSED_FIELD"))?Fd(d,c):(a=d=Bd(a,"_TEMP_COLLAPSED_INPUT")||a.ze(5,"_TEMP_COLLAPSED_INPUT"),c=new ch(c),eh(a,a.$.length,c,"_TEMP_COLLAPSED_FIELD"))}else vd(a),a.Ik("_TEMP_COLLAPSED_INPUT")}
g.hd=function(a){var b=this.j&&this.j.Gd(a);if(b){if(b.Se)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");Dg(b,this);b.dc=a}};g.showHelp=function(){var a=typeof this.Te=="function"?this.Te():this.Te;a&&window.open(a)};g.wi=function(a){if(this.j.options.readOnly||!this.contextMenu)var b=null;else b=wh("block",{block:this}),this.Vo&&this.Vo(b);b&&b.length&&(O.show(a,b,this.o),O.sh=this)};
function ig(a,b,c){if(a.J){for(var d=a.Zb(!1),e=0;e<d.length;e++)d[e].moveBy(b,c);d=cg(a);for(e=0;e<d.length;e++)d[e].Ro();for(e=0;e<a.Cc.length;e++)ig(a.Cc[e],b,c)}}g.fe=function(a){if(a){var b=this.I();b.Jg="";b.Bg="";df=df.concat(this.Zb(!0));A(this.m,"blocklyDragging")}else df=[],hc(this.m,"blocklyDragging");for(b=0;b<this.Cc.length;b++)this.Cc[b].fe(a)};g.Rk=function(a){P.i.Rk.call(this,a);Zf(this.sa,"blocklyDraggable",a)};g.Qk=function(a){P.i.Qk.call(this,a);a=cg(this);for(var b=0;b<a.length;b++)Tg(a[b])};
g.Wk=function(a){P.i.Wk.call(this,a);this.Ia()};g.un=function(a){this.We!=a&&(this.We=a)&&(this.pi(this.j.pa.C().po),Zf(this.sa,"blocklyInsertionMarker",!0))};g.I=function(){return this.m};
g.dispose=function(a,b){if(this.j){Me=Le=null;Ue();Te(this.sa.Ca);mc();var c=this.j;L==this&&(tg(this),Ph(this.j));O.sh==this&&O.cb();if(b&&this.J){Md(this,a);b=this.j;var d=this.I();b.jb.play("delete");var e=jg(b,d);d=d.cloneNode(!0);d.Zp=e.x;d.$p=e.y;d.setAttribute("transform","translate("+e.x+","+e.y+")");K(b).appendChild(d);d.Ql=d.getBBox();Pf(d,b.o,new Date,b.scale)}this.J=!1;if(this.Fi){for(var f in this.Fi)clearTimeout(this.Fi[f]);this.Fi=null}f=cg(this);for(b=0;b<f.length;b++)f[b].dispose();
P.i.dispose.call(this,!!a);jc(this.m);wd(c);this.m=null;nc()}};g.Ia=function(){this.sa.Ia(this);for(var a=cg(this),b=0;b<a.length;b++)a[b].Ia();for(a=0;b=this.v[a];a++)for(var c=0,d;d=b.$[c];c++)d.Ia()};function vd(a){var b=kd(a,!1);a.Ia();if(!a.isCollapsed()){a=0;for(var c;c=b[a];a++)c.J&&vd(c)}}g.ep=function(){return this.Ub};
g.df=function(a){if(!ka.Comment)throw Error("Missing require for Blockly.Comment");this.Vb.text!=a&&(P.i.df.call(this,a),a=a!=null,!!this.Ub==a?this.Ub.mr():(a?this.Ub=new ka.Comment(this):(this.Ub.dispose(),this.Ub=null),this.J&&(this.V(),this.rb())))};g.pd=function(a){this.isEnabled()!=a&&(P.i.pd.call(this,a),this.J&&!jh(this)&&vd(this))};g.ec=function(a){this.J&&this.sa.Cn(a)};g.fh=function(){Zf(this.sa,"blocklySelected",!0)};g.sg=function(){Zf(this.sa,"blocklySelected",!1)};g.Bj=function(){return this.style.Cd};
g.pi=function(a){P.i.pi.call(this,a);a=Qh(this.j.pa.C(),this.Eb);this.sa.ie(a.style);this.style=a.style;this.Cg=a.name;this.Ia()};g.ie=function(a){var b=Mh(this.j.pa.C(),a);this.Cg=a;if(b)this.tc=b.tc,this.sa.ie(b),this.Eb=b.Cd,this.style=b,this.Ia();else throw Error("Invalid style name: "+a);};function dg(a){do{var b=a.I(),c=b.parentNode,d=c.childNodes;d[d.length-1]!==b&&c.appendChild(b);a=a.getParent()}while(a)}g.Vk=function(a,b){P.i.Vk.call(this,a,b);this.J&&(this.V(),this.rb())};
g.Sk=function(a,b){P.i.Sk.call(this,a,b);this.J&&(this.V(),this.rb())};g.Tk=function(a,b){P.i.Tk.call(this,a,b);this.J&&(this.V(),this.rb())};g.ge=function(a){P.i.ge.call(this,a);this.J&&(this.V(),this.rb())};g.Ik=function(a,b){a=P.i.Ik.call(this,a,b);this.J&&(this.V(),this.rb());return a};g.ze=function(a,b){a=P.i.ze.call(this,a,b);this.J&&(this.V(),this.rb());return a};
function ud(a,b){a.D&&gh(a.D,b);a.u&&gh(a.u,b);if(a.B){gh(a.B,b);var c=a.B.G();c&&ud(c,b)}if(!a.Bd)for(c=0;c<a.v.length;c++){var d=a.v[c].connection;d&&(gh(d,b),(d=d.G())&&ud(d,b))}}g.Zb=function(a){var b=[];if(a||this.J)if(this.u&&b.push(this.u),this.D&&b.push(this.D),this.B&&b.push(this.B),a||!this.Bd){a=0;for(var c;c=this.v[a];a++)c.connection&&b.push(c.connection)}return b};g.Th=function(a){return P.i.Th.call(this,a)};g.Cj=function(a,b){return P.i.Cj.call(this,a,b)};
g.eg=function(a){return new yh(this,a)};g.rb=function(){if(this.j&&!this.j.wb()){var a=this.ac();if(!a.xb)for(var b=this.Zb(!1),c=0,d;d=b[c];c++){d.isConnected()&&Ze(d)&&d.G().rb();for(var e=d.Tm(ma),f=0,h;h=e[f];f++)d.isConnected()&&h.isConnected()||h.A().ac()!=a&&(Ze(d)?Bh(h,d):Bh(d,h))}}};function kg(a){var b=Wc;setTimeout(function(){F(b);Nh(a);F(!1)},125);setTimeout(function(){F(b);a.rb();F(!1)},250)}g.getParent=function(){return P.i.getParent.call(this)};g.ac=function(){return P.i.ac.call(this)};
g.V=function(a){if(!this.Jk){this.Jk=!0;try{this.J=!0;mc();this.isCollapsed()&&Oh(this);this.j.pa.V(this);var b=this.ba();this.D&&Dh(this.D,b);this.u&&Dh(this.u,b);for(var c=0;c<this.v.length;c++){var d=this.v[c].connection;d&&(Dh(d,b),d.isConnected()&&Fh(d))}this.B&&(Dh(this.B,b),this.B.isConnected()&&Fh(this.B));if(a!==!1){var e=this.getParent();e?e.V(!0):wd(this.j)}nc();this.hl()}finally{this.Jk=!1}}};g.hl=function(){this.j.dg&&this.sa.Jf&&this.j.Tf().Xb();this.j.dg&&this.sa.dk&&this.j.Vf("local_marker_1").Xb()};
g.Nc=function(a){this.sa.Nc(a)};g.qd=function(a){this.sa.qd(a)};function eg(a){var b=a.height,c=a.width,d=nb(a);d&&(d=eg(d),a=a.j.pa.C().Ji,b+=d.height-a,c=Math.max(c,d.width));return{height:b,width:c}};function Rh(){this.ua=[]}function Sh(a,b,c){if(!a.ua.length)return-1;var d=Ch(a,c);if(d>=a.ua.length)return-1;c=b.y;for(var e=d;e>=0&&a.ua[e].y==c;){if(a.ua[e]==b)return e;e--}for(e=d;e<a.ua.length&&a.ua[e].y==c;){if(a.ua[e]==b)return e;e++}return-1}function Ch(a,b){if(!a.ua.length)return 0;for(var c=0,d=a.ua.length;c<d;){var e=Math.floor((c+d)/2);if(a.ua[e].y<b)c=e+1;else if(a.ua[e].y>b)d=e;else{c=e;break}}return c}
function Ah(a,b,c){b=Sh(a,b,c);if(b==-1)throw Error("Unable to find connection in connectionDB.");a.ua.splice(b,1)}function Gh(a,b,c){function d(m){var n=f-e[m].x,w=h-e[m].y;Math.sqrt(n*n+w*w)<=c&&l.push(e[m]);return w<c}var e=a.ua,f=b.x,h=b.y;a=0;for(var k=b=e.length-2;a<k;)e[k].y<h?a=k:b=k,k=Math.floor((a+b)/2);var l=[];b=a=k;if(e.length){for(;a>=0&&d(a);)a--;do b++;while(b<e.length&&d(b))}return l};function Th(a,b){Th.i.constructor.call(this,b);this.An=a}H(Th,Od);Th.prototype.type="theme_change";Th.prototype.P=function(){var a=Th.i.P.call(this);a.themeName=this.An;return a};Th.prototype.L=function(a){Th.i.L.call(this,a);this.An=a.themeName};B(Mc,"theme_change",Th);function Uh(a,b,c,d,e){Uh.i.constructor.call(this,d);this.Sb=a;this.Rb=b;this.scale=c;this.lg=e}H(Uh,Od);Uh.prototype.type="viewport_change";Uh.prototype.P=function(){var a=Uh.i.P.call(this);a.viewTop=this.Sb;a.viewLeft=this.Rb;a.scale=this.scale;a.oldScale=this.lg;return a};Uh.prototype.L=function(a){Uh.i.L.call(this,a);this.Sb=a.viewTop;this.Rb=a.viewLeft;this.scale=a.scale;this.lg=a.oldScale};B(Mc,"viewport_change",Uh);function Vh(a){this.g=a}function Wh(a){var b=0,c=0;a&&(b=a.Wf(),c=a.Jj);return new Ga(b,c)}function Xh(a){var b=Wh(Yh(a.g,!0));return{width:b.width,height:b.height,position:a.g.Cb}}function Zh(a){var b=Wh(a.g.la);return{width:b.width,height:b.height,position:a.g.Cb}}function $h(a){var b=0,c=Zh(a),d=Xh(a),e=!!a.g.la;a=!!Yh(a.g,!0);var f=(e?c.position:d.position)==2;e&&f?b=c.width:a&&f&&(b=d.width);return{top:0,left:b}}
function ai(a,b){b=b?a.g.scale:1;var c=bi(a.g),d=Zh(a),e=Xh(a),f=a.g.la?d.position:e.position;if(a.g.la){if(f==2||f==3)c.width-=d.width}else!Yh(a.g,!0)||f!=2&&f!=3||(c.width-=e.width);return{height:c.height/b,width:c.width/b,top:-a.g.scrollY/b,left:-a.g.scrollX/b}}
Vh.prototype.Fh=function(){var a=this.g.scale;var b=[].concat(this.g.Ig);if(b.length){for(var c=b[0].Sf(),d=1;d<b.length;d++){var e=b[d];e.yb&&e.yb()||(e=e.Sf(),e.top<c.top&&(c.top=e.top),e.bottom>c.bottom&&(c.bottom=e.bottom),e.left<c.left&&(c.left=e.left),e.right>c.right&&(c.right=e.right))}b=c}else b=new ya(0,0,0,0);return{height:(b.bottom-b.top)*a,width:(b.right-b.left)*a,top:b.top*a,left:b.left*a}};
Vh.prototype.Id=function(a,b,c){a=a?this.g.scale:1;var d=b||ai(this,!1);c=c||this.Fh();if(rg(this.g)&&sg(this.g))b={};else{b=rg(this.g);var e=sg(this.g),f=d||ai(this,!1);var h={};e||(h.top=f.top,h.bottom=f.top+f.height);b||(h.left=f.left,h.right=f.left+f.width);b=h}h=c.top+c.height;e=c.left+c.width;f=d.width;var k=d.height;var l=f/2,m=k/2;d=Math.min(c.top-m,h-k);h=Math.max(h+m,c.top+k);k=Math.min(c.left-l,e-f);c=Math.max(e+l,c.left+f);d=b.top!==void 0?b.top:d;e=b.left!==void 0?b.left:k;return{top:d/
a,left:e/a,width:((b.right!==void 0?b.right:c)-e)/a,height:((b.bottom!==void 0?b.bottom:h)-d)/a}};Vh.prototype.$b=function(){var a=Zh(this),b=Xh(this),c=bi(this.g),d=$h(this),e=ai(this),f=this.Fh(),h=this.Id(!1,e,f);return{Iq:f.height,Lq:f.width,Kq:f.top,Jq:f.left,scrollHeight:h.height,scrollWidth:h.width,scrollTop:h.top,scrollLeft:h.left,gb:e.height,Xa:e.width,Sb:e.top,Rb:e.left,ib:d.top,Za:d.left,er:c.height,gr:c.width,kr:a.width,jr:a.height,Cb:a.position,Pq:b.width,Oq:b.height}};
B(Sc,"default",Vh);function ci(a,b){this.M=b;ci.i.constructor.call(this,a)}H(ci,Vh);ci.prototype.Fh=function(){try{var a=this.g.xa.getBBox()}catch(c){a={height:0,y:0,width:0,x:0}}var b=this.g.scale;return{height:a.height*b,width:a.width*b,top:a.y*b,left:a.x*b}};ci.prototype.Id=function(a,b,c){b=c||this.Fh();c=this.M.ue*this.g.scale;a=a?this.g.scale:1;return{height:(b.height+2*c)/a,width:(b.width+b.left+c)/a,top:0,left:0}};function di(a){var b=ae;this.g=a;this.Gg=b;this.Dg=[];this.Sc=Object.create(null)}g=di.prototype;g.Hc=function(){return this.Gg};g.yg=function(a){var b=this.Gg;this.Gg=a;if(a=ei(this.g))b&&hc(a,b.Yb()),A(a,this.Gg.Yb());for(b=0;a=this.Dg[b];b++)fi(a);Ee()};g.subscribe=function(a,b,c){this.Sc[b]||(this.Sc[b]=[]);this.Sc[b].push({element:a,propertyName:c});a.style[c]=""};
g.unsubscribe=function(a){if(a)for(var b=Object.keys(this.Sc),c=0,d;d=b[c];c++){for(var e=this.Sc[d],f=e.length-1;f>=0;f--)e[f].element===a&&e.splice(f,1);this.Sc[d].length||delete this.Sc[d]}};g.dispose=function(){this.Sc=this.Dg=this.Gg=null};function gi(a,b){gi.i.constructor.call(this,a,b);this.Qh=!1;this.sb=Object.create(null);this.wn=this.pg=0;this.Hm=this.vk=null}H(gi,ug);g=gi.prototype;g.kj=function(a){this.Hm=this.za.options.qa&&this.za.options.qa.jn;gi.i.kj.call(this,a);!this.Nh&&Ab(a)&&hi(this,a)};g.Rl=function(a){this.vk=t(document,"mousedown",null,this.np.bind(this),!0);this.di=t(document,"mousemove",null,this.Qe.bind(this),!0);this.ei=t(document,"mouseup",null,this.Ih.bind(this),!0);a.preventDefault();a.stopPropagation()};
g.np=function(a){!this.wb()&&Ab(a)&&(hi(this,a),this.Qh&&ub())};g.Qe=function(a){if(this.wb())zb(a)&&!yb(a)||gi.i.Qe.call(this,a);else if(this.Qh){if(Ab(a)){this.sb[xb(a)]=ii(this,a);var b=Object.keys(this.sb);if(this.Hm&&b.length===2){b=Object.keys(this.sb);b=va(this.sb[b[0]],this.sb[b[1]])/this.wn;if(this.pg>0&&this.pg<Infinity){var c=b-this.pg;c=c>0?c*5:c*6;var d=this.za,e=cb(a,K(d),Be(d));d.zoom(e.x,e.y,c)}this.pg=b;a.preventDefault()}else gi.i.Qe.call(this,a)}ub()}else gi.i.Qe.call(this,a)};
g.Ih=function(a){if(Ab(a)&&!this.wb()){var b=xb(a);this.sb[b]&&delete this.sb[b];Object.keys(this.sb).length<2&&(this.sb=Object.create(null),this.pg=0)}!this.Qh||this.wb()?zb(a)&&!yb(a)||gi.i.Ih.call(this,a):(a.preventDefault(),a.stopPropagation(),this.dispose())};g.dispose=function(){gi.i.dispose.call(this);this.vk&&v(this.vk)};function hi(a,b){a.sb[xb(b)]=ii(a,b);var c=Object.keys(a.sb);c.length==2&&(a.wn=va(a.sb[c[0]],a.sb[c[1]]),a.Qh=!0,b.preventDefault())}
function ii(a,b){return a.za?new r(b.changedTouches?b.changedTouches[0].pageX:b.pageX,b.changedTouches?b.changedTouches[0].pageY:b.pageY):null};function ji(a){this.Ak=a;this.wf=Object.create(null)}g=ji.prototype;g.Uj=null;g.dispose=function(){this.wf=this.Ak=null};g.load=function(a,b){if(a.length){try{var c=new p.Audio}catch(k){return}for(var d,e=0;e<a.length;e++){var f=a[e],h=f.match(/\.(\w+)$/);if(h&&c.canPlayType("audio/"+h[1])){d=new p.Audio(f);break}}d&&d.play&&(this.wf[b]=d)}};g.preload=function(){for(var a in this.wf){var b=this.wf[a];b.volume=.01;var c=b.play();c!==void 0?c.then(b.pause).catch(function(){}):b.pause();if(Pa||Ra)break}};
g.play=function(a,b){var c=this.wf[a];c?(a=new Date,this.Uj!=null&&a-this.Uj<100||(this.Uj=a,c=Pa||Oa?c:c.cloneNode(),c.volume=b===void 0?1:b,c.play())):this.Ak&&this.Ak.jb.play(a,b)};
function ki(a,b,c){ki.i.constructor.call(this,a);this.zb=new (Vc(Sc,a,!0))(this);this.$b=a.$b||this.zb.$b.bind(this.zb);this.vg=a.vg||li;this.Ec=new Cb;var d=[];d[1]=new Rh;d[2]=new Rh;d[3]=new Rh;d[4]=new Rh;this.qh=d;b&&(this.qb=b);c&&(this.oe=c);this.Ei=!!this.oe&&ib();this.Jh=[];this.jb=new ji(a.ob);this.Jb=this.options.Gj?new Yd(this.options.Gj,a.tm):null;this.bc=new Jg(this);this.cl=Object.create(null);this.nm=Object.create(null);mi&&ni&&oi(this,"VARIABLE",ni);pi&&qi&&(oi(this,"PROCEDURE",qi),
tf(this,ri));this.Na=this.options.ob?this.options.ob.Na:new di(this);this.Na.Dg.push(this);c=this.options.Lk||"geras";a=this.Hc();b=this.options.Mk;c=new (Uc(Oc,c))(c);c.init(a,b);this.pa=c;this.Xi=null;this.dg=!1;this.Ig=[];this.lj=[];this.Wi=new Ga(0,0)}H(ki,sd);g=ki.prototype;g.oi=null;g.J=!0;g.Jc=!0;g.ad=!1;g.Rh=!1;g.Nk=!0;g.scrollX=0;g.scrollY=0;g.scale=1;g.nk=1;g.an=0;g.Ym=0;g.mf=null;g.W=null;g.M=null;g.la=null;g.Oa=null;g.qb=null;g.oe=null;g.Ei=!1;g.Mh=!1;g.Oj=null;g.Lm=null;g.O=null;
g.Gm=null;g.Pj=!0;g.Nc=function(a){this.bc.Nc(a)};g.qd=function(a){this.bc.qd(a)};g.Vf=function(a){return this.bc?this.bc.Vf(a):null};g.Tf=function(){return this.bc?this.bc.Tf():null};g.Hc=function(){return this.Na.Hc()};g.yg=function(a){a||(a=ae);this.Na.yg(a)};function fi(a){a.m&&a.pa.Hk(a.m,a.Hc());si(ff(a).filter(function(b){return!!b.Cg}));ti(a);a.la&&fi(a.la);a.isVisible()&&a.ya(!0);a=new (G("theme_change"))(a.Hc().name,a.id);D(a)}
function si(a){for(var b=0,c;c=a[b];b++){var d=c.Cg;d&&(c.ie(d),c.Xd&&c.Xd.lr())}}function Be(a){if(a.Pj){var b=K(a).getScreenCTM();b&&(a.Gm=b.inverse(),a.Pj=!1)}return a.Gm}g.Mg=function(){this.Pj=!0};g.isVisible=function(){return this.Jc};function jg(a,b){var c=0,d=0,e=1;if(a.xa.contains(b)||a.td.contains(b))e=a.scale;do{var f=Xa(b);if(b==a.xa||b==a.td)e=1;c+=f.x*e;d+=f.y*e;b=b.parentNode}while(b&&b!=K(a));return new r(c,d)}function bi(a){a=a.Wi;return new Ga(a.width,a.height)}
function ei(a){if(!a.Oj)for(var b=a.m;b;){if((" "+(b.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!=-1){a.Oj=b;break}b=b.parentNode}return a.Oj}
g.va=function(a){this.m=z(Vb,{"class":"blocklyWorkspace"},null);a&&(this.La=z($b,{height:"100%",width:"100%","class":a},this.m),a=="blocklyMainBackground"&&this.Jb?this.La.style.fill="url(#"+this.Jb.Pe.id+")":this.Na.subscribe(this.La,"workspaceBackgroundColour","fill"));this.xa=z(Vb,{"class":"blocklyBlockCanvas"},this.m);this.td=z(Vb,{"class":"blocklyBubbleCanvas"},this.m);this.ad||(t(this.m,"mousedown",this,this.hd,!1,!0),t(this.m,"wheel",this,this.Hp));this.options.um&&(this.la=new (Vc(Pc,this.options,
!0))(this));this.Jb&&this.Jb.update(this.scale);ui(this);var b=Vc(Lc,this.options);b&&(a=this.bc,b=new b,a.Fb&&a.Fb.Gb&&a.Fb.Gb.dispose(),a.Fb=b,a.Fb&&(b=a.Fb,b=new vi(a.g,a.g.pa.C(),b),a.Fb.Gb=b,a.Nc(a.Fb.Gb.va())));this.pa.va(this.m,this.Hc());return this.m};
g.dispose=function(){this.J=!1;this.Oa&&this.Oa.cancel();this.m&&(jc(this.m),this.m=null);this.td=this.xa=null;this.la&&(this.la.dispose(),this.la=null);this.M&&(this.M.dispose(),this.M=null);this.mf&&(this.mf.dispose(),this.mf=null);this.W&&(this.W.dispose(),this.W=null);this.Pg&&(this.Pg.dispose(),this.Pg=null);this.jb&&(this.jb.dispose(),this.jb=null);this.Jb&&(this.Jb.dispose(),this.Jb=null);this.pa.dispose();this.bc&&(this.bc.dispose(),this.bc=null);ki.i.dispose.call(this);if(this.Na){var a=
this.Na,b=a.Dg.indexOf(this);if(b<0)throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");a.Dg.splice(b,1);this.Na.unsubscribe(this.La);this.options.ob||(this.Na.dispose(),this.Na=null)}this.nm=this.cl=this.qh=null;this.options.ob||(a=K(this))&&a.parentNode&&jc(a.parentNode);this.oi&&(v(this.oi),this.oi=null)};g.ik=function(a,b){return new P(this,a,b)};function Yh(a,b){return a.M||b?a.M:a.la?Yh(a.la):null}function wd(a){a.Nk&&a.J&&(a.W&&a.W.resize(),a.Mg())}
g.resize=function(){this.la&&this.la.position();this.M&&this.M.position();var a=Hb(this.Ec,Jb);var b=this.zb;b={Jn:ai(b),Oi:$h(b),Wp:Zh(b)};for(var c=[],d=0,e;e=a[d];d++)e.position(b,c),(e=e.Sf())&&c.push(e);this.W&&this.W.resize();this.Mg();ui(this)};function xg(a){var b=document.documentElement;var c=window;b=Ka&&c.pageYOffset!=b.scrollTop?new r(b.scrollLeft,b.scrollTop):new r(c.pageXOffset||b.scrollLeft,c.pageYOffset||b.scrollTop);ua(a.Lm,b)||(a.Lm=b,a.Mg(),ui(a))}
function wi(a,b,c){K(a);b&&(a.Wi.width=b);c&&(a.Wi.height=c)}function K(a){if(!a.Xi)for(var b=a.m;b;){if(b.tagName=="svg"){a.Xi=b;break}b=b.parentNode}return a.Xi}function le(a){if(C==0){var b=a.scale,c=-a.scrollY,d=-a.scrollX;if(!(b==a.nk&&Math.abs(c-a.an)<1&&Math.abs(d-a.Ym)<1)){var e=new (G("viewport_change"))(c,d,b,a.id,a.nk);a.nk=b;a.an=c;a.Ym=d;D(e)}}}
g.translate=function(a,b){if(this.Ei&&this.Mh)this.oe.lf(a,b);else{var c="translate("+a+","+b+") scale("+this.scale+")";this.xa.setAttribute("transform",c);this.td.setAttribute("transform",c)}if(this.qb){c=this.qb;var d=this.scale;c.od=d;var e=a.toFixed(0),f=b.toFixed(0);c.Ul.x=parseInt(e,10);c.Ul.y=parseInt(f,10);c.oc.setAttribute("transform","translate("+e+","+f+") scale("+d+")")}this.Jb&&this.Jb.moveTo(a,b);le(this)};
function De(a){if(a.Ei){a.Mh=!1;var b=a.oe.Dj();a.oe.mh(a.m);b="translate("+b.x+","+b.y+") scale("+a.scale+")";a.xa.setAttribute("transform",b);a.td.setAttribute("transform",b)}}
function Ce(a){if(a.Ei&&!a.Mh){a.Mh=!0;var b=a.xa.previousSibling,c=parseInt(K(a).getAttribute("width"),10),d=parseInt(K(a).getAttribute("height"),10),e=Xa(a.xa),f=a.oe,h=a.xa,k=a.td,l=a.scale;if(f.aa.childNodes.length)throw Error("Already dragging a block.");f.Fk=b;h.setAttribute("transform","translate(0, 0) scale("+l+")");k.setAttribute("transform","translate(0, 0) scale("+l+")");f.aa.setAttribute("width",c);f.aa.setAttribute("height",d);f.aa.appendChild(h);f.aa.appendChild(k);f.aa.style.display=
"block";a.oe.lf(e.x,e.y)}}g.Wf=function(){var a=this.$b();return a?a.Xa/this.scale:0};g.ya=function(a){this.Jc=a;if(this.m)if(this.W&&this.W.ee(a),Yh(this)&&Yh(this).ee(a),K(this).style.display=a?"block":"none",this.la&&this.la.ya(a),a){a=ff(this);for(var b=a.length-1;b>=0;b--)a[b].fg();this.V();this.la&&this.la.position()}else Ee(!0)};g.V=function(){for(var a=ff(this),b=a.length-1;b>=0;b--)a[b].V(!1);if(this.Oa)for(a=this.Oa.Me(),b=0;b<a.length;b++)a[b].V(!1);b=this.bc;b.g.dg&&b.Fc&&b.g.Tf().Xb()};
function xi(a){for(var b=J,c=0,d;d=b.Jh[c];c++)d.ec(!1);b.Jh.length=0;if(d=a?b.Ib(a):null)b.Jh.indexOf(d)==-1&&b.Jh.push(d),d.ec(!0)}
function yi(a){var b=zi;if(a.J&&b.tagName&&!(b.getElementsByTagName("block").length>=pf(a)))if(a.Oa&&a.Oa.cancel(),b.tagName.toLowerCase()=="comment"){C++;try{var c=ka.Eq.zj(b),d=parseInt(b.getAttribute("x"),10),e=parseInt(b.getAttribute("y"),10);isNaN(d)||isNaN(e)||(a.o&&(d=-d),c.moveBy(d+50,e+50))}finally{C--}C==0&&ka.Dq.Nq(c);c.select()}else{C++;try{var f=rd(b,a),h=parseInt(b.getAttribute("x"),10),k=parseInt(b.getAttribute("y"),10);if(!isNaN(h)&&!isNaN(k)){a.o&&(h=-h);do{b=!1;var l=ff(a);c=0;for(var m;m=
l[c];c++){var n=m.ba();if(Math.abs(h-n.x)<=1&&Math.abs(k-n.y)<=1){b=!0;break}}if(!b){var w=f.Zb(!1);c=0;for(var y;y=w[c];c++)if(y.closest(ma,new r(h,k)).connection){b=!0;break}}b&&(h=a.o?h-ma:h+ma,k+=ma*2)}while(b);f.moveBy(h,k)}}finally{C--}C==0&&!f.S&&D(new (G("create"))(f));f.select()}}function ti(a){(a=a.ad?a.O:a)&&!a.Oa&&a.la&&Yh(a.la)&&a.la.Zq()}g.af=function(a,b){ki.i.af.call(this,a,b);ti(this)};g.Je=function(a){ki.i.Je.call(this,a);ti(this)};
g.Wc=function(a,b,c){a=ki.i.Wc.call(this,a,b,c);ti(this);return a};function ui(a){var b=Hb(a.Ec,Kb);a.lj=[];for(var c=0,d;d=b[c];c++){var e=d.getClientRect();e&&a.lj.push({component:d,Po:e})}}function gg(a,b){for(var c=0,d;d=a.lj[c];c++)if(d.Po.contains(b.clientX,b.clientY))return d.component;return null}g.hd=function(a){var b=this.Gd(a);b&&Bg(b,a,this)};g.yi=function(a){a=cb(a,K(this),Be(this));a.x/=this.scale;a.y/=this.scale};g.wb=function(){return this.Oa!=null&&this.Oa.wb()};
g.Qa=function(){return this.options.Sa&&!!this.options.Sa.scrollbars||this.options.Sa&&this.options.Sa.nf||this.options.Sa&&this.options.Sa.Gc||this.options.qa&&this.options.qa.nf||this.options.qa&&this.options.qa.jn};function rg(a){var b=!!a.W;return a.Qa()&&(!b||b&&!!a.W.ea)}function sg(a){var b=!!a.W;return a.Qa()&&(!b||b&&!!a.W.X)}
g.Hp=function(a){if(Fg())a.preventDefault(),a.stopPropagation();else{var b=this.options.qa&&this.options.qa.nf,c=this.options.Sa&&this.options.Sa.nf;if(b||c){var d=db(a);!b||!a.ctrlKey&&c?(b=this.scrollX-d.x,c=this.scrollY-d.y,a.shiftKey&&!d.x&&(b=this.scrollX-d.y,c=this.scrollY),this.scroll(b,c)):(d=-d.y/50,b=cb(a,K(this),Be(this)),this.zoom(b.x,b.y,d));a.preventDefault()}}};g.wi=function(a){if(!this.options.readOnly&&!this.ad){var b=wh("workspace",{j:this});this.So&&this.So(b,a);O.show(a,b,this.o)}};
function Gc(a){if(a.options.ob)Gc(a.options.ob);else{Hc=a;document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{K(a).focus({preventScroll:!0})}catch(b){try{K(a).parentNode.setActive()}catch(c){K(a).parentNode.focus({preventScroll:!0})}}}}
g.zoom=function(a,b,c){c=Math.pow(this.options.qa.Mp,c);var d=this.scale*c;if(this.scale!=d){d>this.options.qa.hg?c=this.options.qa.hg/this.scale:d<this.options.qa.jg&&(c=this.options.qa.jg/this.scale);var e=this.xa.getCTM(),f=K(this).createSVGPoint();f.x=a;f.y=b;f=f.matrixTransform(e.inverse());a=f.x;b=f.y;e=e.translate(a*(1-c),b*(1-c)).scale(c);this.scrollX=e.e;this.scrollY=e.f;this.setScale(d)}};
g.setScale=function(a){this.options.qa.hg&&a>this.options.qa.hg?a=this.options.qa.hg:this.options.qa.jg&&a<this.options.qa.jg&&(a=this.options.qa.jg);this.scale=a;Ee(!1);this.M&&(this.M.Gk(),ui(this));this.Jb&&this.Jb.update(this.scale);a=this.$b();this.scrollX-=a.Za;this.scrollY-=a.ib;a.Rb+=a.Za;a.Sb+=a.ib;this.scroll(this.scrollX,this.scrollY);if(this.W)if(this.M){var b=this.W;b.ea&&we(b.ea,a);b.X&&ye(b.X,a)}else b=this.W,b.ea&&xe(b.ea,a),b.X&&ze(b.X,a)};
g.scroll=function(a,b){Ee(!0);var c=this.$b();a=Math.min(a,-c.scrollLeft);b=Math.min(b,-c.scrollTop);var d=c.scrollTop+Math.max(0,c.scrollHeight-c.gb);a=Math.max(a,-(c.scrollLeft+Math.max(0,c.scrollWidth-c.Xa)));b=Math.max(b,-d);this.scrollX=a;this.scrollY=b;this.W&&this.W.set(-(a+c.scrollLeft),-(b+c.scrollTop),!1);a+=c.Za;b+=c.ib;this.translate(a,b)};
function li(a){var b=this.$b();typeof a.x=="number"&&(this.scrollX=-(b.scrollLeft+(b.scrollWidth-b.Xa)*a.x));typeof a.y=="number"&&(this.scrollY=-(b.scrollTop+(b.scrollHeight-b.gb)*a.y));this.translate(this.scrollX+b.Za,this.scrollY+b.ib)}g.Ib=function(a){return ki.i.Ib.call(this,a)};g.ra=function(a){return ki.i.ra.call(this,a)};g.gh=function(a){this.Ig.push(a);ki.i.gh.call(this,a)};g.ni=function(a){kb(this.Ig,a);ki.i.ni.call(this,a)};g.Ua=function(a){var b=!this.Nk&&a;this.Nk=a;b&&wd(this)};
g.clear=function(){this.Ua(!1);ki.i.clear.call(this);this.Ig=[];this.Ua(!0)};function Ai(a,b){if(typeof b!="function")throw TypeError("Button callbacks must be functions.");a.nm.CREATE_VARIABLE=b}function oi(a,b,c){if(typeof c!="function")throw TypeError("Toolbox category callbacks must be functions.");a.cl[b]=c}
g.Gd=function(a){var b=a.type=="mousedown"||a.type=="touchstart"||a.type=="pointerdown",c=this.Oa;return c?b&&c.Se?(console.warn("Tried to start the same gesture twice."),c.cancel(),null):c:b?this.Oa=new gi(a,this):null};function Ph(a){a.Oa&&a.Oa.cancel()};function Bi(a,b){typeof a=="string"&&(a=document.getElementById(a)||document.querySelector(a));if(!document.contains(a))throw Error("Error: container is not in current document");b=new he(b||{});var c=document.createElement("div");c.className="injectionDiv";c.tabIndex=0;We(c,"label",q.WORKSPACE_ARIA_LABEL);a.appendChild(c);a=Ci(c,b);var d=new Ud(c),e=new vf(c),f=Di(a,b,d,e);Ei(f);Hc=f;Fi(f);c.addEventListener("focusin",function(){Hc=f});return f}
function Ci(a,b){a.setAttribute("dir","LTR");var c=b.op,d=b.ji;if(!Wd){Wd=!0;var e=Xd.join("\n");Xd.length=0;c&&(c=d.replace(/[\\/]$/,""),e=e.replace(/<<<PATH>>>/g,c),c=document.createElement("style"),c.id="blockly-common-style",c.appendChild(document.createTextNode(e)),document.head.insertBefore(c,document.head.firstChild))}a=z(ac,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklySvg",tabindex:"0"},
a);c=z(Pb,{},a);e=b.tm;c=z(Zb,{id:"blocklyGridPattern"+String(Math.random()).substring(2),patternUnits:"userSpaceOnUse"},c);e.length>0&&e.spacing>0?(z(Xb,{stroke:e.colour},c),e.length>1&&z(Xb,{stroke:e.colour},c)):z(Xb,{},c);b.Gj=c;return a}
function Di(a,b,c,d){b.ob=null;b=new ki(b,c,d);c=b.options;b.scale=c.qa.Sp;a.appendChild(b.va("blocklyMainBackground"));A(ei(b),b.pa.Yb());A(ei(b),b.Hc().Yb());!c.um&&c.Sd&&(d=new he({parentWorkspace:b,rtl:b.o,oneBasedIndex:b.options.gi,renderer:b.options.Lk,rendererOverrides:b.options.Mk,move:{scrollbars:!0}}),d.Cb=b.options.Cb,b.M=new (Vc(Rc,b.options,!0))(d),b.M.Ad=!1,b.M.g.ya(!0),d=b.M.va(ac),kc(d,a));if(c.xm){if(!Gi)throw Error("Missing require for Blockly.Trashcan");b.mf=new Gi(b);d=b.mf.va();
b.m.insertBefore(d,b.xa)}if(c.qa&&c.qa.controls){if(!ka.Lo)throw Error("Missing require for Blockly.ZoomControls");b.Pg=new ka.Lo(b);c=b.Pg.va();b.m.appendChild(c)}b.Na.subscribe(a,"workspaceBackgroundColour","background-color");b.translate(0,0);tf(b,Hi(b));Fi(b);Kg||(Kg=document.createElement("div"),Kg.className="blocklyWidgetDiv",(Ac||document.body).appendChild(Kg));zc();Ne||(Ne=document.createElement("div"),Ne.className="blocklyTooltipDiv",(Ac||document.body).appendChild(Ne));return b}
function Ii(a){var b=a.zb;if(!(rg(b.g)&&sg(b.g)||a.wb())){b=b.Id(!0);for(var c=[].concat(a.Ig),d=0,e;e=c[d];d++)lg(a,b,e)}}
function Hi(a){return function(b){var c=a.zb;if(!(rg(c.g)&&sg(c.g)||a.wb()))if(Yc.indexOf(b.type)!==-1){c=c.Id(!0);var d=null;switch(b.type){case "create":case "move":(d=a.Ib(b.ga))&&(d=d.ac())}if(d){var e=Wc;F(b.group);lg(a,c,d)&&!b.group&&console.warn("Moved object in bounds but there was no event group. This may break undo.");e!==null&&F(e)}}else b.type==="viewport_change"&&b.scale>b.lg&&Ii(a)}}
function lg(a,b,c){var d=c.Sf(),e=pc(b.top,d.top,b.top+b.height-(d.bottom-d.top))-d.top,f=b.left;b=b.left+b.width-(d.right-d.left);a.o?f=Math.min(b,f):b=Math.max(f,b);return(a=pc(f,d.left,b)-d.left)||e?(c.moveBy(a,e),!0):!1}
function Ei(a){var b=a.options,c=K(a);t(c.parentNode,"contextmenu",null,function(e){Wa(e)||e.preventDefault()});c=t(window,"resize",null,function(){Ee(!0);Fi(a);Ii(a)});a.oi=c;Ji();if(b.Sd){c=a.la;var d=Yh(a,!0);c?c.init():d&&(d.init(a),d.show(b.Sd),typeof d.sn=="function"&&d.sn())}b.xm&&a.mf.init();b.qa&&b.qa.controls&&a.Pg.init();b.Sa&&b.Sa.scrollbars?(a.W=new ie(a,b.Sa.scrollbars===!0||!!b.Sa.scrollbars.Lj,b.Sa.scrollbars===!0||!!b.Sa.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),a.W.resize()):
a.vg({x:.5,y:.5});b.qp&&Ki(b.ji,a)}function Ji(){la||(t(document,"scroll",null,function(){for(var a=uf(),b=0,c;c=a[b];b++)c.Mg&&c.Mg()}),t(document,"keydown",null,Li),u(document,"touchend",null,ub),u(document,"touchcancel",null,ub),Pa&&t(window,"orientationchange",document,function(){Fi(Hc)}));la=!0}
function Ki(a,b){function c(){for(;e.length;)v(e.pop());d.preload()}var d=b.jb;d.load([a+"click.mp3",a+"click.wav",a+"click.ogg"],"click");d.load([a+"disconnect.wav",a+"disconnect.mp3",a+"disconnect.ogg"],"disconnect");d.load([a+"delete.mp3",a+"delete.ogg",a+"delete.wav"],"delete");var e=[];e.push(t(document,"mousemove",null,c,!0));e.push(t(document,"touchstart",null,c,!0))};function Mi(a){this.Hn="";this.rn=Object.create(null);if(a){a=a.split(",");for(var b=0;b<a.length;b++)this.rn[a[b]]=!0}this.reset()}Mi.prototype.reset=function(){this.nc=Object.create(null);this.Zl=Object.create(null);this.Z=null};Mi.prototype.Xk=function(a){this.Z=a};
Mi.prototype.getName=function(a,b){var c=a;b=="VARIABLE"&&(this.Z?a=(a=this.Z.Oe(a))?a.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),a=null),a&&(c=a));a=c.toLowerCase();var d=b=="VARIABLE"||b=="DEVELOPER_VARIABLE"?this.Hn:"";b in this.nc||(this.nc[b]=Object.create(null));var e=this.nc[b];
if(a in e)return d+e[a];c?(c=encodeURI(c.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(c[0])!=-1&&(c="my_"+c)):c=q.UNNAMED_KEY||"unnamed";for(var f="";this.Zl[c+f]||c+f in this.rn;)f=f?f+1:2;c+=f;this.Zl[c]=!0;b=(b=="VARIABLE"||b=="DEVELOPER_VARIABLE"?this.Hn:"")+c;e[a]=b.substr(d.length);return b};var pi={};function Ni(a){var b=nf(a,"procedures_defnoreturn").map(function(c){return c.gp()});a=nf(a,"procedures_defreturn").map(function(c){return c.gp()});b.sort(Oi);a.sort(Oi);return[b,a]}function Oi(a,b){return a[0].localeCompare(b[0],void 0,{sensitivity:"base"})}
function qi(a){function b(f,h){for(var k=0;k<f.length;k++){var l=f[k][0],m=f[k][1],n=I("block");n.setAttribute("type",h);n.setAttribute("gap",16);var w=I("mutation");w.setAttribute("name",l);n.appendChild(w);for(l=0;l<m.length;l++){var y=I("arg");y.setAttribute("name",m[l]);w.appendChild(y)}c.push(n)}}var c=[];if(Gf.procedures_defnoreturn){var d=I("block");d.setAttribute("type","procedures_defnoreturn");d.setAttribute("gap",16);var e=I("field");e.setAttribute("name","NAME");e.appendChild(document.createTextNode(q.PROCEDURES_DEFNORETURN_PROCEDURE));
d.appendChild(e);c.push(d)}Gf.procedures_defreturn&&(d=I("block"),d.setAttribute("type","procedures_defreturn"),d.setAttribute("gap",16),e=I("field"),e.setAttribute("name","NAME"),e.appendChild(document.createTextNode(q.PROCEDURES_DEFRETURN_PROCEDURE)),d.appendChild(e),c.push(d));Gf.procedures_ifreturn&&(d=I("block"),d.setAttribute("type","procedures_ifreturn"),d.setAttribute("gap",16),c.push(d));c.length&&c[c.length-1].setAttribute("gap",24);a=Ni(a);b(a[0],"procedures_callnoreturn");b(a[1],"procedures_callreturn");
return c}
function Pi(a){for(var b=[],c=nf(a,"procedures_mutatorarg"),d=0,e;e=c[d];d++)b.push(jf(e,"NAME"));c=I("xml");d=I("block");d.setAttribute("type","procedures_mutatorarg");e=I("field");e.setAttribute("name","NAME");a:if(b.length){for(var f="",h=14,k="x";;){for(var l=!1,m=0;m<b.length;m++)if(b[m].toLowerCase()==k){l=!0;break}if(!l){b=k;break a}h++;h==25&&(h=0,f=Number(f)+1);k="ijkmnopqrstuvwxyzabcdefgh".charAt(h)+f}b=void 0}else b="x";e.appendChild(document.createTextNode(b));d.appendChild(e);c.appendChild(d);
if(b=be(c)){if(!a.options.Sd)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(ge(b)){if(!a.la)throw Error("Existing toolbox has no categories.  Can't change mode.");a.options.Sd=b;a.la.V(b)}else{if(!a.M)throw Error("Existing toolbox has categories.  Can't change mode.");a.options.Sd=b;a.M.show(b)}}else if(a.options.Sd)throw Error("Can't nullify an existing toolbox.");}
function ri(a){if(a.type=="bubble_open"&&a.Fq==="mutator"&&a.Rj){a=(bd[a.hb]||null).Ib(a.ga);var b=a.type;if(b=="procedures_defnoreturn"||b=="procedures_defreturn")a=a.Xd.g,Pi(a),tf(a,Qi)}}function Qi(a){a.type!="create"&&a.type!="delete"&&a.type!="change"||Pi(bd[a.hb]||null)};function Ri(){Si=this;this.Nb=Object.create(null);this.Xe=Object.create(null)}var Si,Ti={Shift:16,Control:17,Alt:18,Meta:91};Ri.prototype.register=function(a,b){if(this.Nb[a.name]&&!b)throw Error('Shortcut with name "'+a.name+'" already exists.');this.Nb[a.name]=a};
Ri.prototype.unregister=function(a){if(!this.Nb[a])return console.warn('Keyboard shortcut with name "'+a+'" not found.'),!1;for(var b in this.Xe){var c=b,d=this.Xe[c],e=d.indexOf(a);e>-1&&(d.splice(e,1),d.length==0&&delete this.Xe[c])}delete this.Nb[a];return!0};function Q(a,b){var c=Si;a=String(a);var d=c.Xe[a];if(d)throw Error('Shortcut with name "'+b+'" collides with shortcuts '+d.toString());c.Xe[a]=[b]}
function Ui(a,b){var c="";if(b){for(var d=gd(Ti),e=0,f;f=b[e];e++)if(d.indexOf(f)<0)throw Error(f+" is not a valid modifier key.");for(var h in Ti)b.indexOf(Ti[h])>-1&&(c!=""&&(c+="+"),c+=h)}c!=""&&a?c=c+"+"+a:a&&(c=a.toString());return c}new Ri;function hf(a,b,c,d){this.j=a;this.name=b;this.type=c||"";this.Nd=d||gb();D(new (G("var_create"))(this))}hf.prototype.Pa=function(){return this.Nd};function Vi(a,b){return a.name.localeCompare(b.name,void 0,{sensitivity:"base"})};var mi={};function id(a){var b=ff(a);a=Object.create(null);for(var c=0;c<b.length;c++){var d=Cd(b[c]);if(d)for(var e=0;e<d.length;e++){var f=d[e],h=f.Pa();h&&(a[h]=f)}}b=[];for(h in a)b.push(a[h]);return b}var Wi={};function ni(a){var b=[],c=document.createElement("button");c.setAttribute("text","%{BKY_NEW_VARIABLE}");c.setAttribute("callbackKey","CREATE_VARIABLE");Ai(a,function(d){Xi(d.Vq())});b.push(c);a=Yi(a);return b=b.concat(a)}
function Yi(a){a=a.Hh("");var b=[];if(a.length>0){var c=a[a.length-1];if(Gf.variables_set){var d=I("block");d.setAttribute("type","variables_set");d.setAttribute("gap",Gf.math_change?8:24);d.appendChild(Zi(c));b.push(d)}Gf.math_change&&(d=I("block"),d.setAttribute("type","math_change"),d.setAttribute("gap",Gf.variables_get?20:8),d.appendChild(Zi(c)),c=pd('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),d.appendChild(c),b.push(d));if(Gf.variables_get){a.sort(Vi);
c=0;for(var e;e=a[c];c++)d=I("block"),d.setAttribute("type","variables_get"),d.setAttribute("gap",8),d.appendChild(Zi(e)),b.push(d)}}return b}function Xi(a){function b(c){$i(c,function(d){if(d){var e=aj(d,a);if(e){if(e.type=="")var f=q.VARIABLE_ALREADY_EXISTS.replace("%1",e.name);else f=q.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,f=f.replace("%1",e.name).replace("%2",e.type);kf(f,function(){b(d)})}else a.Wc(d,"")}})}b("")}
function $i(a,b){bj(a,function(c){c&&(c=c.replace(/[\s\xa0]+/g," ").trim(),c==q.RENAME_VARIABLE||c==q.NEW_VARIABLE)&&(c=null);b(c)})}function aj(a,b){b=b.Z.Le();a=a.toLowerCase();for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a)return d;return null}function Zi(a){var b=I("field");b.setAttribute("name","VAR");b.setAttribute("id",a.Pa());b.setAttribute("variabletype",a.type);b.appendChild(document.createTextNode(a.name));return b}
function xd(a,b){a=a.Le();var c=[];if(b.length!=a.length)for(var d=0;d<a.length;d++){var e=a[d];b.indexOf(e)==-1&&c.push(e)}return c};var Hc=null,L=null,df=[],zi=null,cj=null,dj=null,Ac=null;function Fi(a){for(;a.options.ob;)a=a.options.ob;var b=K(a),c=bi(a),d=b.parentNode;if(d){var e=d.offsetWidth;d=d.offsetHeight;c.width!=e&&(b.setAttribute("width",e+"px"),wi(a,e,null));c.height!=d&&(b.setAttribute("height",d+"px"),wi(a,null,d));a.resize()}}
function Li(a){var b=Hc;if(b&&!(Wa(a)||b.J&&!b.isVisible()))a:{var c=Si,d="";for(e in Ti)a.getModifierState(e)&&(d!=""&&(d+="+"),d+=e);d!=""&&a.keyCode?d=d+"+"+a.keyCode:a.keyCode&&(d=a.keyCode.toString());d=c.Xe[d]||[];var e=0;for(var f;f=d[e];e++)if(f=c.Nb[f],(!f.wa||f.wa(b))&&f.oa&&f.oa(b,a,f))break a}}function ej(a){a.j.ad||(F(!0),Ee(),a.u?a.dispose(!1,!0):a.dispose(!0,!0),F(!1))}
function fj(a){if(a.We)a=null;else{for(var b=ld(a,!0),c=0,d;d=b.childNodes[c];c++)if(d.nodeName.toLowerCase()=="next"){b.removeChild(d);break}c=a.ba();b.setAttribute("x",a.o?-c.x:c.x);b.setAttribute("y",c.y);a={xml:b,source:a.j,aq:lb(a,!0)}}a&&(zi=a.xml,cj=a.source,dj=a.aq)}function gj(){if(!zi)return!1;var a=cj;a.ad&&(a=a.O);return dj&&qf(a,dj)?(F(!0),yi(a),F(!1),!0):!1}
function Ee(a){Ue();Qg();Fc();var b=!!a;Hb(Hc.Ec,Lb).forEach(function(c){!b&&c.Hb&&c.Hb&&c.Hb.isVisible()&&(c.Hb.cb(),hj(c,!1))})}function kf(a,b){alert(a);b&&b()}function lf(a,b){b(confirm(a))}function bj(a,b){b(prompt(q.NEW_VARIABLE_TITLE,a))}
function ij(a){return function(){var b=a.type?'Block "'+a.type+'": ':"";if(a.output&&a.previousStatement)throw Error(b+"Must not have both an output and a previousStatement.");a.style&&a.style.tc&&(this.tc=a.style.tc,a.style=null);if(a.style&&a.colour)throw Error(b+"Must not have both a colour and a style.");if(a.style){var c=a.style;try{this.ie(c)}catch(y){console.warn(b+"Style does not exist: ",c)}}else if("colour"in a)if(a.colour===void 0)console.warn(b+"Undefined colour value.");else{c=a.colour;
try{this.pi(c)}catch(y){console.warn(b+"Illegal colour value: ",c)}}for(c=0;a["message"+c]!==void 0;){var d=a["args"+c]||[],e=a["lastDummyAlign"+c],f=b;var h=fb(a["message"+c],!0);for(var k=d.length,l=[],m=0,n=0;n<h.length;n++){var w=h[n];if(typeof w=="number"){if(w<1||w>k)throw Error('Block "'+this.type+'": Message index %'+w+" out of range.");if(l[w])throw Error('Block "'+this.type+'": Message index %'+w+" duplicated.");l[w]=!0;m++}}if(m!=k)throw Error('Block "'+this.type+'": Message does not reference all '+
k+" arg(s).");k=[];for(l=0;l<h.length;l++){m=h[l];typeof m=="number"&&(m=d[m-1]);if(typeof m=="string"&&(m=lh(m),!m))continue;k.push(m)}(d=k.length)&&!mh(k[d-1].type)&&(d={type:"input_dummy"},e&&(d.align=e),k.push(d));e=[];for(d=0;h=k[d];d++)if(mh(h.type)){l=h;m=f;n={LEFT:-1,RIGHT:1,CENTRE:0,CENTER:0};h=null;switch(l.type){case "input_value":h=this.ze(1,l.name);break;case "input_statement":h=this.ze(3,l.name);break;case "input_dummy":h=this.ze(5,l.name||"")}h?(l.check&&h.cf(l.check),l.align&&(n=n[l.align.toUpperCase()],
n===void 0?console.warn(m+"Illegal align value: ",l.align):(l=h,l.align=n,l.l.J&&(l.l=l.l,l.l.V())))):h=null;if(h){for(l=0;m=e[l];l++)n=h,eh(n,n.$.length,m[0],m[1]);e.length=0}}else(l=kh(this,h))&&e.push([l,h.name]);c++}a.inputsInline!==void 0&&this.ge(a.inputsInline);a.output!==void 0&&this.Tk(!0,a.output);a.previousStatement!==void 0&&this.Vk(!0,a.previousStatement);a.nextStatement!==void 0&&this.Sk(!0,a.nextStatement);a.tooltip!==void 0&&(c=a.tooltip,c=eb(c),this.zg(c));a.enableContextMenu!==void 0&&
(c=a.enableContextMenu,this.contextMenu=!!c);a.helpUrl!==void 0&&(c=a.helpUrl,this.Te=eb(c));typeof a.extensions=="string"&&(console.warn(b+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+a.type+"' block."),a.extensions=[a.extensions]);a.mutator!==void 0&&Jf(a.mutator,this,!0);b=a.extensions;if(Array.isArray(b))for(c=0;c<b.length;++c)Jf(b[c],this,!1)}}
function jj(a){for(var b=0;b<a.length;b++){var c=a[b];if(c){var d=c.type;d==null||d===""?console.warn("Block definition #"+b+" in JSON array is missing a type attribute. Skipping."):(Gf[d]&&console.warn("Block definition #"+b+' in JSON array overwrites prior definition of "'+d+'".'),Gf[d]={init:ij(c)})}else console.warn("Block definition #"+b+" in JSON array is "+c+". Skipping.")}};function kj(a,b,c){typeof a!="function"&&(lj(a),a=JSON.parse(JSON.stringify(a)));this.Ye=a;this.$k=this.Ek=this.Eh=null;a=this.Ye;if(Array.isArray(a)){for(var d=!1,e=0;e<a.length;e++){var f=a[e][0];typeof f=="string"?a[e][0]=eb(f):(f.alt!=null&&(a[e][0].alt=eb(f.alt)),d=!0)}if(!(d||a.length<2)){f=[];for(e=0;e<a.length;e++)f.push(a[e][0]);var h=za(f);e=Aa(f,h);d=Ca(f,h);if((e||d)&&!(h<=e+d)){e&&(this.Ek=f[0].substring(0,e-1));d&&(this.$k=f[0].substr(1-d));f=[];for(h=0;h<a.length;h++){var k=a[h][0],
l=a[h][1];k=k.substring(e,k.length-d);f[h]=[k,l]}this.Ye=f}}}this.bf=mj(this,!1)[0];kj.i.constructor.call(this,this.bf[1],b,c);this.jf=this.zd=this.eb=this.fb=this.ug=null}H(kj,Sg);kj.L=function(a){return new kj(a.options,void 0,a)};kj.prototype.zj=function(a){typeof this.Ye=="function"&&mj(this,!1);Fd(this,a.textContent)};kj.prototype.Fl=!0;var nj=Oa?"\u25bc":"\u25be";g=kj.prototype;g.Tn="default";
g.Kh=function(){!this.C().ql||this.C().ql&&!this.l.S?Vg(this):this.Vl=this.l.I();Wg(this);this.eb=z(Wb,{},this.lb);this.C().ho?(this.jf=z(Wb,{height:this.C().sf+"px",width:this.C().sf+"px"},this.lb),this.jf.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.C().io)):(this.zd=z(cc,{},this.Wa),this.zd.appendChild(document.createTextNode(this.l.o?nj+" ":" "+nj)),this.l.o?this.Wa.insertBefore(this.zd,this.ke):this.Wa.appendChild(this.zd));this.Aa&&A(this.Aa,"blocklyDropdownRect")};
g.xi=function(a){var b=new oh;b.wg("listbox");this.fb=b;var c=mj(this,!1);this.ug=null;for(var d=0;d<c.length;d++){var e=c[d][0],f=c[d][1];if(typeof e=="object"){var h=new Image(e.width,e.height);h.src=e.src;h.alt=e.alt||"";e=h}e=new sh(e,f);e.wg("option");e.Ok=this.l.o;e.Yi=!0;b.cc.push(e);e.Zi=f==this.pb;f==this.pb&&(this.ug=e);th(e,this.jp,this)}this.fb.wk=a&&typeof a.clientX==="number"?new r(a.clientX,a.clientY):null;this.fb.V(rc);A(this.fb.Ka,"blocklyDropdownMenu");this.C().co&&(a=this.l.S?this.l.getParent().Bj():
this.l.Bj(),b=this.l.S?this.l.getParent().style.Fe:this.l.style.Fe,qc.style.backgroundColor=a,qc.style.borderColor=b);a=this.Zo.bind(this);this.Aa?(f=this.Aa.getBoundingClientRect(),c=Ja(this.Aa),d=f.width,f=f.height):(f=eg(this.l),b=this.l.j.scale,c=Ja(Ug(this)),d=f.width*b,f=f.height*b,Na?(c.x+=1.5*b,c.y+=1.5*b):La||Ka||(c.x-=.5*b,c.y-=.5*b),d+=1*b,f+=1*b);b=new ya(c.y,c.y+f,c.x,c.x+d);d=new ya(b.top,b.bottom,b.left,b.right);b=d.left+(d.right-d.left)/2;c=d.bottom;d=d.top;f=this.A();for(e=f.j;e.options.ob;)e=
e.options.ob;tc=K(e).parentNode;f=f.o;uc=this;wc=a||null;a=qc;a.style.direction=f?"rtl":"ltr";f=Hc;xc=f.pa.Yb();yc=f.Hc().Yb();A(a,xc);A(a,yc);a=Ja(tc);f=Ha(tc);a={left:a.x,right:a.x+f.width,top:a.y,bottom:a.y+f.height,width:f.width,height:f.height};f=Ha(qc);c+f.height<a.bottom?a=Bc(b,c,a,f):d-f.height>a.top?a=Dc(b,d,a,f):c+f.height<document.documentElement.clientHeight?a=Bc(b,c,a,f):d-f.height>document.documentElement.clientTop?a=Dc(b,d,a,f):(a=Cc(b,a.left,a.right,f.width),a={Mj:a.Ke,Nj:0,wj:a.Ke,
xj:0,Ri:null,Ae:null,Ti:null,Si:!1});d=a;d.Si?(sc.style.display="",sc.style.transform="translate("+d.Ae+"px,"+d.Ti+"px) rotate(45deg)",sc.setAttribute("class",d.Ri?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):sc.style.display="none";a=Math.floor(d.Mj);b=Math.floor(d.Nj);c=Math.floor(d.wj);d=Math.floor(d.xj);f=qc;f.style.left=a+"px";f.style.top=b+"px";f.style.display="block";f.style.opacity=1;f.style.transform="translate("+(c-a)+"px,"+(d-b)+"px)";this.fb.focus();
this.ug&&this.fb.ec(this.ug);this.Ia()};g.Zo=function(){this.fb&&this.fb.dispose();this.ug=this.fb=null;this.Ia()};g.jp=function(a){uc===this&&Fc();Fd(this,a.pb)};function mj(a,b){return typeof a.Ye=="function"?(a.Eh&&b||(a.Eh=a.Ye.call(a),lj(a.Eh)),a.Eh):a.Ye}
g.Ah=function(a){for(var b=!1,c=mj(this,!0),d=0,e;e=c[d];d++)if(e[1]==a){b=!0;break}return b?a:(this.l&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.l.type+", Field name: "+this.name+", Value: "+a),null)};g.Lf=function(a){kj.i.Lf.call(this,a);a=mj(this,!0);for(var b=0,c;c=a[b];b++)c[1]==this.pb&&(this.bf=c)};
g.Ia=function(){this.Aa&&(this.Aa.setAttribute("stroke",this.l.style.Fe),this.fb?this.Aa.setAttribute("fill",this.l.style.Fe):this.Aa.setAttribute("fill","transparent"));this.l&&this.zd&&(this.zd.style.fill=this.l.S?this.l.style.nh:this.l.style.Cd)};
g.Kk=function(){this.ke.nodeValue="";this.eb.style.display="none";var a=this.bf&&this.bf[0];if(a&&typeof a=="object"){this.eb.style.display="";this.eb.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a.src);this.eb.setAttribute("height",a.height);this.eb.setAttribute("width",a.width);var b=Number(a.height);a=Number(a.width);var c=!!this.Aa,d=Math.max(c?this.C().ol:0,b+10);c=c?this.C().rf:0;if(this.jf)var e=oj(this,a+c,d/2-this.C().sf/2);else{e=this.zd;var f=this.C().tf,h=this.C().re,k=this.C().qe;
e=oc(e,f+"pt",h,k)}this.Va.width=a+e+c*2;this.Va.height=d;f=0;this.l.o?this.eb.setAttribute("x",c+e):(f=a+e,this.Wa.setAttribute("text-anchor","end"),this.eb.setAttribute("x",c));this.eb.setAttribute("y",d/2-b/2);Yg(this,f+c,a+e)}else this.ke.nodeValue=Xg(this),A(this.Wa,"blocklyDropdownText"),this.Wa.setAttribute("text-anchor","start"),a=!!this.Aa,b=Math.max(a?this.C().ol:0,this.C().Ug),d=this.Wa,c=this.C().tf,e=this.C().re,f=this.C().qe,d=oc(d,c+"pt",e,f),a=a?this.C().rf:0,c=0,this.jf&&(c=oj(this,
d+a,b/2-this.C().sf/2)),this.Va.width=d+c+a*2,this.Va.height=b,Yg(this,a,d);Zg(this)};function oj(a,b,c){if(!a.jf)return 0;var d=a.Aa?a.C().rf:0,e=a.C().jo,f=a.C().sf;a.jf.setAttribute("transform","translate("+(a.l.o?d:b+e)+","+c+")");return f+e}g.Ej=function(){if(!this.bf)return null;var a=this.bf[0];return typeof a=="object"?a.alt:a};
function lj(a){if(!Array.isArray(a))throw TypeError("FieldDropdown options must be an array.");if(!a.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var b=!1,c=0;c<a.length;++c){var d=a[c];Array.isArray(d)?typeof d[1]!="string"?(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option id must be a string. Found "+d[1]+" in: ",d)):d[0]&&typeof d[0]!="string"&&typeof d[0].src!="string"&&(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must have a string label or image description. Found"+
d[0]+" in: ",d)):(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must be an array. Found: ",d))}if(b)throw TypeError("Found invalid FieldDropdown options.");}B(Nc,"field_dropdown",kj);function hh(a){this.kg=a}g=hh.prototype;g.tl=null;g.bh=null;g.dh=null;g.oo="  ";g.Sn=60;g.ah=[];g.Oh=null;
function pj(){var a=R,b=J;b||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),b=Hc);var c=[];a.init(b);b=b.ra(!0);for(var d=0,e;e=b[d];d++){var f=qj(a,e);Array.isArray(f)&&(f=f[0]);f&&(e.u&&(f=a.tn(f),a.bh&&!e.al&&(f=rj(a.bh,e)+f),a.dh&&!e.al&&(f+=rj(a.dh,e))),c.push(f))}c=c.join("\n");c=a.finish(c);c=c.replace(/^\s+\n/,"");c=c.replace(/\n\s+$/,"\n");return c=c.replace(/[ \t]+\n/g,"\n")}function sj(a,b){return b+a.replace(/(?!\n$)\n/g,"\n"+b)}
function qj(a,b){a.Oh===!1&&console.warn("Generator init was not called before blockToCode was called.");if(!b)return"";if(!b.isEnabled())return qj(a,nb(b));if(b.yb())return qj(a,kd(b,!1)[0]);var c=a[b.type];if(typeof c!="function")throw Error('Language "'+a.kg+'" does not know how to generate code for block type "'+b.type+'".');c=c.call(b,b);if(Array.isArray(c)){if(!b.u)throw TypeError("Expecting string from statement block: "+b.type);return[a.Pk(b,c[0]),c[1]]}if(typeof c=="string")return a.bh&&
!b.al&&(c=rj(a.bh,b)+c),a.dh&&!b.al&&(c+=rj(a.dh,b)),a.Pk(b,c);if(c===null)return"";throw SyntaxError("Invalid code generated: "+c);}
function tj(a,b,c,d){if(isNaN(d))throw TypeError("Expecting valid order from block: "+b.type);var e=nh(b,c);if(!e)return"";c=qj(a,e);if(c==="")return"";if(!Array.isArray(c))throw TypeError("Expecting tuple from value block: "+e.type);b=c[0];c=c[1];if(isNaN(c))throw TypeError("Expecting valid order from value block: "+e.type);if(!b)return"";e=!1;var f=Math.floor(d),h=Math.floor(c);if(f<=h&&(f!=h||f!=0&&f!=99))for(e=!0,f=0;f<a.ah.length;f++)if(a.ah[f][0]==d&&a.ah[f][1]==c){e=!1;break}e&&(b="("+b+")");
return b}function uj(a,b){var c=R;a=nh(a,b);b=qj(c,a);if(typeof b!="string")throw TypeError("Expecting code from statement block: "+(a&&a.type));b&&(b=sj(b,c.oo));return b}function rj(a,b){b=b.id.replace(/\$/g,"$$$$");return a.replace(/%1/g,"'"+b+"'")}g.Li="";function vj(a){var b=R;b.Li+=a+","}g.init=function(){this.gj=Object.create(null);this.bp=Object.create(null)};g.Pk=function(a,b){return b};g.finish=function(a){delete this.gj;delete this.bp;return a};g.tn=function(a){return a};var R=new hh("JavaScript");vj("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(p).join(","));R.eq=0;R.xq=1.1;R.$g=1.2;R.Zg=2;R.uq=3;R.nq=3;R.hq=4.1;R.Aq=4.2;R.El=4.3;R.Al=4.4;R.zq=4.5;R.Bq=4.6;R.oq=4.7;R.fq=4.8;
R.rq=5;R.Cl=5.1;R.pq=5.2;R.wq=5.3;R.Dl=6.1;R.Yg=6.2;R.jq=7;R.yq=8;R.tq=8;R.vq=8;R.qq=9;R.gq=10;R.kq=11;R.iq=12;R.zl=13;R.Bl=14;R.mq=15;R.cq=16;R.Cq=17;R.lq=18;R.Ao=99;R.ah=[[R.Zg,R.$g],[R.Zg,R.Zg],[R.$g,R.$g],[R.$g,R.Zg],[R.Al,R.Al],[R.Cl,R.Cl],[R.Yg,R.Yg],[R.zl,R.zl],[R.Bl,R.Bl]];R.Oh=!1;
R.init=function(a){Object.getPrototypeOf(this).init.call(this);this.fd?this.fd.reset():this.fd=new Mi(this.Li);this.fd.Xk(a.Z);for(var b=this.fd,c=id(a),d=0;d<c.length;d++)b.getName(c[d].Pa(),"VARIABLE");b=this.fd;c=Ni(a);c=c[0].concat(c[1]);for(d=0;d<c.length;d++)b.getName(c[d][0],"PROCEDURE");b=[];c=ff(a);d=Object.create(null);for(var e=0,f;f=c[e];e++){var h=f.Sq;!h&&f.fp&&(h=f.fp,Wi[f.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+f.type+
"')"),Wi[f.type]=!0));if(h)for(f=h(),h=0;h<f.length;h++)d[f[h]]=!0}d=Object.keys(d);for(c=0;c<d.length;c++)b.push(this.fd.getName(d[c],"DEVELOPER_VARIABLE"));a=id(a);for(c=0;c<a.length;c++)b.push(this.fd.getName(a[c].Pa(),"VARIABLE"));b.length&&(this.gj.variables="var "+b.join(", ")+";");this.Oh=!0};R.finish=function(a){var b=gd(this.gj);a=Object.getPrototypeOf(this).finish.call(this,a);this.Oh=!1;this.fd.reset();return b.join("\n\n")+"\n\n\n"+a};R.tn=function(a){return a+";\n"};
R.Kp=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+a+"'"};R.Xq=function(a){return a.split(/\n/g).map(this.Kp).join(" + '\\n' +\n")};
R.Pk=function(a,b){var c="";if(!a.u||!a.u.K){var d=a.Vb.text;d&&(d=Da(d,this.Sn-3),c+=sj(d+"\n","// "));for(var e=0;e<a.v.length;e++)if(a.v[e].type==1){var f=a.v[e].connection.G();if(f){d=[];f=mb(f,!0);for(var h=0;h<f.length;h++){var k=f[h].Vb.text;k&&d.push(k)}d.length&&d.push("");(d=d.join("\n"))&&(c+=sj(d,"// "))}}}a=a.B&&a.B.G();a=qj(this,a);return c+b+a};
R.Qq=function(a,b,c,d,e){c=c||0;e=e||this.Ao;a.j.options.gi&&c--;var f=a.j.options.gi?"1":"0";a=c>0?tj(this,a,b,this.Yg)||f:c<0?tj(this,a,b,this.Dl)||f:d?tj(this,a,b,this.El)||f:tj(this,a,b,e)||f;if(/^\s*-?\d+(\.\d+)?\s*$/.test(a))a=Number(a)+c,d&&(a=-a);else{if(c>0){a=a+" + "+c;var h=this.Yg}else c<0&&(a=a+" - "+-c,h=this.Dl);d&&(a=c?"-("+a+")":"-"+a,h=this.El);h=Math.floor(h);e=Math.floor(e);h&&e>=h&&(a="("+a+")")}return a};function wj(){}wj.prototype.qk=function(){};wj.prototype.pk=function(){};wj.prototype.rk=function(){};function xj(){xj.i.constructor.call(this);this.Gi=!1}H(xj,wj);function ag(a,b,c){b instanceof P?(b=!b.getParent()&&nd(b),a.Gi=b&&!c):a.Gi=nd(b);return a.Gi};function yj(a,b){yj.i.constructor.call(this,b);this.Rj=a}H(yj,Od);yj.prototype.type="trashcan_open";yj.prototype.P=function(){var a=yj.i.P.call(this);a.isOpen=this.Rj;return a};yj.prototype.L=function(a){yj.i.L.call(this,a);this.Rj=a.isOpen};B(Mc,"trashcan_open",yj);function Gi(a){Gi.i.constructor.call(this);this.g=a;this.id="trashcan";this.Vc=[];this.Hb=null;this.g.options.Zh<=0||(a=new he({scrollbars:!0,parentWorkspace:this.g,rtl:this.g.o,oneBasedIndex:this.g.options.gi,renderer:this.g.options.Lk,rendererOverrides:this.g.options.Mk,move:{scrollbars:!0}}),a.Cb=this.g.Cb==3?2:3,this.Hb=new (Vc(Rc,this.g.options,!0))(a),tf(this.g,this.Cp.bind(this)))}H(Gi,xj);g=Gi.prototype;g.ye=47;g.Qg=44;g.te=16;g.vl=20;g.vo=20;g.Wg=10;g.Mi=0;g.Ni=32;g.no=.1;g.Ph=!1;g.gk=0;
g.m=null;g.Bi=null;g.Vj=0;g.cd=0;g.Uh=0;g.Di=0;g.Dm=!1;
g.va=function(){this.m=z(Vb,{"class":"blocklyTrash"},null);var a=String(Math.random()).substring(2);var b=z(Ob,{id:"blocklyTrashBodyClipPath"+a},this.m);z($b,{width:this.ye,height:this.Qg,y:this.te},b);var c=z(Wb,{width:96,x:-this.Mi,height:124,y:-this.Ni,"clip-path":"url(#blocklyTrashBodyClipPath"+a+")"},this.m);c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.ji+"sprites.png");b=z(Ob,{id:"blocklyTrashLidClipPath"+a},this.m);z($b,{width:this.ye,height:this.te},b);this.Bi=
z(Wb,{width:96,x:-this.Mi,height:124,y:-this.Ni,"clip-path":"url(#blocklyTrashLidClipPath"+a+")"},this.m);this.Bi.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.g.options.ji+"sprites.png");u(this.m,"mousedown",this,this.No);u(this.m,"mouseup",this,this.click);u(c,"mouseover",this,this.Ap);u(c,"mouseout",this,this.yp);this.Qi();return this.m};
g.init=function(){this.g.options.Zh>0&&(kc(this.Hb.va(ac),K(this.g)),this.Hb.init(this.g));Db(this.g.Ec,{component:this,weight:1,Rc:[Lb,Gb,Kb,Jb]});this.Dm=!0;this.ef(!1)};g.dispose=function(){Eb(this.g.Ec,"trashcan");this.m&&(jc(this.m),this.m=null);this.g=this.Bi=null;clearTimeout(this.Vj)};
g.position=function(a,b){if(this.Dm){var c=new Ga(this.ye,this.Qg+this.te);var d=this.vo;var e=this.vl,f=this.g,h=f.W&&!!f.W.X;(a.Wp.position!==2?0:1)===0?(d=a.Oi.left+d,h&&f.o&&(d+=ke)):(d=a.Oi.left+a.Jn.width-c.width-d,h&&!f.o&&(d-=ke));a=a.Oi.top+a.Jn.height-c.height-e;f.W&&f.W.ea&&(a-=ke);d=new ya(a,a+c.height,d,d+c.width);c=this.vl;f=d.left;a=d.right-d.left;e=d.bottom-d.top;h=0;for(var k;k=b[h];h++)d.left>k.right||d.right<k.left||d.top>k.bottom||d.bottom<k.top||(d=k.top-e-c,d=new ya(d,d+e,f,
f+a),h=-1);b=d;this.Di=b.top;this.Uh=b.left;this.m.setAttribute("transform","translate("+this.Uh+","+this.Di+")")}};g.Sf=function(){return new ya(this.Di,this.Di+this.Qg+this.te,this.Uh,this.Uh+this.ye)};g.getClientRect=function(){if(!this.m)return null;var a=this.m.getBoundingClientRect(),b=a.top+this.Ni-this.Wg;a=a.left+this.Mi-this.Wg;return new ya(b,b+this.te+this.Qg+2*this.Wg,a,a+this.ye+2*this.Wg)};g.qk=function(){this.ef(this.Gi)};g.pk=function(){this.ef(!1)};
g.rk=function(){setTimeout(this.ef.bind(this,!1),100)};g.ef=function(a){this.Ph!=a&&(clearTimeout(this.Vj),this.Ph=a,this.Qi())};g.Qi=function(){this.cd+=this.Ph?.2:-.2;this.cd=Math.min(Math.max(this.cd,this.gk),1);zj(this,this.cd*45);this.m.style.opacity=.4+this.cd*.4;this.cd>this.gk&&this.cd<1&&(this.Vj=setTimeout(this.Qi.bind(this),20))};function zj(a,b){var c=a.g.Cb==3;a.Bi.setAttribute("transform","rotate("+(c?-b:b)+","+(c?4:a.ye-4)+","+(a.te-2)+")")}
g.click=function(){if(this.Vc.length&&(!this.Hb||!this.Hb.isVisible())){var a=this.Vc.map(pd);this.Hb.show(a);hj(this,!0)}};function hj(a,b){a=new (G("trashcan_open"))(b,a.g.id);D(a)}g.No=function(a){this.Hb&&this.Hb.isVisible()||!this.Vc.length||a.stopPropagation()};g.Ap=function(){this.Vc.length&&this.ef(!0)};g.yp=function(){this.ef(!1)};
g.Cp=function(a){if(!(this.g.options.Zh<=0)&&a.type=="delete"&&a.Ze.tagName&&a.Ze.tagName.toLowerCase()!="shadow"){for(var b=a=a.Ze.cloneNode(!0);b;){b.removeAttribute&&(b.removeAttribute("x"),b.removeAttribute("y"),b.removeAttribute("id"),b.removeAttribute("disabled"),b.nodeName=="comment"&&(b.removeAttribute("h"),b.removeAttribute("w"),b.removeAttribute("pinned")));var c=b.firstChild||b.nextSibling;if(!c)for(c=b.parentNode;c;){if(c.nextSibling){c=c.nextSibling;break}c=c.parentNode}b=c}a=od(a);if(this.Vc.indexOf(a)==
-1){for(this.Vc.unshift(a);this.Vc.length>this.g.options.Zh;)this.Vc.pop();this.gk=a=this.no;this.Ph||zj(this,a*45)}}};function Aj(a){Aj.i.constructor.call(this);a.vg=this.Op.bind(this);var b=this.g=new ki(a),c=new ci(this.g,this);b.zb=c;b.$b=b.zb.$b.bind(b.zb);this.g.ad=!0;this.g.ya(this.Jc);this.id=gb();this.o=!!a.o;this.ud=a.Cb;this.uj=[];this.Xh=[];this.zf=[];this.Ea=[];this.Ck=[];this.kf=this.g.pa.C().eh;this.O=null}H(Aj,xj);g=Aj.prototype;g.Ad=!0;g.Jc=!1;g.Dd=!0;g.ma=8;g.ue=Aj.prototype.ma;g.mo=Aj.prototype.ue*3;g.Do=2.5;g.yd=0;g.Jj=0;g.Yo=70;
g.va=function(a){this.m=z(a,{"class":"blocklyFlyout",style:"display: none"},null);this.La=z(Yb,{"class":"blocklyFlyoutBackground"},this.m);this.m.appendChild(this.g.va());this.g.Na.subscribe(this.La,"flyoutBackgroundColour","fill");this.g.Na.subscribe(this.La,"flyoutOpacity","fill-opacity");return this.m};
g.init=function(a){this.O=a;this.g.O=a;this.g.W=new ie(this.g,!1,!0,"blocklyFlyoutScrollbar",this.Do);this.cb();Array.prototype.push.apply(this.uj,t(this.m,"wheel",this,this.bq));this.Ad||(this.Dh=this.vj.bind(this),tf(this.O,this.Dh));Array.prototype.push.apply(this.uj,t(this.La,"mousedown",this,this.hd));this.g.Gd=this.O.Gd.bind(this.O);this.g.Xk(this.O.Z);var b=this.g;b.ki=new ef(b);Db(a.Ec,{component:this,weight:1,Rc:[Gb,Kb]})};
g.dispose=function(){this.cb();Eb(this.g.Ec,this.id);v(this.uj);this.Dh&&(kb(this.O.Ea,this.Dh),this.Dh=null);this.g&&(this.g.Na.unsubscribe(this.La),this.g.O=null,this.g.dispose(),this.g=null);this.m&&(jc(this.m),this.m=null);this.O=this.La=null};g.Wf=function(){return this.yd};g.isVisible=function(){return this.Jc};g.ya=function(a){var b=a!=this.isVisible();this.Jc=a;b&&(this.Ad||ui(this.g),this.Lg())};g.ee=function(a){var b=a!=this.Dd;this.Dd=a;b&&this.Lg()};
g.Lg=function(){var a=this.Dd?this.isVisible():!1;this.m.style.display=a?"block":"none";this.g.W.ee(a)};g.cb=function(){if(this.isVisible()){this.ya(!1);for(var a=0,b;b=this.Ea[a];a++)v(b);this.Ea.length=0;this.nd&&(kb(this.g.Ea,this.nd),this.nd=null)}};
g.show=function(a){this.g.Ua(!1);this.cb();Bj(this);typeof a=="string"&&(a=Cj(this,a));this.ya(!0);a=fe(a);a=Dj(this,a);Ej(this,a.To,a.cp);this.Ea.push(t(this.La,"mouseover",this,function(){for(var b=this.g.ra(!1),c=0,d;d=b[c];c++)d.sg()}));this.yd=0;this.g.Ua(!0);this.Gk();this.vj();this.position();this.nd=this.Gk.bind(this);tf(this.g,this.nd)};
function Dj(a,b){var c=[],d=[];a.Ck.length=0;for(var e=a.mo,f=0,h;h=b[f];f++){if(h.custom){var k=Cj(a,h.custom);k=fe(k);b.splice.apply(b,[f,1].concat(k));h=b[f]}switch(h.kind.toUpperCase()){case "BLOCK":k=h;var l=k;h=null;var m=l.blockxml;m&&typeof m!="string"?h=m:m&&typeof m=="string"?(h=pd(m),l.blockxml=h):l.type&&(h=I("xml"),h.setAttribute("type",l.type),h.setAttribute("disabled",l.disabled),l.blockxml=h);if(!h)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");
l=h;h=a;m=rd(l,h.g);m.isEnabled()||h.Ck.push(m);h=m;k=parseInt(k.gap||l.getAttribute("gap"),10);d.push(isNaN(k)?e:k);c.push({type:"block",block:h});break;case "SEP":k=d;l=e;h=parseInt(h.gap,10);!isNaN(h)&&k.length>0?k[k.length-1]=h:k.push(l);break;case "LABEL":k=Fj(a,h,!0);c.push({type:"button",button:k});d.push(e);break;case "BUTTON":k=Fj(a,h,!1),c.push({type:"button",button:k}),d.push(e)}}return{To:c,cp:d}}
function Cj(a,b){b=a.g.O.cl[b]||null;if(typeof b!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");a=b(a.g.O);if(!Array.isArray(a))throw new TypeError("Result of toolbox category callback must be an array.");return a}function Fj(a,b,c){if(!ka.lo)throw Error("Missing require for Blockly.FlyoutButton");return new ka.lo(a.g,a.O,b,c)}
function Bj(a){for(var b=a.g.ra(!1),c=0,d;d=b[c];c++)d.j==a.g&&d.dispose(!1,!1);for(c=0;c<a.Xh.length;c++)if(b=a.Xh[c])Te(b),jc(b);for(c=a.Xh.length=0;b=a.zf[c];c++)b.dispose();a.zf.length=0;a.g.ki.clear()}function Gj(a,b){return function(c){var d=a.O.Gd(c);d&&(Dg(d,b),Cg(d,c,a))}}g.hd=function(a){var b=this.O.Gd(a);b&&Cg(b,a,this)};
function yg(a,b){var c=null;C++;var d=a.O.Le();a.O.Ua(!1);try{var e=a.O;if(!b.I())throw Error("oldBlock is not rendered.");var f=ld(b,!0);e.Ua(!1);var h=rd(f,e);if(!h.I())throw Error("block is not rendered.");var k=$a(e.xa),l=$a(a.g.xa),m=b.ba();m.scale(a.g.scale);var n=wa(xa(l,m),k);n.scale(1/e.scale);h.moveBy(n.x,n.y);c=h}finally{C--}Ee();b=xd(a.O,d);if(C==0){F(!0);for(d=0;d<b.length;d++)e=b[d],D(new (G("var_create"))(e));D(new (G("create"))(c))}a.Ad?a.cb():a.vj();return c}
g.vj=function(){for(var a=this.g.ra(!1),b=0,c;c=a[b];b++)if(this.Ck.indexOf(c)==-1)for(var d=qf(this.O,lb(c));c;)c.pd(d),c=nb(c)};
g.Gk=function(){this.nd&&kb(this.g.Ea,this.nd);this.g.scale=this.O.scale;for(var a=0,b=this.g.ra(!1),c=0,d;d=b[c];c++){var e=eg(d).width;d.u&&(e-=this.kf);a=Math.max(a,e)}for(c=0;d=this.zf[c];c++)a=Math.max(a,d.width);a+=this.ue*1.5+this.kf;a*=this.g.scale;a+=ke;if(this.yd!=a){for(c=0;d=b[c];c++){if(this.o){e=d.ba().x;var f=a/this.g.scale-this.ue;d.u||(f-=this.kf);d.moveBy(f-e,0)}d.om&&(e=d.om,f=d,d=eg(f),e.setAttribute("width",d.width),e.setAttribute("height",d.height),f=f.ba(),e.setAttribute("y",
f.y),e.setAttribute("x",this.o?f.x-d.width:f.x))}if(this.o)for(c=0;d=this.zf[c];c++)b=d.Uq().y,d.moveTo(a/this.g.scale-d.width-this.ue-this.kf,b);this.O.Cb!=this.ud||this.ud!=2||this.O.la||this.O.translate(this.O.scrollX+a,this.O.scrollY);this.yd=a;this.position();ui(this.O)}this.nd&&tf(this.g,this.nd)};function wg(a){return a.g.W?a.g.W.isVisible():!1};function Hj(a){Hj.i.constructor.call(this,a)}H(Hj,Aj);g=Hj.prototype;g.Op=function(a){if(this.isVisible()){var b=this.g.zb,c=b.Id(),d=ai(b);b=$h(b);typeof a.y=="number"&&(this.g.scrollY=-(c.top+(c.height-d.height)*a.y));this.g.translate(this.g.scrollX+b.left,this.g.scrollY+b.top)}};
g.position=function(){if(this.isVisible()&&this.O.isVisible()){var a=ai(this.O.zb);this.Jj=a.height;var b=this.yd-this.ma;a=a.height-2*this.ma;var c=this.ud==3,d=b+this.ma;d=["M "+(c?d:0)+",0"];d.push("h",c?-b:b);d.push("a",this.ma,this.ma,0,0,c?0:1,c?-this.ma:this.ma,this.ma);d.push("v",Math.max(0,a));d.push("a",this.ma,this.ma,0,0,c?0:1,c?this.ma:-this.ma,this.ma);d.push("h",c?b:-b);d.push("z");this.La.setAttribute("d",d.join(" "));this.isVisible()?(c=this.O.zb,b=$h(c),a=ai(c),c=Zh(c),c=this.O.Cb==
this.ud?this.O.la?this.ud==2?c.width:a.width-this.yd:this.ud==2?0:a.width:this.ud==2?0:a.width+b.left-this.yd):c=0;b=this.yd;a=this.Jj;this.m.setAttribute("width",b);this.m.setAttribute("height",a);wi(this.g,b,a);this.m.tagName=="svg"?lc(this.m,"translate("+c+"px,0px)"):this.m.setAttribute("transform","translate("+c+",0)");if(b=this.g.W)b.ri(c,0),b.resize(),b.ea&&b.ea.setPosition(b.ea.position.x,b.ea.position.y),b.X&&b.X.setPosition(b.X.position.x,b.X.position.y)}};
g.sn=function(){var a=this.g.W;a.X&&a.X.set(0,!0)};g.bq=function(a){var b=db(a);if(b.y){var c=this.g.zb,d=c.Id();b=ai(c).top-d.top+b.y;c=this.g.W;c.X&&c.X.set(b,!0);Qg();Fc()}a.preventDefault();a.stopPropagation()};
function Ej(a,b,c){a.g.scale=a.O.scale;for(var d=a.ue,e=a.o?d:d+a.kf,f=0,h;h=b[f];f++)if(h.type=="block"){h=h.block;for(var k=mb(h,!1),l=0,m;m=k[l];l++)m.xb=!0;h.V();l=h.I();k=eg(h);m=h.u?e-a.kf:e;h.moveBy(m,d);var n=a,w=h,y=k,E=f;m=z($b,{"fill-opacity":0,x:a.o?m-k.width:m,y:d,height:y.height,width:y.width},null);m.Qb=w;Pe(m);n.g.xa.insertBefore(m,w.I());w.om=m;n.Xh[E]=m;n=a;n.Ea.push(t(l,"mousedown",null,Gj(n,h)));n.Ea.push(t(m,"mousedown",null,Gj(n,h)));n.Ea.push(u(l,"mouseenter",h,h.fh));n.Ea.push(u(l,
"mouseleave",h,h.sg));n.Ea.push(u(m,"mouseenter",h,h.fh));n.Ea.push(u(m,"mouseleave",h,h.sg));d+=k.height+c[f]}else h.type=="button"&&(k=a,l=h.button,m=e,n=d,w=l.va(),l.moveTo(m,n),l.show(),k.Ea.push(t(w,"mousedown",k,k.hd)),k.zf.push(l),d+=h.button.height+c[f])}g.getClientRect=function(){if(!this.m||this.Ad||!this.isVisible())return null;var a=this.m.getBoundingClientRect(),b=a.left;return this.ud==2?new ya(-1E9,1E9,-1E9,b+a.width):new ya(-1E9,1E9,b,1E9)};B(Rc,"default",Hj);var Ij={am:"\u12a0\u121b\u122d\u129b",ar:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",be:"\u0431\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0456","be-tarask":"Tara\u0161kievica",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a",bn:"\u09ac\u09be\u0982\u09b2\u09be",br:"Brezhoneg",ca:"Catal\u00e0",cs:"\u010cesky",da:"Dansk",de:"Deutsch",el:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",en:"English",eo:"Esperanto",es:"Espa\u00f1ol",eu:"Euskara",fa:"\u0641\u0627\u0631\u0633\u06cc",
fi:"Suomi",fo:"F\u00f8royskt",fr:"Fran\u00e7ais",gl:"Galego",ha:"Hausa",he:"\u05e2\u05d1\u05e8\u05d9\u05ea",hi:"\u0939\u093f\u0928\u094d\u0926\u0940",hr:"Hrvatski",hu:"Magyar",hy:"\u0570\u0561\u0575\u0565\u0580\u0567\u0576",ia:"Interlingua",id:"Bahasa Indonesia",ig:"As\u1ee5s\u1ee5 Igbo",is:"\u00cdslenska",it:"Italiano",ja:"\u65e5\u672c\u8a9e",kab:"Taqbaylit",kn:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",ko:"\ud55c\uad6d\uc5b4",lt:"Lietuvi\u0173",lv:"Latvie\u0161u",ms:"Bahasa Melayu",my:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u102c",
nb:"Norsk (bokm\u00e5l)",nl:"Nederlands, Vlaams",pl:"Polski",pms:"Piemont\u00e8is",pt:"Portugu\u00eas","pt-br":"Portugu\u00eas Brasileiro",ro:"Rom\u00e2n\u0103",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",sc:"Sardu",sk:"Sloven\u010dina",sl:"Sloven\u0161\u010dina",sq:"Shqip",sr:"\u0421\u0440\u043f\u0441\u043a\u0438","sr-latn":"Srpski",sv:"Svenska",th:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",ti:"\u1275\u130d\u122d\u129b",tr:"T\u00fcrk\u00e7e",uk:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",
ur:"\u0627\u064f\u0631\u062f\u064f\u0648\u202c",vi:"Ti\u1ebfng Vi\u1ec7t",yo:"\u00c8d\u00e8 Yor\u00f9b\u00e1","zh-hans":"\u7b80\u4f53\u4e2d\u6587","zh-hant":"\u6b63\u9ad4\u4e2d\u6587"},Jj=window.BlocklyGamesLang,Kj=window.BlocklyGamesLanguages,Lj=["ar","fa","he","ur"].includes(Jj),Mj=/\.html$/.test(window.location.pathname),S=document.getElementById.bind(document);
function Nj(a){try{if(a.lineno||a.colno){var b=Date.now();if(!(Nj.Km+1E4>b)){Nj.Km=b;var c=new XMLHttpRequest,d="error="+encodeURIComponent((a.error&&a.error.stack||a.message+" "+a.filename+" "+a.lineno+":"+a.colno).trim())+"&url="+encodeURIComponent(window.location);c.open("POST","/scripts/errorReporter.py");c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");c.send(d);console.log("Error reported.")}}}catch(e){console.log(a.error)}}Nj.Km=0;Mj||window.addEventListener("error",Nj);
function Oj(a,b,c){var d=Math,e=d.floor,f=Number;a=(a=window.location.search.match(new RegExp("[?&]"+a+"=([^&]+)")))?decodeURIComponent(a[1].replace(/\+/g,"%20")):"NaN";d=e.call(d,f(a));return isNaN(d)?b:Math.max(b,Math.min(d,c))}var T=Oj("level",1,10);
function Pj(a){document.title=U("Games.name",!0)+(a&&" : ")+a;document.dir=Lj?"rtl":"ltr";document.head.parentElement.setAttribute("lang",Jj);if(a=S("languageMenu")){for(var b=[],c=ba(Kj),d=c.next();!d.done;d=c.next())d=d.value,b.push([Ij[d],d]);b.sort(function(e,f){return e[0]>f[0]?1:e[0]<f[0]?-1:0});a.options.length=0;b=ba(b);for(c=b.next();!c.done;c=b.next())d=ba(c.value),c=d.next().value,d=d.next().value,c=new Option(c,d),d===Jj&&(c.selected=!0),a.options.add(c);a.options.length<=1&&(a.style.display=
"none")}for(a=1;a<=10;a++)b=S("level"+a),c=!!Qj(a),b&&c&&(b.className+=" level_done");(a=document.querySelector('meta[name="viewport"]'))&&screen.availWidth<725&&a.setAttribute("content","width=725, initial-scale=.35, user-scalable=no")}function Qj(a){var b=Rj;try{var c=window.localStorage[b+a]}catch(d){}return c}
function Sj(a,b){if(!a)throw TypeError("Element not found: "+a);typeof a==="string"&&(a=S(a));a.addEventListener("click",b,!0);a.addEventListener("touchend",function(c){c.preventDefault();b(c)},!0)}function U(a,b){var c=window.BlocklyGamesMsg[a];c===void 0&&(c="[Unknown message: "+a+"]");return b?Tj(c):c}function Tj(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};function Uj(a,b){for(var c=0,d=0;d<b.length;d++)for(var e=b[d];e;)setTimeout(e.ce.bind(e,a),c),e=nb(e),c+=10}function Vj(a,b){if(nd(a))Array.prototype.push.apply(b,mb(a,!1));else{a=kd(a,!1);for(var c=0;c<a.length;c++)Vj(a[c],b)}}function Wj(a){var b=[];a=a.ra(!0);for(var c=0;c<a.length;c++)Vj(a[c],b);return b}function Xj(a,b){F(b);var c=a.shift();c&&(c.j?(c.dispose(!1,!0),setTimeout(Xj,10,a,b)):Xj(a,b));F(!1)}
vh.register({bb:function(){return q.UNDO},wa:function(a){return a.j.le.length>0?"enabled":"disabled"},oa:function(a){sf(a.j,!1)},Ab:"workspace",id:"undoWorkspace",weight:1});vh.register({bb:function(){return q.REDO},wa:function(a){return a.j.rg.length>0?"enabled":"disabled"},oa:function(a){sf(a.j,!0)},Ab:"workspace",id:"redoWorkspace",weight:2});
vh.register({bb:function(){return q.CLEAN_UP},wa:function(a){return a.j.Qa()?a.j.ra(!1).length>1?"enabled":"disabled":"hidden"},oa:function(a){a=a.j;a.Ua(!1);F(!0);for(var b=a.ra(!0),c=0,d=0,e;e=b[d];d++)if(e.Qa()){var f=e.ba();e.moveBy(-f.x,c-f.y);Nh(e);c=e.ba().y+eg(e).height+a.pa.C().Xg}F(!1);a.Ua(!0)},Ab:"workspace",id:"cleanWorkspace",weight:3});
vh.register({bb:function(){return q.COLLAPSE_ALL},wa:function(a){if(a.j.options.collapse){a=a.j.ra(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(!c.isCollapsed())return"enabled";c=nb(c)}return"disabled"}return"hidden"},oa:function(a){Uj(!0,a.j.ra(!0))},Ab:"workspace",id:"collapseWorkspace",weight:4});
vh.register({bb:function(){return q.EXPAND_ALL},wa:function(a){if(a.j.options.collapse){a=a.j.ra(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(c.isCollapsed())return"enabled";c=nb(c)}return"disabled"}return"hidden"},oa:function(a){Uj(!1,a.j.ra(!0))},Ab:"workspace",id:"expandWorkspace",weight:5});
vh.register({bb:function(a){if(a.j)return a=Wj(a.j).length,a==1?q.DELETE_BLOCK:q.DELETE_X_BLOCKS.replace("%1",String(a))},wa:function(a){if(a.j)return Wj(a.j).length>0?"enabled":"disabled"},oa:function(a){if(a.j){Ph(a.j);var b=Wj(a.j),c=gb();b.length<2?Xj(b,c):lf(q.DELETE_ALL_BLOCKS.replace("%1",b.length),function(d){d&&Xj(b,c)})}},Ab:"workspace",id:"workspaceDelete",weight:6});
vh.register({bb:function(){return q.DUPLICATE_BLOCK},wa:function(a){a=a.block;return!a.xb&&nd(a)&&a.Qa()?(rf(a.j)?qf(a.j,lb(a,!0)):1)?"enabled":"disabled":"hidden"},oa:function(a){if(a.block){a=a.block;var b=zi,c=cj;fj(a);yi(a.j);zi=b;cj=c}},Ab:"block",id:"blockDuplicate",weight:1});
vh.register({bb:function(a){return a.block.Ub?q.REMOVE_COMMENT:q.ADD_COMMENT},wa:function(a){a=a.block;return Ka||a.xb||!a.j.options.Qo||a.isCollapsed()||!a.Kb()?"hidden":"enabled"},oa:function(a){a=a.block;a.Ub?a.df(null):a.df("")},Ab:"block",id:"blockComment",weight:2});
vh.register({bb:function(a){return Lf(a.block)?q.EXTERNAL_INPUTS:q.INLINE_INPUTS},wa:function(a){a=a.block;if(!a.xb&&a.Qa()&&!a.isCollapsed())for(var b=1;b<a.v.length;b++)if(a.v[b-1].type!=3&&a.v[b].type!=3)return"enabled";return"hidden"},oa:function(a){a.block.ge(!Lf(a.block))},Ab:"block",id:"blockInline",weight:3});
vh.register({bb:function(a){return a.block.isCollapsed()?q.EXPAND_BLOCK:q.COLLAPSE_BLOCK},wa:function(a){a=a.block;return!a.xb&&a.Qa()&&a.j.options.collapse?"enabled":"hidden"},oa:function(a){a.block.ce(!a.block.isCollapsed())},Ab:"block",id:"blockCollapseExpand",weight:4});
vh.register({bb:function(a){return a.block.isEnabled()?q.DISABLE_BLOCK:q.ENABLE_BLOCK},wa:function(a){a=a.block;return!a.xb&&a.j.options.disable&&a.Kb()?jh(a)?"disabled":"enabled":"hidden"},oa:function(a){a=a.block;var b=Wc;b||F(!0);a.pd(!a.isEnabled());b||F(!1)},Ab:"block",id:"blockDisable",weight:5});
vh.register({bb:function(a){var b=a.block;a=mb(b,!1).length;(b=nb(b))&&(a-=mb(b,!1).length);return a==1?q.DELETE_BLOCK:q.DELETE_X_BLOCKS.replace("%1",String(a))},wa:function(a){return!a.block.xb&&nd(a.block)?"enabled":"hidden"},oa:function(a){F(!0);a.block&&ej(a.block);F(!1)},Ab:"block",id:"blockDelete",weight:6});
vh.register({bb:function(){return q.HELP},wa:function(a){a=a.block;return(typeof a.Te=="function"?a.Te():a.Te)?"enabled":"hidden"},oa:function(a){a.block.showHelp()},Ab:"block",id:"blockHelp",weight:7});function V(a,b){return" "+a+","+b+" "}function Yj(a,b){return" "+a+b.join("")}function Zj(a,b){return" M "+a+","+b+" "}function M(a,b){return" m "+a+","+b+" "}function ak(a,b){return" l "+a+","+b+" "}function N(a,b){return" "+a+" "+b+" "}function bk(a,b,c){return"a "+b+" "+b+" "+a+c};function ck(){this.kc=0;this.Eo=3;this.Db=5;this.yl=8;this.Ya=10;this.Kl=this.Db;this.xf=15;this.xe=5;this.eh=8;this.zo=15;this.Ji=4;this.xo=12;this.Xn=16;this.Wn=this.ll=this.xf;this.ma=8;this.Io=this.uf=15;this.Il=0;this.Jl=20;this.Pn=4;this.Jo=this.Db;this.Ko=this.Ya;this.Rn=this.Db;this.Qn=this.Ya;this.jl=!1;this.Go=15;this.Ho=100;this.Fo=15;this.Xg=24;this.Zn=14.5;this.Yn=this.xf+11;this.ao=2;this.$n=this.Xg;this.Hl=M(0,0);this.so=12;this.uo=6;this.tf=11;this.re="normal";this.qe="sans-serif";
this.rl=this.Ug=-1;this.Tg=4;this.ml=16;this.rf=5;this.bo="#fff";this.Ii=!Ka&&!La;this.ol=this.ml;this.ho=this.co=this.ql=!1;this.jo=this.rf;this.sf=12;this.io="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";
this.mi=String(Math.random()).substring(2);this.sj="";this.tj=null;this.hm="";this.If=this.$l=this.ij=null;this.kl="#cc0a0a";this.wl="#4286f4";this.Sg=100;this.Ll=5;this.Rg=10;this.Un=2;this.Vn=4;this.po="#000000";this.ul=.2;this.Gl={Co:1,ve:2}}g=ck.prototype;
g.init=function(){this.se=this.$j();this.ve=this.ak();this.we=this.ck();this.Ki=this.bk();var a=this.ma;this.Vg={width:a,height:a,Bk:bk("0 0,0",a,V(-a,a)),ii:bk("0 0,0",a,V(a,a))};a=this.ma;this.vf={dl:M(0,a)+bk("0 0,1",a,V(a,-a)),Yp:bk("0 0,1",a,V(a,a)),Oo:bk("0 0,1",a,V(-a,a)),Vi:bk("0 0,1",a,V(-a,-a)),Lp:a}};
g.yg=function(){this.jh=Object.create(null);var a=document.createElement("span");a.style.font=this.re+" "+(this.tf+"pt ")+this.qe;a.textContent="Hg";var b=document.createElement("div");b.style.width="1px";b.style.height=0;var c=document.createElement("div");c.style.display="flex";c.style.position="fixed";c.style.top=0;c.style.left=0;c.appendChild(a);c.appendChild(b);document.body.appendChild(c);try{var d={};c.style.alignItems="baseline";d.Tb=b.offsetTop-a.offsetTop;c.style.alignItems="flex-end";d.height=
b.offsetTop-a.offsetTop}finally{document.body.removeChild(c)}a=d;this.Ug=a.height;this.rl=a.Tb};function Qh(a,b){var c="auto_"+b;a.jh[c]||(a.jh[c]=dk({colourPrimary:b}));return{style:a.jh[c],name:c}}function Mh(a,b){return a.jh[b||""]||(b&&b.indexOf("auto_")==0?Qh(a,b.substring(5)).style:dk({colourPrimary:"#000000"}))}
function dk(a){var b={};a&&fd(b,a);a=ob(b.colourPrimary||"#000");b.Cd=a.Yf;b.colourSecondary?a=ob(b.colourSecondary).Yf:(a=b.Cd,a=ta("#fff",a,.6)||a);b.nh=a;b.colourTertiary?a=ob(b.colourTertiary).Yf:(a=b.Cd,a=ta("#fff",a,.3)||a);b.Fe=a;b.tc=b.hat||"";return b}g.dispose=function(){this.tj&&jc(this.tj);this.ij&&jc(this.ij);this.$l&&jc(this.$l);this.If=null};g.$j=function(){var a=this.so,b=this.uo;return{height:a,width:b,path:" l"+[V(b,a/4),V(-b*2,a/2),V(b,a/4)].join("")}};
g.ck=function(){var a=this.Go,b=this.Ho;return{height:a,width:b,path:Yj("c",[V(30,-a),V(70,-a),V(b,0)])}};g.bk=function(){function a(f){f=f?-1:1;var h=-f,k=c/2;return Yj("c",[V(0,f*(k+2.5)),V(-b,h*(k+.5)),V(-b,f*k)])+Yj("s",[V(b,h*2.5),V(b,f*k)])}var b=this.eh,c=this.xf,d=a(!0),e=a(!1);return{type:this.Gl.Co,width:b,height:c,Mb:e,og:d}};
g.ak=function(){function a(h){return" l"+[V(h*d,c),V(h*3,0),V(h*d,-c)].join("")}var b=this.zo,c=this.Ji,d=(b-3)/2,e=a(1),f=a(-1);return{type:this.Gl.ve,width:b,height:c,ld:e,hn:f}};function $f(a,b){switch(b.type){case 1:case 2:return a.Ki;case 4:case 3:return a.ve;default:throw Error("Unknown connection type");}}
g.va=function(a,b,c){c=this.Aj(c);b="blockly-renderer-style-"+b;this.If=document.getElementById(b);c=c.join("\n");if(this.If)this.If.firstChild.textContent=c;else{var d=document.createElement("style");d.id=b;d.appendChild(document.createTextNode(c));document.head.insertBefore(d,document.head.firstChild);this.If=d}a=z(Pb,{},a);b=z(Ub,{id:"blocklyEmbossFilter"+this.mi},a);z(Rb,{"in":"SourceAlpha",stdDeviation:1,result:"blur"},b);c=z(Tb,{"in":"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,
"lighting-color":"white",result:"specOut"},b);z(Sb,{x:-5E3,y:-1E4,z:2E4},c);z(Qb,{"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},b);z(Qb,{"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},b);this.sj=b.id;this.tj=b;a=z(Zb,{id:"blocklyDisabledPattern"+this.mi,patternUnits:"userSpaceOnUse",width:10,height:10},a);z($b,{width:10,height:10,fill:"#aaa"},a);z(Yb,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},a);this.hm=a.id;this.ij=a};
g.Aj=function(a){return[a+" .blocklyText, ",a+" .blocklyFlyoutLabelText {","font: "+this.re+" "+this.tf+"pt "+this.qe+";","}",a+" .blocklyText {","fill: #fff;","}",a+" .blocklyNonEditableText>rect,",a+" .blocklyEditableText>rect {","fill: "+this.bo+";","fill-opacity: .6;","stroke: none;","}",a+" .blocklyNonEditableText>text,",a+" .blocklyEditableText>text {","fill: #000;","}",a+" .blocklyFlyoutLabelText {","fill: #000;","}",a+" .blocklyText.blocklyBubbleText {","fill: #000;","}",a+" .blocklyEditableText:not(.editing):hover>rect {",
"stroke: #fff;","stroke-width: 2;","}",a+" .blocklyHtmlInput {","font-family: "+this.qe+";","font-weight: "+this.re+";","}",a+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",a+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",a+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",a+" .blocklyReplaceable .blocklyPathLight,",a+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",a+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.ul+
";","stroke: none;","}"]};function ek(a){this.De=this.R=this.type=this.height=this.width=0;this.h=a;this.Lb=this.h.uf};function fk(a,b){fk.i.constructor.call(this,a);this.$a=b;this.shape=$f(this.h,b);this.Rd=!!this.shape.isDynamic;this.type|=1024}H(fk,ek);function gk(a,b){gk.i.constructor.call(this,a,b);this.type|=8192;this.height=this.Rd?0:this.shape.height;this.Pb=this.width=this.Rd?0:this.shape.width;this.tb=this.h.xe;this.Ef=0}H(gk,fk);function hk(a,b){hk.i.constructor.call(this,a,b);this.type|=2048;this.height=this.shape.height;this.width=this.shape.width}H(hk,fk);
function ik(a,b){ik.i.constructor.call(this,a,b);this.type|=4096;this.height=this.shape.height;this.width=this.shape.width}H(ik,fk);function jk(a,b){jk.i.constructor.call(this,a,b.connection);this.type|=128;this.input=b;this.align=b.align;(this.Uc=b.connection&&b.connection.G()?b.connection.G():null)?(a=eg(this.Uc),this.Df=a.width,this.ph=a.height):this.ph=this.Df=0;this.tb=this.Ef=0}H(jk,fk);
function kk(a,b){kk.i.constructor.call(this,a,b);this.type|=256;this.Uc?(this.width=this.Df,this.height=this.ph):(this.height=this.h.Yn,this.width=this.h.Zn);this.Ge=this.Rd?this.shape.height(this.height):this.shape.height;this.mc=this.Rd?this.shape.width(this.height):this.shape.width;this.Uc||(this.width+=this.mc*(this.Rd?2:1));this.tb=this.Rd?this.shape.tb(this.Ge):this.h.xe;this.Ef=this.Rd?this.shape.Ef(this.mc):0}H(kk,jk);
function lk(a,b){lk.i.constructor.call(this,a,b);this.type|=512;this.height=this.Uc?this.ph+this.h.Il:this.h.$n;this.width=this.h.Io+this.shape.width}H(lk,jk);function mk(a,b){mk.i.constructor.call(this,a,b);this.type|=64;this.height=this.Uc?this.ph-this.h.xe-this.h.Db:this.shape.height;this.width=this.shape.width+this.h.ao;this.tb=this.h.xe;this.Ge=this.shape.height;this.mc=this.shape.width}H(mk,jk);function nk(a,b){nk.i.constructor.call(this,a);this.icon=b;this.isVisible=b.isVisible();this.type|=4;a=b.Rq();this.height=a.height;this.width=a.width}H(nk,ek);function ok(a){ok.i.constructor.call(this,a);this.type|=524288;this.height=this.h.se.height;this.width=this.h.se.width}H(ok,ek);function pk(a,b){pk.i.constructor.call(this,a);this.km=b;this.Kb=b.qf;this.ap=b.rm();this.type|=1;a=this.km.getSize();this.height=a.height;this.width=a.width}H(pk,ek);
function qk(a){qk.i.constructor.call(this,a);this.type|=2;this.height=this.h.we.height;this.width=this.h.we.width;this.Be=this.height}H(qk,ek);function rk(a,b){rk.i.constructor.call(this,a);this.type=(b&&b!="left"?131072:32768)|16384;this.width=this.height=this.h.kc}H(rk,ek);function sk(a,b){sk.i.constructor.call(this,a);this.type=(b&&b!="left"?262144:65536)|16384;this.width=this.h.ma;this.height=this.h.ma/2}H(sk,ek);
function tk(a,b){tk.i.constructor.call(this,a);this.type|=40;this.width=b;this.height=this.h.Fo}H(tk,ek);function uk(a){this.type=1048576;this.elements=[];this.R=this.Fa=this.hc=this.minWidth=this.minHeight=this.width=this.height=0;this.vm=this.Re=this.Hj=this.Ba=this.Yc=!1;this.h=a;this.Lb=this.h.uf;this.align=null}uk.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.");};function vk(a){for(var b=a.elements.length-1,c;c=a.elements[b];b--)if(c.type&128)return c;return null}uk.prototype.Ai=function(){return!0};uk.prototype.Of=function(){return!0};
function wk(a){wk.i.constructor.call(this,a);this.type|=2097152;this.Be=this.Bc=0;this.pp=!1;this.connection=null}H(wk,uk);wk.prototype.Ij=function(a){var b=(a.tc?a.tc==="cap":this.h.jl)&&!a.u&&!a.D,c=a.D&&a.D.G();return!!a.u||b||(c?nb(c)==a:!1)};
wk.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,e.type&8||(e.type&2?c=Math.max(c,e.Be):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.Bc=this.Be=c;this.hc=this.width};wk.prototype.Ai=function(){return!1};wk.prototype.Of=function(){return!1};function xk(a){xk.i.constructor.call(this,a);this.type|=4194304;this.wm=!1;this.connection=null;this.Tb=this.Kf=0}H(xk,uk);
xk.prototype.Ij=function(a){return!!a.u||!!nb(a)};xk.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,e.type&8||(e.type&4096?c=Math.max(c,e.height):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.Kf=c;this.hc=this.width};xk.prototype.Ai=function(){return!1};xk.prototype.Of=function(){return!1};
function yk(a,b,c){yk.i.constructor.call(this,a);this.type|=24;this.width=c;this.height=b;this.pm=!1;this.hc=0;this.elements=[new tk(this.h,c)]}H(yk,uk);yk.prototype.measure=function(){};function zk(a){zk.i.constructor.call(this,a);this.type|=8388608;this.Wl=0}H(zk,uk);
zk.prototype.measure=function(){this.width=this.minWidth;this.height=this.minHeight;for(var a=0,b=0,c;c=this.elements[b];b++)this.width+=c.width,c.type&128&&(c.type&512?a+=c.Df:c.type&64&&c.Df!=0&&(a+=c.Df-c.mc)),c.type&8||(this.height=Math.max(this.height,c.height));this.Wl=a;this.hc=this.width+a};zk.prototype.Of=function(){return!this.Yc&&!this.Ba};function Ak(a,b){this.U=b;this.pa=a;this.h=this.pa.C();this.u=b.u?new gk(this.h,b.u):null;this.Ve=Lf(b)&&!b.isCollapsed();this.isCollapsed=b.isCollapsed();this.yb=b.yb();this.o=b.o;this.sd=this.width=this.pf=this.height=0;this.rows=[];this.Fm=[];this.zm=[];this.Da=new wk(this.h);this.na=new xk(this.h);this.zi=this.Pb=0}g=Ak.prototype;
g.measure=function(){var a=!!this.U.D,b=(this.U.tc?this.U.tc==="cap":this.h.jl)&&!this.u&&!a,c=this.Da.Ij(this.U)?rk:sk;this.Da.elements.push(new c(this.h));b?(a=new qk(this.h),this.Da.elements.push(a),this.Da.Bc=a.Be):a&&(this.Da.pp=!0,this.Da.connection=new hk(this.h,this.U.D),this.Da.elements.push(this.Da.connection));this.U.v.length&&this.U.v[0].type==3&&!this.U.isCollapsed()?this.Da.minHeight=this.h.Ko:this.Da.minHeight=this.h.Jo;c=rk;this.Da.elements.push(new c(this.h,"right"));this.rows.push(this.Da);
a=new zk(this.h);this.Fm.push(a);c=cg(this.U);b=0;for(var d;d=c[b];b++){var e=new nk(this.h,d);this.isCollapsed&&d.Hq?this.zm.push(e):a.elements.push(e)}d=null;for(b=0;c=this.U.v[b];b++)if(c.isVisible()){!d||c.type!=3&&d.type!=3&&(c.type!=1&&c.type!=5||this.Ve)||(this.rows.push(a),a=new zk(this.h),this.Fm.push(a));for(d=0;e=c.$[d];d++)a.elements.push(new pk(this.h,e,c));this.Pl(c,a);d=c}this.isCollapsed&&(a.vm=!0,a.elements.push(new ok(this.h)));(a.elements.length||a.Re)&&this.rows.push(a);this.Dk();
this.rows.push(this.na);this.Ol();a=this.rows;this.rows=[];for(b=0;b<a.length;b++)if(this.rows.push(a[b]),b!=a.length-1){c=this.rows;d=c.push;e=a[b];var f=a[b+1],h=new yk(this.h,this.sm(e,f),this.width-this.Pb);e.Ba&&(h.pm=!0);f.Ba&&(h.Yq=!0);d.call(c,h)}for(d=c=b=a=0;e=this.rows[d];d++)e.measure(),b=Math.max(b,e.width),e.Ba&&(a=Math.max(a,e.width-vk(e).width)),c=Math.max(c,e.hc);this.sd=a;this.width=b;for(d=0;e=this.rows[d];d++)e.Ba&&(e.sd=this.sd);this.pf=Math.max(b,c);this.u&&(this.Pb=this.u.width,
this.width+=this.u.width,this.pf+=this.u.width);this.Pi();this.lm()};g.Dk=function(){this.na.wm=!!this.U.B;this.na.minHeight=this.U.v.length&&this.U.v[this.U.v.length-1].type==3?this.h.Qn:this.h.Rn;this.na.Ij(this.U)?this.na.elements.push(new rk(this.h)):this.na.elements.push(new sk(this.h));this.na.wm&&(this.na.connection=new ik(this.h,this.U.B),this.na.elements.push(this.na.connection));this.na.elements.push(new rk(this.h,"right"))};
g.Pl=function(a,b){this.Ve&&a.type==1?(b.elements.push(new kk(this.h,a)),b.Hj=!0):a.type==3?(b.elements.push(new lk(this.h,a)),b.Ba=!0):a.type==1?(b.elements.push(new mk(this.h,a)),b.Yc=!0):a.type==5&&(b.minHeight=Math.max(b.minHeight,a.A()&&a.A().S?this.h.Wn:this.h.ll),b.Re=!0);b.align==null&&(b.align=a.align)};
g.Ol=function(){for(var a=0,b;b=this.rows[a];a++){var c=b.elements;b.elements=[];b.Ai()&&b.elements.push(new tk(this.h,this.Hd(null,c[0])));if(c.length){for(var d=0;d<c.length-1;d++)b.elements.push(c[d]),b.elements.push(new tk(this.h,this.Hd(c[d],c[d+1])));b.elements.push(c[c.length-1]);b.Of()&&b.elements.push(new tk(this.h,this.Hd(c[c.length-1],null)))}}};
g.Hd=function(a,b){if(!a&&b&&b.type&512)return this.h.Jl;if(a&&a.type&128&&!b){if(a.type&64)return this.h.kc;if(a.type&256)return this.h.Ya;if(a.type&512)return this.h.kc}return a&&a.type&32768&&b&&(b.type&2048||b.type&4096)?b.Lb:a&&a.type&65536&&b&&(b.type&2048||b.type&4096)?b.Lb-this.h.ma:this.h.Db};g.Pi=function(){for(var a=0,b;b=this.rows[a];a++)if(b.Ba)Bk(this,b);else{var c=this.Uf(b)-b.width;c>0&&Ck(b,c);b.type&6291456&&(b.hc=b.width)}};g.Uf=function(){return this.width-this.Pb};
function Ck(a,b){a:{var c=0;for(var d;d=a.elements[c];c++)if(d.type&8){c=d;break a}c=null}a:{d=a.elements.length-1;for(var e;e=a.elements[d];d--)if(e.type&8){d=e;break a}d=null}if(a.Yc||a.Ba)a.hc+=b;a.align==-1?d.width+=b:a.align==0?(c.width+=b/2,d.width+=b/2):a.align==1?c.width+=b:d.width+=b;a.width+=b}function Bk(a,b){var c=vk(b),d=b.width-c.width,e=a.sd;d=e-d;d>0&&Ck(b,d);d=b.width;e=a.Uf(b);c.width+=e-d;c.height=Math.max(c.height,b.height);b.width+=e-d;b.hc=Math.max(b.width,a.sd+b.Wl)}g.sm=function(){return this.h.Db};
g.qm=function(a,b){return b.type&8?a.Fa+b.height/2:a.type&4194304?(a=a.Fa+a.height-a.Kf,b.type&4096?a+b.height/2:a-b.height/2):a.type&2097152?b.type&2?a.Bc-b.height/2:a.Bc+b.height/2:a.Fa+a.height/2};function Dk(a,b){for(var c=b.R,d=0,e;e=b.elements[d];d++)e.type&8&&(e.height=b.height),e.R=c,e.De=a.qm(b,e),c+=e.width}
g.lm=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++)d.Fa=b,d.R=this.Pb,b+=d.height,a=Math.max(a,d.hc),Dk(this,d);this.u&&this.U.B&&this.U.B.isConnected()&&(a=Math.max(a,eg(this.U.B.G()).width));this.pf=a+this.Pb;this.height=b;this.zi=this.Da.Bc;this.na.Tb=b-this.na.Kf};function Ek(a,b){this.U=a;this.H=b;a.ba();this.Lh=this.T="";this.h=b.pa.C()}g=Ek.prototype;g.Xb=function(){Fk(this);Gk(this);Hk(this);this.U.sa.Uk(this.T+"\n"+this.Lh);this.H.o&&this.U.sa.yj();Ik(this)};function Ik(a){a.U.height=a.H.height;a.U.width=a.H.pf}function Fk(a){for(var b=0,c;c=a.H.zm[b];b++)c.icon.sp.setAttribute("display","none")}function Gk(a){a.qj();for(var b=1;b<a.H.rows.length-1;b++){var c=a.H.rows[b];c.vm?a.Mf(c):c.Ba?a.pj(c):c.Yc?a.rj(c):a.im(c)}a.mj();a.oj()}
g.qj=function(){var a=this.H.Da,b=a.elements,c=this.H.Da;if(c.connection){var d=c.R+c.Lb;Eh(c.connection.$a,this.H.o?-d:d,0)}this.T+=M(a.R,this.H.zi);for(c=0;d=b[c];c++)d.type&65536?this.T+=this.h.vf.dl:d.type&262144?this.T+=this.h.vf.Yp:d.type&2048?this.T+=d.shape.ld:d.type&2?this.T+=this.h.we.path:d.type&8&&(this.T+=N("h",d.width));this.T+=N("v",a.height)};g.Mf=function(a){this.T+=this.h.se.path+N("v",a.height-this.h.se.height)};
g.rj=function(a){var b=vk(a);this.nn(a);var c=typeof b.shape.Mb=="function"?b.shape.Mb(b.height):b.shape.Mb;this.T+=N("H",b.R+b.width)+c+N("v",a.height-b.Ge)};g.pj=function(a){var b=vk(a);this.T+=N("H",b.R+b.Lb+b.shape.width)+(b.shape.hn+N("h",-(b.Lb-this.h.Vg.width))+this.h.Vg.Bk)+N("v",a.height-2*this.h.Vg.height)+this.h.Vg.ii+N("H",a.R+a.width);this.qn(a)};g.im=function(a){this.T+=N("V",a.Fa+a.height)};
g.mj=function(){var a=this.H.na,b=a.elements;this.pn();for(var c=0,d="",e=b.length-1,f;f=b[e];e--)f.type&4096?d+=f.shape.hn:f.type&32768?d+=N("H",a.R):f.type&65536?d+=this.h.vf.Vi:f.type&262144?(d+=this.h.vf.Oo,c=this.h.vf.Lp):f.type&8&&(d+=N("h",f.width*-1));this.T+=N("V",a.Tb-c);this.T+=d};
g.oj=function(){var a=this.H.u;if(this.H.u){var b=this.H.Pb+this.H.u.Ef;Eh(this.U.u,this.H.o?-b:b,this.H.u.tb)}a&&(b=a.tb+a.height,a=typeof a.shape.og=="function"?a.shape.og(a.height):a.shape.og,this.T+=N("V",b)+a);this.T+="z"};
function Hk(a){for(var b=0,c;c=a.H.rows[b];b++)for(var d=0,e;e=c.elements[d];d++)if(e.type&256)a.nj(e);else if(e.type&4||e.type&1){var f=a;if(e.type&1)var h=e.km.I();else e.type&4&&(h=e.icon.sp);var k=e.De-e.height/2,l=e.R,m="";f.H.o&&(l=-(l+e.width),e.ap&&(l+=e.width,m="scale(-1 1)"));e.type&4?(h.setAttribute("display","block"),h.setAttribute("transform","translate("+l+","+k+")"),e.icon.Ro()):h.setAttribute("transform","translate("+l+","+k+")"+m);f.H.yb&&h.setAttribute("display","none")}}
g.nj=function(a){var b=a.height,c=a.tb;this.Lh+=Zj(a.R+a.mc,a.De-b/2)+N("v",c)+a.shape.Mb+N("v",b-(a.Ge+c))+N("h",a.width-a.mc)+N("v",-b)+"z";this.on(a)};g.on=function(a){var b=a.De-a.height/2;if(a.$a){var c=a.R+a.mc+a.Ef;this.H.o&&(c*=-1);Eh(a.$a,c,b+a.tb)}};g.qn=function(a){var b=vk(a);if(b.$a){var c=a.R+a.sd+b.Lb;this.H.o&&(c*=-1);Eh(b.$a,c,a.Fa)}};g.nn=function(a){var b=vk(a);if(b.$a){var c=a.R+a.width;this.H.o&&(c*=-1);Eh(b.$a,c,a.Fa)}};
g.pn=function(){var a=this.H.na;if(a.connection){var b=a.connection,c=b.R;Eh(b.$a,this.H.o?-c:c,a.Tb)}};function Jk(a,b,c,d){var e=a?a.j.id:void 0;d&&d.getType()=="workspace"&&(e=d.N.id);Jk.i.constructor.call(this,e);this.ga=a?a.id:null;this.Zm=c;this.Vm=d;this.wc=b}H(Jk,Od);Jk.prototype.type="marker_move";Jk.prototype.P=function(){var a=Jk.i.P.call(this);a.isCursor=this.wc;a.blockId=this.ga;a.oldNode=this.Zm;a.newNode=this.Vm;return a};Jk.prototype.L=function(a){Jk.i.L.call(this,a);this.wc=a.isCursor;this.ga=a.blockId;this.Zm=a.oldNode;this.Vm=a.newNode};B(Mc,"marker_move",Jk);function vi(a,b,c){this.g=a;this.ek=c;this.ng=null;this.h=b;this.Ie=null;a=this.wc()?this.h.kl:this.h.wl;this.Eb=c.$i||a}g=vi.prototype;g.I=function(){return this.m};g.Vf=function(){return this.ek};g.wc=function(){return this.ek.type=="cursor"};
g.va=function(){var a=this.wc()?"blocklyCursor":"blocklyMarker";this.m=z(Vb,{"class":a},null);this.Lc=z(Vb,{width:this.h.Sg,height:this.h.Ll},this.m);this.dd=z($b,{width:this.h.Sg,height:this.h.Ll},this.Lc);this.Wd=z($b,{"class":"blocklyVerticalMarker",rx:10,ry:10},this.Lc);this.Vd=z(Yb,{transform:""},this.Lc);this.Kc=z(Yb,{transform:"",fill:"none","stroke-width":this.h.Vn},this.Lc);this.cb();this.wc()&&(a={attributeType:"XML",attributeName:"fill",dur:"1s",values:this.Eb+";transparent;transparent;",
repeatCount:"indefinite"},z(Mb,a,this.dd),z(Mb,a,this.Vd),a.attributeName="stroke",z(Mb,a,this.Kc));return this.m};function Kk(a,b){a.wc()?(a.ng&&a.ng.Nc(null),b.Nc(a.I())):(a.ng&&a.ng.qd(null),b.qd(a.I()));a.ng=b}
g.Xb=function(a,b){if(b){this.h=this.g.pa.C();var c=this.wc()?this.h.kl:this.h.wl;this.Eb=this.ek.$i||c;this.dd.setAttribute("fill",this.Eb);this.Wd.setAttribute("stroke",this.Eb);this.Vd.setAttribute("fill",this.Eb);this.Kc.setAttribute("stroke",this.Eb);this.wc()&&(c=this.Eb+";transparent;transparent;",this.dd.firstChild.setAttribute("values",c),this.Vd.firstChild.setAttribute("values",c),this.Kc.firstChild.setAttribute("values",c));c=b.N.type;if(b.getType()=="block")Lk(this,b);else if(b.getType()==
"output")Lk(this,b);else if(c==1){var d=b.N;c=d.A();var e=d.$d.x,f=d.$d.y;d=Zj(0,0)+$f(this.h,d).Mb;this.Vd.setAttribute("d",d);this.Vd.setAttribute("transform","translate("+e+","+f+")"+(this.g.o?" scale(-1 1)":""));this.Ie=this.Vd;Kk(this,c);Mk(this)}else if(c==3)f=b.N,c=f.A(),e=0,f=f.$d.y,d=eg(c).width,this.g.o&&(e=-d),Nk(this,e,f,d),Kk(this,c),Mk(this);else if(b.getType()=="previous")Lk(this,b);else if(b.getType()=="field")c=b.N,e=c.getSize().width,f=c.getSize().height,Ok(this,0,0,e,f),Kk(this,
c),Mk(this);else if(b.getType()=="workspace")e=b.Mn,c=e.x,e=e.y,this.g.o&&(c-=this.h.Sg),Nk(this,c,e,this.h.Sg),Kk(this,this.g),Mk(this);else if(b.getType()=="stack"){c=b.N;f=eg(c);e=f.width+this.h.Rg;f=f.height+this.h.Rg;var h=d=-this.h.Rg/2,k=-this.h.Rg/2;this.g.o&&(h=-(e+d));Ok(this,h,k,e,f);Kk(this,c);Mk(this)}c=b.A();a=new (G("marker_move"))(c,this.wc(),a,b);D(a);a=this.Ie.childNodes[0];a!==void 0&&a.beginElement&&a.beginElement()}else this.cb()};
function Lk(a,b){b=b.A();var c=b.width,d=b.height,e=d*.75,f=a.h.Un;if(b.D){var h=$f(a.h,b.D);a.Kc.setAttribute("d",M(-f,e)+N("V",-f)+N("H",a.h.uf)+h.ld+N("H",c+f*2)+N("V",e))}else b.u?(h=$f(a.h,b.u),a.Kc.setAttribute("d",M(c,0)+N("h",-(c-h.width))+N("v",a.h.xe)+h.Mb+N("V",d)+N("H",c))):a.Kc.setAttribute("d",M(-f,e)+N("V",-f)+N("H",c+f*2)+N("V",e));a.g.o&&a.Rf(a.Kc);a.Ie=a.Kc;Kk(a,b);Mk(a)}function Mk(a){a.cb();a.Ie.style.display=""}
function Nk(a,b,c,d){a.dd.setAttribute("x",b);a.dd.setAttribute("y",c);a.dd.setAttribute("width",d);a.Ie=a.dd}function Ok(a,b,c,d,e){a.Wd.setAttribute("x",b);a.Wd.setAttribute("y",c);a.Wd.setAttribute("width",d);a.Wd.setAttribute("height",e);a.Ie=a.Wd}g.Rf=function(a){a.setAttribute("transform","scale(-1 1)")};g.cb=function(){this.dd.style.display="none";this.Wd.style.display="none";this.Vd.style.display="none";this.Kc.style.display="none"};g.dispose=function(){this.m&&jc(this.m)};function Pk(a,b,c){this.Ff=c;this.Ac=a;this.Ca=z(Yb,{"class":"blocklyPath"},this.Ac);this.style=b;this.dk=this.Jf=null}g=Pk.prototype;g.Uk=function(a){this.Ca.setAttribute("d",a)};g.yj=function(){this.Ca.setAttribute("transform","scale(-1 1)")};g.Nc=function(a){a?(this.Ac.appendChild(a),this.Jf=a):this.Jf=null};g.qd=function(a){a?(this.Jf?this.Ac.insertBefore(a,this.Jf):this.Ac.appendChild(a),this.dk=a):this.dk=null};
g.Ia=function(a){this.Ca.setAttribute("stroke",this.style.Fe);this.Ca.setAttribute("fill",this.style.Cd);this.Dn(a.S);this.fl(!a.isEnabled()||jh(a))};g.ie=function(a){this.style=a};function Zf(a,b,c){c?A(a.Ac,b):hc(a.Ac,b)}g.Cn=function(a){a?this.Ca.setAttribute("filter","url(#"+this.Ff.sj+")"):this.Ca.setAttribute("filter","none")};g.Dn=function(a){a&&(this.Ca.setAttribute("stroke","none"),this.Ca.setAttribute("fill",this.style.nh))};
g.fl=function(a){Zf(this,"blocklyDisabled",a);a&&this.Ca.setAttribute("fill","url(#"+this.Ff.hm+")")};function Qk(a){this.name=a;this.zk=this.h=null}g=Qk.prototype;g.Yb=function(){return this.name+"-renderer"};g.init=function(a,b){this.h=this.Zj();b&&(this.zk=b,fd(this.h,b));this.h.yg(a);this.h.init()};g.va=function(a,b){this.h.va(a,this.name+"-"+b.name,"."+this.Yb()+"."+b.Yb())};g.Hk=function(a,b){var c=this.C();c.dispose();this.h=this.Zj();this.zk&&fd(this.h,this.zk);this.h.mi=c.mi;this.h.yg(b);this.h.init();this.va(a,b)};g.dispose=function(){this.h&&this.h.dispose()};g.Zj=function(){return new ck};
g.Pm=function(a){return new Ak(this,a)};g.Nm=function(a,b){return new Ek(a,b)};g.Om=function(a,b){return new Pk(a,b,this.h)};g.C=function(){return this.h};g.V=function(a){var b=this.Pm(a);b.measure();this.Nm(a,b).Xb()};function Rk(){Rk.i.constructor.call(this);this.Ii=!1;this.Ga=1;this.wo=30;this.Il=-this.Ji/2}H(Rk,ck);Rk.prototype.Aj=function(a){return Rk.i.Aj.call(this,a).concat([a+" .blocklyInsertionMarker>.blocklyPathLight,",a+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.ul+";","stroke: none;","}"])};function Sk(a){this.H=a;this.$f=this.F="";this.Ha=this.H.o;a=a.pa;this.h=a.C();this.ub=a.ub;this.mb=this.ub.OFFSET;this.yk=this.ub.Bo;this.Ue=this.ub.qo;this.qg=this.ub.Ki;this.Bp=this.ub.ve;this.Rp=this.ub.we;this.Jm=this.ub.se}Sk.prototype.Mf=function(a){this.H.o&&(this.F+=this.Jm.ld+N("v",a.height-this.Jm.height-this.mb))};function Tk(a,b){var c=b.R+b.width-a.mb;b.pm&&(a.F+=N("H",c));a.Ha&&(a.F+=N("H",c),b.height>a.mb&&(a.F+=N("V",b.Fa+b.height-a.mb)))};function Uk(a,b){Uk.i.constructor.call(this,a,b);this.Uc&&(this.width+=this.h.Ga,this.height+=this.h.Ga)}H(Uk,kk);function Vk(a,b){Vk.i.constructor.call(this,a,b);this.Uc&&(this.height+=this.h.Ga)}H(Vk,lk);function Wk(a,b){Wk.i.constructor.call(this,a,b)}H(Wk,Ak);g=Wk.prototype;g.Dk=function(){Wk.i.Dk.call(this);this.U.v.length&&this.U.v[this.U.v.length-1].type==3||(this.na.minHeight=this.h.Db-this.h.Ga)};g.Pl=function(a,b){this.Ve&&a.type==1?(b.elements.push(new Uk(this.h,a)),b.Hj=!0):a.type==3?(b.elements.push(new Vk(this.h,a)),b.Ba=!0):a.type==1?(b.elements.push(new mk(this.h,a)),b.Yc=!0):a.type==5&&(b.minHeight=Math.max(b.minHeight,this.h.ll),b.Re=!0);this.Ve||b.align!=null||(b.align=a.align)};
g.Ol=function(){for(var a=!1,b=0,c;c=this.rows[b];b++)c.Yc&&(a=!0);for(b=0;c=this.rows[b];b++){var d=c.elements;c.elements=[];c.Ai()&&c.elements.push(new tk(this.h,this.Hd(null,d[0])));if(d.length){for(var e=0;e<d.length-1;e++){c.elements.push(d[e]);var f=this.Hd(d[e],d[e+1]);c.elements.push(new tk(this.h,f))}c.elements.push(d[d.length-1]);c.Of()&&(f=this.Hd(d[d.length-1],null),a&&c.Re&&(f+=this.h.eh),c.elements.push(new tk(this.h,f)))}}};
g.Hd=function(a,b){if(!a)return b&&b.type&1&&b.Kb?this.h.Db:b&&b.type&256?this.h.yl:b&&b.type&512?this.h.Jl:this.h.Ya;if(!(a.type&128)&&(!b||b.type&512))return a.type&1&&a.Kb?this.h.Db:a.type&4?this.h.Ya*2+1:a.type&2?this.h.kc:a.type&6144?this.h.Ya:a.type&65536?this.h.xo:a.type&524288?this.h.kc:this.h.Ya;if(a.type&128&&!b){if(a.type&64)return this.h.kc;if(a.type&256)return this.h.Ya;if(a.type&512)return this.h.kc}if(!(a.type&128)&&b&&b.type&128){if(a.type&1&&a.Kb){if(b.type&256||b.type&64)return this.h.Eo}else{if(b.type&
256||b.type&64)return this.h.yl;if(b.type&512)return this.h.Ya}return this.h.Ya-1}if(a.type&4&&b&&!(b.type&128))return this.h.Ya;if(a.type&256&&b&&b.type&1)return b.Kb?this.h.Db:this.h.Ya;if(a.type&32768&&b){if(b.type&2)return this.h.kc;if(b.type&2048)return b.Lb;if(b.type&4096)return a=(this.o?1:-1)*this.h.Ga/2,b.Lb+a}if(a.type&65536&&b){if(b.type&2048)return b.Lb-this.h.ma;if(b.type&4096)return a=(this.o?1:-1)*this.h.Ga/2,b.Lb-this.h.ma+a}return a.type&1&&b&&b.type&1&&a.Kb==b.Kb||b&&b.type&524288?
this.h.Ya:this.h.Db};g.sm=function(a,b){return a.type&2097152&&b.type&4194304?this.h.Xn:a.type&2097152||b.type&4194304?this.h.kc:a.Yc&&b.Yc?this.h.Ya:!a.Ba&&b.Ba?this.h.Pn:a.Ba&&b.Ba||!a.Ba&&b.Re||a.Re?this.h.Ya:this.h.Db};
g.qm=function(a,b){if(b.type&8)return a.Fa+b.height/2;if(a.type&4194304)return a=a.Fa+a.height-a.Kf,b.type&4096?a+b.height/2:a-b.height/2;if(a.type&2097152)return b.type&2?a.Bc-b.height/2:a.Bc+b.height/2;var c=a.Fa;b.type&1||b.type&4?(c+=b.height/2,(a.Hj||a.Ba)&&b.height+this.h.Kl<=a.height&&(c+=this.h.Kl)):c=b.type&256?c+b.height/2:c+a.height/2;return c};
g.Pi=function(){if(this.Ve){for(var a=0,b=null,c=this.rows.length-1,d;d=this.rows[c];c--)d.kk=a,d.type&8388608&&(d.Ba&&Bk(this,d),b&&b.Ba&&d.width<b.width?d.kk=b.width:a=d.width,b=d);for(c=a=0;d=this.rows[c];c++)d.Ba?a=this.Uf(d):d.type&8?d.width=Math.max(a,d.kk):(a=Math.max(a,d.kk)-d.width,a>0&&Ck(d,a),a=d.width)}else Wk.i.Pi.call(this)};g.Uf=function(a){return this.Ve&&a.Ba?this.sd+this.h.wo+this.Pb:Wk.i.Uf.call(this,a)};
g.lm=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++){d.Fa=b;d.R=this.Pb;b+=d.height;a=Math.max(a,d.hc);var e=b-this.Da.Be;d==this.na&&e<this.h.Xg&&(e=this.h.Xg-e,this.na.height+=e,b+=e);Dk(this,d)}this.u&&this.U.B&&this.U.B.isConnected()&&(a=Math.max(a,eg(this.U.B.G()).width-this.h.Ga));this.na.Tb=b-this.na.Kf;this.pf=a+this.Pb+this.h.Ga;this.width+=this.h.Ga;this.height=b+this.h.Ga;this.zi=this.Da.Bc};function Xk(a,b){Xk.i.constructor.call(this,a,b);this.uc=new Sk(b)}H(Xk,Ek);g=Xk.prototype;g.Xb=function(){Fk(this);Gk(this);Hk(this);var a=this.U.sa;a.Uk(this.T+"\n"+this.Lh);var b=this.uc;a.je.setAttribute("d",b.F+"\n"+b.$f);this.H.o&&a.yj();Ik(this)};
g.qj=function(){var a=this.uc,b=this.H.Da;a.F+=M(b.R,a.H.zi);for(var c=0,d;d=b.elements[c];c++)d.type&32768?a.F+=a.ub.Hl:d.type&65536?a.F+=a.yk.dl(a.Ha):d.type&2048?a.F+=a.Bp.ld:d.type&2?a.F+=a.Rp.path(a.Ha):d.type&8&&d.width!=0&&(a.F+=N("H",d.R+d.width-a.mb));a.F+=N("H",b.R+b.width-a.mb);Tk(this.uc,this.H.Da);Xk.i.qj.call(this)};g.Mf=function(a){this.uc.Mf(a);Xk.i.Mf.call(this,a)};
g.rj=function(a){var b=this.uc,c=vk(a);if(b.Ha){var d=a.height-c.Ge;b.F+=Zj(c.R+c.width-b.mb,a.Fa)+b.qg.Mb(b.Ha)+N("v",d)}else b.F+=Zj(c.R+c.width,a.Fa)+b.qg.Mb(b.Ha);Xk.i.rj.call(this,a)};g.pj=function(a){var b=this.uc,c=vk(a);if(b.Ha){var d=a.height-2*b.Ue.height;b.F+=Zj(c.R,a.Fa)+b.Ue.Bk(b.Ha)+N("v",d)+b.Ue.ii(b.Ha)+ak(a.width-c.R-b.Ue.width,0)}else b.F+=Zj(c.R,a.Fa+a.height)+b.Ue.ii(b.Ha)+ak(a.width-c.R-b.Ue.width,0);Xk.i.pj.call(this,a)};
g.im=function(a){Tk(this.uc,a);this.T+=N("H",a.R+a.width)+N("V",a.Fa+a.height)};g.mj=function(){var a=this.uc,b=this.H.na;if(a.Ha)a.F+=N("V",b.Tb-a.mb);else{var c=a.H.na.elements[0];c.type&32768?a.F+=Zj(b.R+a.mb,b.Tb-a.mb):c.type&65536&&(a.F+=Zj(b.R,b.Tb),a.F+=a.yk.Vi())}Xk.i.mj.call(this)};
g.oj=function(){var a=this.uc,b=a.H.u;b&&(b=b.tb+b.height,a.Ha?a.F+=Zj(a.H.Pb,b):(a.F+=Zj(a.H.Pb+a.mb,a.H.na.Tb-a.mb),a.F+=N("V",b)),a.F+=a.qg.og(a.Ha));a.Ha||(b=a.H.Da,a.F=b.elements[0].type&65536?a.F+N("V",a.yk.height):a.F+N("V",b.Bc+a.mb));Xk.i.oj.call(this)};
g.nj=function(a){var b=this.uc,c=b.mb,d=a.R+a.mc,e=a.De-a.height/2,f=a.width-a.mc,h=e+c;b.Ha?(e=a.height-(a.tb+a.Ge)+c,b.$f+=Zj(d-c,h)+N("v",a.tb-c)+b.qg.Mb(b.Ha)+N("v",e)+N("h",f)):b.$f+=Zj(a.R+a.width+c,h)+N("v",a.height)+N("h",-f)+Zj(d,e+a.tb)+b.qg.Mb(b.Ha);Xk.i.nj.call(this,a)};g.on=function(a){var b=a.De-a.height/2;if(a.$a){var c=a.R+a.mc+this.h.Ga;this.H.o&&(c*=-1);Eh(a.$a,c,b+a.tb+this.h.Ga)}};
g.qn=function(a){var b=vk(a);if(b.$a){var c=a.R+a.sd+b.Lb;c=this.H.o?c*-1:c+this.h.Ga;Eh(b.$a,c,a.Fa+this.h.Ga)}};g.nn=function(a){var b=vk(a);if(b.$a){var c=a.R+a.width+this.h.Ga;this.H.o&&(c*=-1);Eh(b.$a,c,a.Fa)}};g.pn=function(){var a=this.H.na;if(a.connection){var b=a.connection,c=b.R;Eh(b.$a,(this.H.o?-c:c)+this.h.Ga/2,a.Tb+this.h.Ga)}};function Yk(a){this.He=a;this.OFFSET=.5;this.Hl=M(this.OFFSET,this.OFFSET)}g=Yk.prototype;g.init=function(){this.qo=Zk(this);this.Bo=$k(this);this.Ki=this.bk();this.ve=this.ak();this.se=this.$j();this.we=this.ck()};function Zk(a){var b=a.He.ma;a=a.OFFSET;var c=(1-Math.SQRT1_2)*(b+a)-a,d=M(c,c)+bk("0 0,0",b,V(-c-a,b-c)),e=bk("0 0,0",b+a,V(b+a,b+a)),f=M(c,-c)+bk("0 0,0",b+a,V(b-c,c+a));return{width:b+a,height:b,Bk:function(h){return h?d:""},ii:function(h){return h?e:f}}}
function $k(a){var b=a.He.ma;a=a.OFFSET;var c=(1-Math.SQRT1_2)*(b-a)+a,d=M(c,c)+bk("0 0,1",b-a,V(b-c,-c+a)),e=M(a,b)+bk("0 0,1",b-a,V(b,-b+a)),f=-c,h=M(c,f)+bk("0 0,1",b-a,V(-c+a,-f-b));return{height:b,dl:function(k){return k?d:e},Vi:function(){return h}}}
g.bk=function(){var a=this.He.eh,b=this.He.xf,c=M(-2,-b+2.5+.9)+ak(a*-.45,-2.1),d=N("v",2.5)+M(-a*.97,2.5)+Yj("q",[V(-a*.05,10),V(a*.3,9.5)])+M(a*.67,-1.9)+N("v",2.5),e=N("v",-1.5)+M(a*-.92,-.5)+Yj("q",[V(a*-.19,-5.5),V(0,-11)])+M(a*.92,1),f=M(-5,b-.7)+ak(a*.46,-2.1);return{width:a,height:b,og:function(h){return h?c:e},Mb:function(h){return h?d:f}}};g.ak=function(){return{ld:N("h",this.OFFSET)+this.He.ve.ld}};g.$j=function(){return{ld:ak(5.1,2.6)+M(-10.2,6.8)+ak(5.1,2.6),height:12,width:10.2}};
g.ck=function(){var a=M(25,-8.7)+Yj("c",[V(29.7,-6.2),V(57.2,-.5),V(75,8.7)]),b=Yj("c",[V(17.8,-9.2),V(45.3,-14.9),V(75,-8.7)])+Zj(100.5,this.He.we.height+.5);return{path:function(c){return c?a:b}}};function al(a,b,c){this.Ff=c;this.Ac=a;this.Fg=z(Yb,{"class":"blocklyPathDark",transform:"translate(1,1)"},this.Ac);this.Ca=z(Yb,{"class":"blocklyPath"},this.Ac);this.je=z(Yb,{"class":"blocklyPathLight"},this.Ac);this.aj="#000000";this.style=b}H(al,Pk);g=al.prototype;g.Uk=function(a){this.Ca.setAttribute("d",a);this.Fg.setAttribute("d",a)};g.yj=function(){this.Ca.setAttribute("transform","scale(-1 1)");this.je.setAttribute("transform","scale(-1 1)");this.Fg.setAttribute("transform","translate(1,1) scale(-1 1)")};
g.Ia=function(a){this.je.style.display="";this.Fg.style.display="";this.je.setAttribute("stroke",this.style.Fe);this.Fg.setAttribute("fill",this.aj);al.i.Ia.call(this,a);this.Ca.setAttribute("stroke","none")};g.ie=function(a){this.style=a;this.aj=ta("#000",this.style.Cd,.2)||this.aj};g.Cn=function(a){a?(this.Ca.setAttribute("filter","url(#"+this.Ff.sj+")"),this.je.style.display="none"):(this.Ca.setAttribute("filter","none"),this.je.style.display="inline")};
g.Dn=function(a){a&&(this.je.style.display="none",this.Fg.setAttribute("fill",this.style.nh),this.Ca.setAttribute("stroke","none"),this.Ca.setAttribute("fill",this.style.nh))};g.fl=function(a){al.i.fl.call(this,a);a&&this.Ca.setAttribute("stroke","none")};function bl(a){bl.i.constructor.call(this,a);this.ub=null}H(bl,Qk);g=bl.prototype;g.init=function(a,b){bl.i.init.call(this,a,b);this.ub=new Yk(this.C());this.ub.init()};g.Hk=function(a,b){bl.i.Hk.call(this,a,b);this.ub.init()};g.Zj=function(){return new Rk};g.Pm=function(a){return new Wk(this,a)};g.Nm=function(a,b){return new Xk(a,b)};g.Om=function(a,b){return new al(a,b,this.C())};B(Oc,"geras",bl);(function(){var a={name:"escape",wa:function(b){return!b.options.readOnly},oa:function(){Ee();return!0}};Si.register(a);Q(27,a.name)})();(function(){var a={name:"delete",wa:function(b){return!b.options.readOnly&&L&&nd(L)},oa:function(b,c){c.preventDefault();if(Fg())return!1;ej(L);return!0}};Si.register(a);Q(46,a.name);Q(8,a.name)})();
(function(){var a={name:"copy",wa:function(c){return!c.options.readOnly&&!Fg()&&L&&nd(L)&&L.Qa()},oa:function(c,d){d.preventDefault();Ee();fj(L);return!0}};Si.register(a);var b=Ui(67,[17]);Q(b,a.name);b=Ui(67,[18]);Q(b,a.name);b=Ui(67,[91]);Q(b,a.name)})();(function(){var a={name:"cut",wa:function(c){return!c.options.readOnly&&!Fg()&&L&&nd(L)&&L.Qa()&&!L.j.ad},oa:function(){fj(L);ej(L);return!0}};Si.register(a);var b=Ui(88,[17]);Q(b,a.name);b=Ui(88,[18]);Q(b,a.name);b=Ui(88,[91]);Q(b,a.name)})();
(function(){var a={name:"paste",wa:function(c){return!c.options.readOnly&&!Fg()},oa:function(){return gj()}};Si.register(a);var b=Ui(86,[17]);Q(b,a.name);b=Ui(86,[18]);Q(b,a.name);b=Ui(86,[91]);Q(b,a.name)})();(function(){var a={name:"undo",wa:function(c){return!c.options.readOnly&&!Fg()},oa:function(c){Ee();sf(c,!1);return!0}};Si.register(a);var b=Ui(90,[17]);Q(b,a.name);b=Ui(90,[18]);Q(b,a.name);b=Ui(90,[91]);Q(b,a.name)})();
(function(){var a={name:"redo",wa:function(c){return!Fg()&&!c.options.readOnly},oa:function(c){Ee();sf(c,!0);return!0}};Si.register(a);var b=Ui(90,[16,17]);Q(b,a.name);b=Ui(90,[16,18]);Q(b,a.name);b=Ui(90,[16,91]);Q(b,a.name);b=Ui(89,[17]);Q(b,a.name)})();var cl=null,dl=null,el=null;function fl(){var a=cl();gl("/scripts/storage.py","app="+encodeURIComponent(Rj)+"&data="+encodeURIComponent(a),hl)}var il=new Map;
function gl(a,b,c,d,e){e=e===void 0?"POST":e;il.has(a)&&il.get(a).abort();var f=new XMLHttpRequest;il.set(a,f);f.onload=function(){this.status===200?c&&c.call(f):d?d.call(f):jl(U("Games.httpRequestError",!1)+"\nXHR status: "+f.status);il.delete(a)};e==="POST"?(f.open(e,a),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(b)):(b&&(a+="?"+b),f.open(e,a),f.send())}
function hl(){window.location.hash=this.responseText.trim();jl(U("Games.linkAlert",!1).replace("%1",window.location.href));el=cl()}function kl(){var a=this.responseText.trim();a.length?(a=a.replace(/^\{\[\(< UNTRUSTED CONTENT >\)\]\}\n/,""),dl(a)):jl(U("Games.hashError",!1).replace("%1",window.location.hash));el=cl()}function jl(a){if(typeof W==="object"){var b=S("linkButton");W.Up(b,a)}else alert(a)};var J=null,ll="",ml="";function nl(){var a=U("Games.maze",!0);Pj(a);if(a=S("linkButton"))Mj?a.style.display="none":(cl=ol,dl=pl,Sj(a,fl));(a=S("languageMenu"))&&a.addEventListener("change",ql,!0)}
function rl(){var a='<xml><block movable="'+(T!==1)+'" type="maze_moveForward" x="70" y="70"></block></xml>';if(!Mj&&window.location.hash.length>1)gl("/data/"+Rj+"/storage/"+window.location.hash.substring(1)+".blockly","",kl,null,"GET");else{try{var b=window.sessionStorage.Xj}catch(d){}b&&delete window.sessionStorage.Xj;var c=Qj(T);(a=b||c||a)&&pl(a)}}function pl(a){a=pd(a);J.clear();qd(a,J);a=J;a.le.length=0;a=a.rg.length=0;for(var b;b=Zc[a];a++)b.Ta=!1}
function ol(){var a=hd(!0);if(J.ra(!1).length===1&&a.querySelector){var b=a.querySelector("block");b&&(b.removeAttribute("x"),b.removeAttribute("y"))}return od(a)}function sl(){el!==null&&el!==ol()&&(window.location.hash="",el=null)}function tl(){var a={maxBlocks:ul,rtl:Lj,trashcan:!0,zoom:{startScale:1+(1-T/10)/3}},b=S("toolbox");b&&(a.toolbox=b);a.media="third-party/blockly/media/";a.oneBasedIndex=!1;J=Bi("blockly",a);tf(J,sl)}function vl(){window.location=(Mj?"index.html":"./")+"?lang="+Jj}
function ql(){window.sessionStorage&&(window.sessionStorage.Xj=ol());var a=S("languageMenu");a=encodeURIComponent(a.options[a.selectedIndex].value);var b=window.location.search;b=b.length<=1?"?lang="+a:/[?&]lang=[^&]*/.test(b)?b.replace(/([?&]lang=)[^&]*/,"$1"+a):b.replace(/\?/,"?lang="+a+"&");window.location=window.location.protocol+"//"+window.location.host+window.location.pathname+b}
function wl(){T<10?location=location.protocol+"//"+location.host+location.pathname+"?lang="+Jj+"&level="+(T+1)+ml:vl()}function xl(a){if(a.type==="click"&&yl==="touchend"&&zl+2E3>Date.now()||yl===a.type&&zl+400>Date.now())return a.preventDefault(),a.stopPropagation(),!0;yl=a.type;zl=Date.now();return!1}var yl=null,zl=0;var W={Pd:!1,dm:null,uh:null,xh:null,zh:null,yh:null,Ag:function(a,b,c,d,e,f){function h(){if(W.Pd){m.style.visibility="visible";m.style.zIndex=10;n.style.visibility="hidden";var y=a.getElementsByClassName("primary");y.length||(y=a.getElementsByClassName("secondary"),y.length||(y=a.getElementsByTagName("button")));y.length&&y[0].focus()}}if(!a)throw TypeError("Content not found: "+a);for(var k=a.getElementsByClassName("addHideHandler"),l;l=k[0];)l.addEventListener("click",W.Kd,!0),l.addEventListener("touchend",
W.Kd,!0),l.classList.remove("addHideHandler");W.Pd&&W.Kd(!1);Hc&&Ee(!0);W.Pd=!0;W.dm=b;W.uh=f;var m=S("dialog");f=S("dialogShadow");var n=S("dialogBorder"),w;for(w in e)m.style[w]=e[w];d&&(f.style.visibility="visible",f.style.opacity=.3,f.style.zIndex=9,d=document.createElement("div"),d.id="dialogHeader",m.appendChild(d),W.xh=u(d,"mousedown",null,W.Wo));m.appendChild(a);a.classList.remove("dialogHiddenContent");try{b.blur()}catch(y){}c&&b?(W.Wh(b,!1,.2),W.Wh(m,!0,.8),setTimeout(h,175)):h()},fm:0,
gm:0,Wo:function(a){W.hj();if(!ab(a)){var b=S("dialog");W.fm=b.offsetLeft-a.clientX;W.gm=b.offsetTop-a.clientY;W.zh=u(document,"mouseup",null,W.hj);W.yh=u(document,"mousemove",null,W.Xo);a.stopPropagation()}},Xo:function(a){var b=S("dialog"),c=W.fm+a.clientX;a=W.gm+a.clientY;a=Math.max(a,0);a=Math.min(a,window.innerHeight-b.offsetHeight);c=Math.max(c,0);c=Math.min(c,window.innerWidth-b.offsetWidth);b.style.left=c+"px";b.style.top=a+"px"},hj:function(){W.zh&&(v(W.zh),W.zh=null);W.yh&&(v(W.yh),W.yh=
null)},Kd:function(a){function b(){d.style.zIndex=-1;d.style.visibility="hidden";S("dialogBorder").style.visibility="hidden"}a=a===void 0?!0:a;if(W.Pd){W.hj();W.xh&&(v(W.xh),W.xh=null);W.Pd=!1;W.uh&&W.uh();W.uh=null;var c=a?W.dm:null;a=S("dialog");var d=S("dialogShadow");d.style.opacity=0;c&&a?(W.Wh(a,!1,.8),W.Wh(c,!0,.2),setTimeout(b,175)):b();a.style.visibility="hidden";a.style.zIndex=-1;for((c=S("dialogHeader"))&&c.parentNode.removeChild(c);a.firstChild;)c=a.firstChild,c.classList.add("dialogHiddenContent"),
document.body.appendChild(c)}},Wh:function(a,b,c){function d(){e.style.width=f.width+"px";e.style.height=f.height+"px";e.style.left=f.x+"px";e.style.top=f.y+"px";e.style.opacity=c}if(a){var e=S("dialogBorder"),f=W.getBBox(a);b?(e.className="dialogAnimate",setTimeout(d,1)):(e.className="",d());e.style.visibility="visible"}},getBBox:function(a){var b=Ja(a);b={x:b.x,y:b.y};a.getBBox?(a=a.getBBox(),b.height=a.height,b.width=a.width):(b.height=a.offsetHeight,b.width=a.offsetWidth);return b},Up:function(a,
b){var c=S("containerStorage");c.textContent="";b=ba(b.split("\n"));for(var d=b.next();!d.done;d=b.next()){var e=document.createElement("p");e.appendChild(document.createTextNode(d.value));c.appendChild(e)}c=S("dialogStorage");W.Ag(c,a,!0,!0,{width:"50%",left:"25%",top:"5em"},W.yn);W.vn()},Nl:function(){if(!Qj(T))if(W.Pd||J.wb())setTimeout(W.Nl,15E3);else{var a=S("dialogAbort"),b=S("abortOk");b.addEventListener("click",vl,!0);b.addEventListener("touchend",vl,!0);W.Ag(a,null,!1,!0,{width:"40%",left:"30%",
top:"3em"},function(){document.body.removeEventListener("keydown",W.Ml,!0)});document.body.addEventListener("keydown",W.Ml,!0)}},wh:function(a){!W.Pd||a.keyCode!==13&&a.keyCode!==27&&a.keyCode!==32||(W.Kd(!0),a.stopPropagation(),a.preventDefault())},vn:function(){document.body.addEventListener("keydown",W.wh,!0)},yn:function(){document.body.removeEventListener("keydown",W.wh,!0)},Ml:function(a){W.wh(a);a.keyCode!==13&&a.keyCode!==32||vl()}};window.BlocklyDialogs=W;var Al="";function Bl(a){if(a){var b=a.match(/^block_id_([^']+)$/);b&&(a=b[1])}xi(a)}function Cl(a){a=a.replace(/(,\s*)?'block_id_[^']+'\)/g,")");return a.replace(/\s+$/,"")}function Dl(){setTimeout(function(){var a=document.createElement("script");a.type="text/javascript";a.src="third-party/JS-Interpreter/compressed.js";document.head.appendChild(a)},1)}
function El(){setTimeout(function(){var a=document.createElement("link");a.rel="stylesheet";a.type="text/css";a.href="common/prettify.css";document.head.appendChild(a);a=document.createElement("script");a.type="text/javascript";a.src="common/prettify.js";document.head.appendChild(a)},1)}
function Fl(){var a=S("dialogDone");if(J){var b=S("dialogLinesText");b.textContent="";var c=Al;c=Cl(c);var d=c.replace(/\/\/[^\n]*/g,"");d=d.replace(/\/\*.*\*\//g,"");d=d.replace(/[ \t]+\n/g,"\n");d=d.replace(/\n+/g,"\n");d=d.trim();d=d.split("\n").length;var e=S("containerCode");e.textContent=c;typeof prettyPrintOne==="function"&&(c=e.innerHTML,c=prettyPrintOne(c,"js"),e.innerHTML=c);c=d===1?U("Games.linesOfCode1",!1):U("Games.linesOfCode2",!1).replace("%1",String(d));b.appendChild(document.createTextNode(c))}b=
T<10?U("Games.nextLevel",!1).replace("%1",String(T+1)):U("Games.finalLevel",!1);c=S("doneOk");c.addEventListener("click",wl,!0);c.addEventListener("touchend",wl,!0);W.Ag(a,null,!1,!0,{width:"40%",left:"30%",top:"3em"},function(){document.body.removeEventListener("keydown",Gl,!0)});document.body.addEventListener("keydown",Gl,!0);S("dialogDoneText").textContent=b}function Gl(a){W.wh(a);a.keyCode!==13&&a.keyCode!==32||wl()};function Hl(a,b,c,d,e,f,h){if(!a)throw Error("Src value of an image field is required");a=eb(a);c=Number(eb(c));b=Number(eb(b));if(isNaN(c)||isNaN(b))throw Error("Height and width values of an image field must cast to numbers.");if(c<=0||b<=0)throw Error("Height and width values of an image field must be greater than 0.");this.Rf=!1;this.hh="";Hl.i.constructor.call(this,a,null,h);h||(this.Rf=!!f,this.hh=eb(d)||"");this.Va=new Ga(b,c+Il);this.tp=c;this.Dc=null;typeof e=="function"&&(this.Dc=e);this.eb=
null}H(Hl,Sg);Hl.prototype.Hi="";Hl.L=function(a){return new Hl(a.src,a.width,a.height,void 0,void 0,void 0,a)};var Il=1;g=Hl.prototype;g.qf=!1;g.$c=!1;g.Cf=function(a){Hl.i.Cf.call(this,a);this.Rf=!!a.flipRtl;this.hh=eb(a.alt)||""};g.Kh=function(){this.eb=z(Wb,{height:this.tp+"px",width:this.Va.width+"px",alt:this.hh},this.lb);this.eb.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.pb);this.Dc&&(this.eb.style.cursor="pointer")};g.En=function(){};
g.Ah=function(a){return typeof a!="string"?null:a};g.Lf=function(a){this.pb=a;this.eb&&this.eb.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",String(this.pb))};g.rm=function(){return this.Rf};g.xi=function(){this.Dc&&this.Dc(this)};g.Ej=function(){return this.hh};B(Nc,"field_image",Hl);function Jl(){var a=[[U("Maze.turnLeft",!1),"turnLeft"],[U("Maze.turnRight",!1),"turnRight"]],b=[[U("Maze.pathAhead",!1),"isPathForward"],[U("Maze.pathLeft",!1),"isPathLeft"],[U("Maze.pathRight",!1),"isPathRight"]];If("maze_turn_arrows",function(){var c=mj(Ad(this,"DIR"));c[c.length-2][0]+=" \u21ba";c[c.length-1][0]+=" \u21bb"});jj([{type:"maze_moveForward",message0:U("Maze.moveForward",!1),previousStatement:null,nextStatement:null,colour:290,tooltip:U("Maze.moveForwardTooltip",!1)},{type:"maze_turn",
message0:"%1",args0:[{type:"field_dropdown",name:"DIR",options:a}],previousStatement:null,nextStatement:null,colour:290,tooltip:U("Maze.turnTooltip",!1),extensions:["maze_turn_arrows"]},{type:"maze_if",message0:"%1%2"+U("Maze.doCode",!1)+"%3",args0:[{type:"field_dropdown",name:"DIR",options:b},{type:"input_dummy"},{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,colour:210,tooltip:U("Maze.ifTooltip",!1),extensions:["maze_turn_arrows"]},{type:"maze_ifElse",message0:"%1%2"+
U("Maze.doCode",!1)+"%3"+window.BlocklyMsg.CONTROLS_IF_MSG_ELSE+"%4",args0:[{type:"field_dropdown",name:"DIR",options:b},{type:"input_dummy"},{type:"input_statement",name:"DO"},{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,colour:210,tooltip:U("Maze.ifelseTooltip",!1),extensions:["maze_turn_arrows"]},{type:"maze_forever",message0:U("Maze.repeatUntil",!1)+"%1%2"+U("Maze.doCode",!1)+"%3",args0:[{type:"field_image",src:"maze/marker.png",width:12,height:16},{type:"input_dummy"},
{type:"input_statement",name:"DO"}],previousStatement:null,colour:120,tooltip:U("Maze.whileTooltip",!1)}])}R.maze_moveForward=function(a){return"moveForward('block_id_"+a.id+"');\n"};R.maze_turn=function(a){return jf(a,"DIR")+"('block_id_"+a.id+"');\n"};R.maze_if=function(a){var b=jf(a,"DIR")+"('block_id_"+a.id+"')";a=uj(a,"DO");return"if ("+b+") {\n"+a+"}\n"};R.maze_ifElse=function(a){var b=jf(a,"DIR")+"('block_id_"+a.id+"')",c=uj(a,"DO");a=uj(a,"ELSE");return"if ("+b+") {\n"+c+"} else {\n"+a+"}\n"};
R.maze_forever=function(a){var b=uj(a,"DO");R.tl&&(b=R.tl.replace(/%1/g,"'block_id_"+a.id+"'")+b);return"while (notDone()) {\n"+b+"}\n"};function Kl(){return'\n<div class="farSide farSideButtons">\n  <button class="secondary addHideHandler">'+Tj(q.DIALOG_OK)+"</button>\n</div>\n"};function Ll(){var a=U("Games.maze",!0),b=ml,c='<button id="pegmanButton"><img src="common/1x1.gif"><span id="pegmanButtonArrow"></span></button>';var d='\n&nbsp;\n<button id="linkButton" title="'+U("Games.linkTooltip",!0)+'">\n  <img src="common/1x1.gif" class="link icon21">\n</button>\n';c&&(c=" &nbsp; "+c);a='\n<span id="title">\n  <a href="'+(Mj?"index.html":"./")+"?lang="+Jj+'">'+U("Games.name",!0)+"</a> : "+a+"\n</span>\n";if(T){for(var e=" &nbsp ",f=1;f<=10;f++){var h="?lang="+Jj+"&level="+
f;b&&(h+="&"+b);e+=" ";e=f===T?e+('<span class="level_number level_done" id="level'+f+'">'+f+"</span>"):f===10?e+('<a class="level_number" id="level'+f+'" href="'+h+'">'+f+"</a>"):e+('<a class="level_dot" id="level'+f+'" href="'+h+'"></a>')}b=e}else b="";c='\n\n<table width="100%">\n  <tr>\n    <td>\n      <h1>\n        '+(a+"\n        "+b+'\n      </h1>\n    </td>\n    <td id="header_cta" class="farSide">\n      <select id="languageMenu"></select>\n      '+d+"\n      \n      "+c+'\n    </td>\n  </tr>\n</table>\n\n\n<div id="visualization">\n  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="svgMaze" width="400px" height="400px">\n    <g id="look">\n      <path d="M 0,-15 a 15 15 0 0 1 15 15" />\n      <path d="M 0,-35 a 35 35 0 0 1 35 35" />\n      <path d="M 0,-55 a 55 55 0 0 1 55 55" />\n    </g>\n  </svg>\n  <div id="capacityBubble">\n    <div id="capacity"></div>\n  </div>\n</div>\n\n<div id="commandDiv">\n  <button id="runButton" class="primary" title="')+
U("Maze.runTooltip",!0)+'">\n    <img src="common/1x1.gif" class="run icon21"> '+U("Games.runProgram",!0)+'\n  </button>\n  <button id="resetButton" class="primary" title="'+U("Maze.resetTooltip",!0)+'">\n    <img src="common/1x1.gif" class="stop icon21"> '+U("Games.resetProgram",!0)+"\n  </button>\n</div>\n\n";d='\n<block type="maze_moveForward"></block>\n<block type="maze_turn"><field name="DIR">turnLeft</field></block>\n<block type="maze_turn"><field name="DIR">turnRight</field></block>\n';T>2&&
(d+='<block type="maze_forever"></block>\n',T===6?d+='<block type="maze_if"><field name="DIR">isPathLeft</field></block>\n':T>6&&(d+='<block type="maze_if"></block>\n',T>8&&(d+='<block type="maze_ifElse"></block>\n')));return c+('<xml id="toolbox" xmlns="https://developers.google.com/blockly/xml">'+d+'</xml>\n<div id="blockly"></div>\n\n<div id="pegmanMenu"></div>\n\n\n<div id="dialogShadow" class="dialogAnimate"></div>\n<div id="dialogBorder"></div>\n<div id="dialog"></div>\n\n\n<div id="dialogDone" class="dialogHiddenContent">\n  <div class="large">')+
(U("Games.congratulations",!0)+'</div>\n  <div id="dialogLinesText" class="large"></div>\n  <pre id="containerCode"></pre>\n  <div id="dialogDoneText" class="large"></div>\n  <div id="dialogDoneButtons" class="farSide farSideButtons">\n    <button class="addHideHandler">'+Tj(q.DIALOG_CANCEL)+'</button>\n    <button id="doneOk" class="secondary">'+Tj(q.DIALOG_OK)+'</button>\n  </div>\n</div>\n\n\n<div id="dialogAbort" class="dialogHiddenContent">\n  ')+(U("Games.helpAbort",!0)+'\n  <div class="farSide farSideButtons">\n    <button class="addHideHandler">'+
Tj(q.DIALOG_CANCEL)+'</button>\n    <button id="abortOk" class="secondary">'+Tj(q.DIALOG_OK)+'</button>\n  </div>\n</div>\n\n\n<div id="dialogStorage" class="dialogHiddenContent">\n  <div id="containerStorage"></div>\n  ')+(Kl()+'\n</div>\n\n\n\n<div id="dialogHelpStack" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="common/help.png">\n  </td><td>&nbsp;</td><td>\n    ')+(U("Maze.helpStack",!0)+'\n  </td><td valign="top">\n    <img src="maze/help_stack.png" class="mirrorImg" height=63 width=136>\n  </td></tr></table>\n</div>\n<div id="dialogHelpOneTopBlock" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="common/help.png">\n  </td><td>&nbsp;</td><td>\n    '+
U("Maze.helpOneTopBlock",!0)+'\n    <div id="sampleOneTopBlock" class="readonly"></div>\n  </td></tr></table>\n</div>\n<div id="dialogHelpRun" class="dialogHiddenContent">\n  <table><tr><td>\n    '+U("Maze.helpRun",!0)+'\n  </td><td rowspan=2>\n    <img src="common/help.png">\n  </td></tr><tr><td>\n    <div><img src="maze/help_run.png" class="mirrorImg" height=27 width=141></div>\n  </td></tr></table>\n</div>\n<div id="dialogHelpReset" class="dialogHiddenContent">\n  <table><tr><td>\n    '+U("Maze.helpReset",
!0)+'\n  </td><td rowspan=2>\n    <img src="common/help.png">\n  </td></tr><tr><td>\n    <div><img src="maze/help_run.png" class="mirrorImg" height=27 width=141></div>\n  </td></tr></table>\n</div>\n<div id="dialogHelpRepeat" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="maze/help_up.png">\n  </td><td>\n    '+U("Maze.helpRepeat",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelpCapacity" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="common/help.png">\n  </td><td>&nbsp;</td><td>\n    '+
U("Maze.helpCapacity",!0)+'\n  </td></tr></table>\n</div>\n<div id="dialogHelpRepeatMany" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="maze/help_up.png">\n  </td><td>\n    '+U("Maze.helpRepeatMany",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelpSkins" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="common/help.png">\n  </td><td width="95%">\n    '+U("Maze.helpSkins",!0)+'\n  </td><td>\n    <img src="maze/help_up.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelpIf" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="maze/help_up.png">\n  </td><td>\n    '+
U("Maze.helpIf",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelpMenu" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="maze/help_up.png">\n  </td><td id="helpMenuText">\n    '+U("Maze.helpMenu",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelpIfElse" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="maze/help_down.png">\n  </td><td>\n    '+U("Maze.helpIfElse",!0)+'\n  </td><td>\n    <img src="common/help.png">\n  </td></tr></table>\n</div>\n<div id="dialogHelpWallFollow" class="dialogHiddenContent">\n  <table><tr><td>\n    <img src="common/help.png">\n  </td><td>&nbsp;</td><td>\n    '+
U("Maze.helpWallFollow",!0)+"\n    "+Kl()+"\n  </td></tr></table>\n</div>\n\n")};var Rj="maze",ul=[Infinity,Infinity,2,5,5,5,5,10,7,10][T-1],Ml=[{ff:"maze/pegman.png",bl:"maze/tiles_pegman.png",background:!1,Yj:"#000",il:["maze/win.mp3","maze/win.ogg"],dj:["maze/fail_pegman.mp3","maze/fail_pegman.ogg"],rh:1},{ff:"maze/astro.png",bl:"maze/tiles_astro.png",background:"maze/bg_astro.jpg",Yj:"#fff",il:["maze/win.mp3","maze/win.ogg"],dj:["maze/fail_astro.mp3","maze/fail_astro.ogg"],rh:2},{ff:"maze/panda.png",bl:"maze/tiles_panda.png",background:"maze/bg_panda.jpg",Yj:"#000",il:["maze/win.mp3",
"maze/win.ogg"],dj:["maze/fail_panda.mp3","maze/fail_panda.ogg"],rh:3}],Nl=Oj("skin",0,Ml.length-1),Ol=Ml[Nl],Pl=[[[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0],[0,0,2,1,3,0,0],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,1,3,0,0,0],[0,0,2,1,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,2,1,1,1,1,3,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],
[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,1],[0,0,0,0,0,0,1,1],[0,0,0,0,0,3,1,0],[0,0,0,0,1,1,0,0],[0,0,0,1,1,0,0,0],[0,0,1,1,0,0,0,0],[0,2,1,0,0,0,0,0],[1,1,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,3,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,0,0,1,0,0],[0,0,0,2,1,1,0,0],[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,1,1,1,1,0,0],[0,1,0,0,0,1,0,0],[0,1,1,3,0,1,0,0],[0,0,0,0,0,1,0,0],[0,2,1,1,1,1,0,0],[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0],[0,2,1,
1,1,1,0,0],[0,0,0,0,0,1,1,0],[0,1,1,3,0,1,0,0],[0,1,0,1,0,1,0,0],[0,1,1,1,1,1,1,0],[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,1,1,1,1,0,0,0],[0,1,0,0,1,1,0,0],[0,1,1,1,0,1,0,0],[0,0,0,1,0,1,0,0],[0,2,1,1,0,3,0,0],[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,1,1,1,1,1,0,0],[0,0,1,0,0,0,0,0],[3,1,1,1,1,1,1,0],[0,1,0,1,0,1,1,0],[1,1,1,1,1,0,1,0],[0,1,0,1,0,2,1,0],[0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0],[0,1,1,0,3,0,1,0],[0,1,1,0,1,1,1,0],[0,1,0,1,0,1,0,0],[0,1,1,1,1,1,1,0],[0,0,0,1,0,0,1,0],
[0,2,1,1,1,0,1,0],[0,0,0,0,0,0,0,0]]][T-1],Ql=Pl.length,Rl=Pl[0].length,Sl=50*Rl,Tl=50*Ql,Ul=0,Vl=[],Wl={10010:[4,0],10001:[3,3],11E3:[0,1],10100:[0,2],11010:[4,1],10101:[3,2],10110:[0,0],10011:[2,0],11001:[4,2],11100:[2,3],11110:[1,1],10111:[1,0],11011:[2,1],11101:[1,2],11111:[2,2],null0:[4,3],null1:[3,0],null2:[3,1],null3:[0,3],null4:[1,3]},Xl,Yl,Zl,X,Y,Z,$l=[];
function am(){function a(l,m){return l<0||l>=Rl||m<0||m>=Ql?"0":Pl[m][l]===0?"0":"1"}var b=S("svgMaze"),c=Math.max(Ql,Rl)*50;b.setAttribute("viewBox","0 0 "+c+" "+c);z("rect",{height:Tl,width:Sl,fill:"#F1EEE7","stroke-width":1,stroke:"#CCB"},b);Ol.background&&z("image",{height:Tl,width:Sl,x:0,y:0},b).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Ol.background);for(var d=c=0;d<Ql;d++)for(var e=0;e<Rl;e++){var f=a(e,d)+a(e,d-1)+a(e+1,d)+a(e,d+1)+a(e-1,d);Wl[f]||(f=f==="00000"&&Math.random()>
.3?"null0":"null"+Math.floor(1+Math.random()*4));var h=Wl[f][0];f=Wl[f][1];var k=z("clipPath",{id:"tileClipPath"+c},b);z("rect",{height:50,width:50,x:e*50,y:d*50},k);z("image",{height:200,width:250,"clip-path":"url(#tileClipPath"+c+")",x:(e-h)*50,y:(d-f)*50},b).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Ol.bl);c++}z("image",{id:"finish",height:34,width:20},b).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","maze/marker.png");c=z("clipPath",{id:"pegmanClipPath"},b);z("rect",
{id:"clipRect",height:52,width:49},c);z("image",{id:"pegman",height:52,width:1029,"clip-path":"url(#pegmanClipPath)"},b).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Ol.ff)}
function bm(a){if(!(a&&a.Sj||J.wb()||Ul===1||Qj(T))){var b=od(hd()),c=Yh(J).g.ra(!0),d=a=null,e=null;if(T===1)ff(J).length<2?(a=S("dialogHelpStack"),e={width:"370px",top:"130px"},e[Lj?"right":"left"]="215px",d=c[0].I()):(c=J.ra(!0),c.length>1?(a='<xml>;<block type="maze_moveForward" x="10" y="10">;<next>;<block type="maze_moveForward"></block>;</next>;</block>;</xml>'.split(";"),d=S("sampleOneTopBlock"),d.firstChild||(d=Bi(d,{rtl:Lj,readOnly:!0}),typeof a!=="string"&&(a=a.join("")),qd(pd(a),d)),a=
S("dialogHelpOneTopBlock"),e={width:"360px",top:"120px"},e[Lj?"right":"left"]="225px",d=c[0].I()):Ul===0&&(a=S("dialogHelpRun"),e={width:"360px",top:"410px"},e[Lj?"right":"left"]="400px",d=S("runButton")));else if(T===2)Ul!==0&&S("runButton").style.display==="none"&&(a=S("dialogHelpReset"),e={width:"360px",top:"410px"},e[Lj?"right":"left"]="400px",d=S("resetButton"));else if(T===3)b.includes("maze_forever")||(pf(J)?(a=S("dialogHelpRepeat"),e={width:"360px",top:"360px"},e[Lj?"right":"left"]="425px",
d=c[3].I()):(a=S("dialogHelpCapacity"),e={width:"430px",top:"310px"},e[Lj?"right":"left"]="50px",d=S("capacityBubble")));else if(T===4)if(pf(J)||b.includes("maze_forever")&&!(J.ra(!1).length>1)){b=!0;var f=nf(J,"maze_forever");f=ba(f);for(var h=f.next();!h.done;h=f.next()){h=nh(h.value,"DO");for(var k=0;h;)k++,h=nb(h);if(k>1){b=!1;break}}b&&(a=S("dialogHelpRepeatMany"),e={width:"360px",top:"360px"},e[Lj?"right":"left"]="425px",d=c[3].I())}else a=S("dialogHelpCapacity"),e={width:"430px",top:"310px"},
e[Lj?"right":"left"]="50px",d=S("capacityBubble");else if(T===5)Nl!==0||cm.Mo||(a=S("dialogHelpSkins"),e={width:"360px",top:"60px"},e[Lj?"left":"right"]="20px",d=S("pegmanButton"));else if(T===6)b.includes("maze_if")||(a=S("dialogHelpIf"),e={width:"360px",top:"430px"},e[Lj?"right":"left"]="425px",d=c[4].I());else if(T===7){if(!bm.up){f=document.createElement("span");f.className="helpMenuFake";h=[U("Maze.pathAhead",!1),U("Maze.pathLeft",!1),U("Maze.pathRight",!1)];k=Aa(h);var l=Ca(h);f.textContent=
(l?h[0].slice(k,-l):h[0].substring(k))+" "+nj;h=S("helpMenuText");k=h.textContent;h.textContent="";k=k.split(/%\d/);for(l=0;l<k.length;l++)h.appendChild(document.createTextNode(k[l])),l!==k.length-1&&h.appendChild(f.cloneNode(!0));bm.up=!0}b.includes("isPathRight")||(a=S("dialogHelpMenu"),e={width:"360px",top:"430px"},e[Lj?"right":"left"]="425px",d=c[4].I())}else T!==9||b.includes("maze_ifElse")||(a=S("dialogHelpIfElse"),e={width:"360px",top:"305px"},e[Lj?"right":"left"]="425px",d=c[5].I());a?a.parentNode!==
S("dialog")&&W.Ag(a,d,!0,!1,e,null):W.Kd(!1)}}var dm;function cm(a){var b=S("pegmanMenu");b.style.display==="block"?em(a):xl(a)||(a=S("pegmanButton"),a.classList.add("buttonHover"),b.style.top=a.offsetTop+a.offsetHeight+"px",b.style.left=a.offsetLeft+"px",b.style.display="block",dm=u(document.body,"mousedown",null,em),(b=S("dialogHelpSkins"))&&b.className!=="dialogHiddenContent"&&W.Kd(!1),cm.Mo=!0)}
function em(a){xl(a)||(S("pegmanMenu").style.display="none",S("pegmanButton").classList.remove("buttonHover"),dm&&(v(dm),dm=void 0))}
function fm(a){Vl.forEach(clearTimeout);Vl.length=0;X=Yl.x;Y=Yl.y;a?(Z=2,gm(!1),Vl.push(setTimeout(function(){Xl=100;hm([X,Y,Z*4-4]);Z++},Xl*5))):(Z=1,im(X,Y,Z*4));a=S("finish");a.setAttribute("x",50*(Zl.x+.5)-a.getAttribute("width")/2);a.setAttribute("y",50*(Zl.y+.6)-a.getAttribute("height"));a=S("look");a.style.display="none";a.parentNode.appendChild(a);a=ba(a.getElementsByTagName("path"));for(var b=a.next();!b.done;b=a.next())b.value.setAttribute("stroke",Ol.Yj)}
function jm(a){if(!xl(a))if(W.Kd(!1),T===1&&J.ra(!1).length>1&&Ul!==1&&!Qj(T))bm();else{a=S("runButton");var b=S("resetButton");b.style.minWidth||(b.style.minWidth=a.offsetWidth+"px");a.style.display="none";b.style.display="inline";fm(!1);km()}}
function lm(){var a=pf(J),b=S("capacity");if(a===Infinity)b.style.display="none";else{b.style.display="inline";b.innerHTML="";var c=document.createElement("span");c.className="capacityNumber";c.appendChild(document.createTextNode(Number(a)));a=(a===0?U("Maze.capacity0",!1):a===1?U("Maze.capacity1",!1):U("Maze.capacity2",!1)).split(/%\d/);for(var d=0;d<a.length;d++)b.appendChild(document.createTextNode(a[d])),d!==a.length-1&&b.appendChild(c.cloneNode(!0))}}
function mm(a){xl(a)||(S("runButton").style.display="inline",S("resetButton").style.display="none",xi(null),fm(!1),bm())}
function nm(a,b){function c(e){a.setProperty(b,e,a.createNativeFunction(d,!1))}var d=function(e){om(0,e)};c("moveForward");d=function(e){om(2,e)};c("moveBackward");d=function(e){pm(0,e)};c("turnLeft");d=function(e){pm(1,e)};c("turnRight");d=function(e){return qm(0,e)};c("isPathForward");d=function(e){return qm(1,e)};c("isPathRight");d=function(e){return qm(2,e)};c("isPathBackward");d=function(e){return qm(3,e)};c("isPathLeft");d=function(){return X!==Zl.x||Y!==Zl.y};c("notDone")}
function km(){function a(d){return U(d,!1).toLowerCase().replace(/[-_'\s]+(\S)/g,function(e,f){return f.toUpperCase()})}if("Interpreter"in window){$l.length=0;L&&tg(L);var b=pj();ll=ol();Ul=0;var c=new Interpreter(b,nm);Al=b.replaceAll("moveForward",a("Maze.moveForward")).replaceAll("turnRight",a("Maze.turnRight")).replaceAll("turnLeft",a("Maze.turnLeft"));try{for(b=1E4;c.step();)if(b--===0)throw Infinity;Ul=X!==Zl.x||Y!==Zl.y?-1:1}catch(d){d===Infinity?Ul=2:d===!1?Ul=-2:(Ul=-2,alert(d))}Ul===1?(Xl=
100,$l.push(["finish",null])):Xl=150;fm(!1);Vl.push(setTimeout(rm,100))}else setTimeout(km,99)}
function rm(){var a=$l.shift();if(a){Bl(a[1]);switch(a[0]){case "north":hm([X,Y-1,Z*4]);Y--;break;case "east":hm([X+1,Y,Z*4]);X++;break;case "south":hm([X,Y+1,Z*4]);Y++;break;case "west":hm([X-1,Y,Z*4]);X--;break;case "look_north":sm(0);break;case "look_east":sm(1);break;case "look_south":sm(2);break;case "look_west":sm(3);break;case "fail_forward":tm(!0);break;case "fail_backward":tm(!1);break;case "left":hm([X,Y,Z*4-4]);Z=um(Z-1);break;case "right":hm([X,Y,Z*4+4]);Z=um(Z+1);break;case "finish":gm(!0),
window.localStorage&&(window.localStorage[Rj+T]=ll),setTimeout(Fl,1E3)}Vl.push(setTimeout(rm,Xl*5))}else Bl(null),bm()}function vm(a){if(S("dialogDone").className!=="dialogHiddenContent"){var b=S("pegSpin"),c=W.getBBox(b),d=a.clientX-(c.x+c.width/2-window.pageXOffset);a=Math.atan((a.clientY-(c.y+c.height/2-window.pageYOffset))/d)*180/Math.PI;d=Math.round((d>0?a+90:a+270)/360*16);d===16&&(d=15);b.style.backgroundPosition=-d*49+"px 0px"}}
function hm(a){var b=[X,Y,Z*4],c=[(a[0]-b[0])/4,(a[1]-b[1])/4,(a[2]-b[2])/4];im(b[0]+c[0],b[1]+c[1],wm(b[2]+c[2]));Vl.push(setTimeout(function(){im(b[0]+c[0]*2,b[1]+c[1]*2,wm(b[2]+c[2]*2))},Xl));Vl.push(setTimeout(function(){im(b[0]+c[0]*3,b[1]+c[1]*3,wm(b[2]+c[2]*3))},Xl*2));Vl.push(setTimeout(function(){im(a[0],a[1],wm(a[2]))},Xl*3))}
function tm(a){var b=0,c=0;switch(Z){case 0:c=-1;break;case 1:b=1;break;case 2:c=1;break;case 3:b=-1}a||(b=-b,c=-c);if(Ol.rh===1){b/=4;c/=4;var d=wm(Z*4);im(X+b,Y+c,d);J.jb.play("fail",.5);Vl.push(setTimeout(function(){im(X,Y,d)},Xl));Vl.push(setTimeout(function(){im(X+b,Y+c,d);J.jb.play("fail",.5)},Xl*2));Vl.push(setTimeout(function(){im(X,Y,d)},Xl*3))}else{var e=(Math.random()-.5)*10,f=(Math.random()-.5)/2;b+=(Math.random()-.5)/4;c+=(Math.random()-.5)/4;b/=8;c/=8;var h=0;Ol.rh===3&&(h=.01);Vl.push(setTimeout(function(){J.jb.play("fail",
.5)},Xl*2));a=function(l){return function(){im(X+b*l,Y+c*l,wm(Z*4+f*l),e*l);c+=h}};for(var k=1;k<100;k++)Vl.push(setTimeout(a(k),Xl*k/2))}}function gm(a){var b=wm(Z*4);im(X,Y,16);a&&J.jb.play("win",.5);Xl=150;Vl.push(setTimeout(function(){im(X,Y,18)},Xl));Vl.push(setTimeout(function(){im(X,Y,16)},Xl*2));Vl.push(setTimeout(function(){im(X,Y,b)},Xl*3))}
function im(a,b,c,d){var e=S("pegman");e.setAttribute("x",a*50-c*49+1);e.setAttribute("y",50*(b+.5)-26-8);d?e.setAttribute("transform","rotate("+d+", "+(a*50+25)+", "+(b*50+25)+")"):e.setAttribute("transform","rotate(0, 0, 0)");b=S("clipRect");b.setAttribute("x",a*50+1);b.setAttribute("y",e.getAttribute("y"))}
function sm(a){var b=X,c=Y;switch(a){case 0:b+=.5;break;case 1:b+=1;c+=.5;break;case 2:b+=.5;c+=1;break;case 3:c+=.5}b*=50;c*=50;var d=a*90-45;a=S("look");a.setAttribute("transform","translate("+b+", "+c+") rotate("+d+" 0 0) scale(.4)");b=a.getElementsByTagName("path");a.style.display="inline";for(c=0;c<b.length;c++)xm(b[c],Xl*c)}function xm(a,b){Vl.push(setTimeout(function(){a.style.display="inline";setTimeout(function(){a.style.display="none"},Xl*2)},b))}
function um(a){a=Math.round(a)%4;a<0&&(a+=4);return a}function wm(a){a=Math.round(a)%16;a<0&&(a+=16);return a}function om(a,b){if(!qm(a,null))throw $l.push(["fail_"+(a?"backward":"forward"),b]),!1;switch(um(Z+a)){case 0:Y--;var c="north";break;case 1:X++;c="east";break;case 2:Y++;c="south";break;case 3:X--,c="west"}$l.push([c,b])}function pm(a,b){a?(Z++,$l.push(["right",b])):(Z--,$l.push(["left",b]));Z=um(Z)}
function qm(a,b){switch(um(Z+a)){case 0:var c=Pl[Y-1]&&Pl[Y-1][X];var d="look_north";break;case 1:c=Pl[Y][X+1];d="look_east";break;case 2:c=Pl[Y+1]&&Pl[Y+1][X];d="look_south";break;case 3:c=Pl[Y][X-1],d="look_west"}b&&$l.push([d,b]);return c!==0&&c!==void 0}
(function(a){function b(){window.BlocklyGamesMsg?(window.BlocklyMsg&&(q=window.BlocklyMsg),a()):setTimeout(b,99)}window.addEventListener("load",b)})(function(){function a(){h.style.top=Math.max(10,k.offsetTop-window.pageYOffset)+"px";h.style.left=Lj?"10px":"420px";h.style.width=window.innerWidth-440+"px"}function b(l){return function(){window.sessionStorage&&(window.sessionStorage.Xj=ol());location=location.protocol+"//"+location.host+location.pathname+"?lang="+Jj+"&level="+T+"&skin="+l}}Jl();ml=
"&skin="+Nl;document.body.innerHTML=Ll();nl();document.querySelector("#pegmanButton>img").style.backgroundImage="url("+Ol.ff+")";for(var c=S("pegmanMenu"),d=0;d<Ml.length;d++)if(d!==Nl){var e=document.createElement("div"),f=document.createElement("img");f.src="common/1x1.gif";f.style.backgroundImage="url("+Ml[d].ff+")";e.appendChild(f);c.appendChild(e);u(e,"mousedown",null,b(d))}u(window,"resize",null,em);c=S("pegmanButton");u(c,"mousedown",null,cm);S("pegmanButtonArrow").appendChild(document.createTextNode(nj));
var h=S("blockly"),k=S("visualization");window.addEventListener("scroll",function(){a(null);Fi(J)});window.addEventListener("resize",a);a(null);tl();J.jb.load(Ol.il,"win");J.jb.load(Ol.dj,"fail");vj("moveForward,moveBackward,turnRight,turnLeft,isPathForward,isPathRight,isPathBackward,isPathLeft");am();rl();for(c=0;c<Ql;c++)for(d=0;d<Rl;d++)Pl[c][d]===2?Yl={x:d,y:c}:Pl[c][d]===3&&(Zl={x:d,y:c});fm(!0);tf(J,lm);document.body.addEventListener("mousemove",vm,!0);Sj("runButton",jm);Sj("resetButton",mm);
T===1&&(na=ma*=2);T===10?Qj(T)||(c=S("dialogHelpWallFollow"),W.Ag(c,null,!1,!0,{width:"30%",left:"35%",top:"12em"},W.yn),W.vn(),setTimeout(W.Nl,3E5)):setTimeout(function(){tf(J,bm);bm()},5E3);c=S("dialogDoneButtons");d=document.createElement("img");d.id="pegSpin";d.src="common/1x1.gif";d.style.backgroundImage="url("+Ol.ff+")";c.parentNode.insertBefore(d,c);Dl();El()});
