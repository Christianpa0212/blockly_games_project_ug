// Automatically generated file.  Do not edit!
var g;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function ba(a){var b=typeof Symbol!="undefined"&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if(typeof a.length=="number")return{next:aa(a)};throw Error(String(a)+" is not an iterable or ArrayLike");}var ca=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function da(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var ea=da(this);function fa(a,b){if(b)a:{var c=ea;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&b!=null&&ca(c,a,{configurable:!0,writable:!0,value:b})}}
fa("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,h){this.lm=f;ca(this,"description",{configurable:!0,writable:!0,value:h})}if(a)return a;c.prototype.toString=function(){return this.lm};var d="jscomp_symbol_"+(Math.random()*1E9>>>0)+"_",e=0;return b});
fa("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=ea[b[c]];typeof d==="function"&&typeof d.prototype[a]!="function"&&ca(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(aa(this))}})}return a});function ha(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}
function ia(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
fa("WeakMap",function(a){function b(l){this.ud=(k+=Math.random()+1).toString();if(l){l=ba(l);for(var m;!(m=l.next()).done;)m=m.value,this.set(m[0],m[1])}}function c(){}function d(l){var m=typeof l;return m==="object"&&l!==null||m==="function"}function e(l){if(!ia(l,h)){var m=new c;ca(l,h,{value:m})}}function f(l){var m=Object[l];m&&(Object[l]=function(n){if(n instanceof c)return n;Object.isExtensible(n)&&e(n);return m(n)})}if(function(){if(!a||!Object.seal)return!1;try{var l=Object.seal({}),m=Object.seal({}),
n=new a([[l,2],[m,3]]);if(n.get(l)!=2||n.get(m)!=3)return!1;n.delete(l);n.set(m,4);return!n.has(l)&&n.get(m)==4}catch(u){return!1}}())return a;var h="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var k=0;b.prototype.set=function(l,m){if(!d(l))throw Error("Invalid WeakMap key");e(l);if(!ia(l,h))throw Error("WeakMap key fail: "+l);l[h][this.ud]=m;return this};b.prototype.get=function(l){return d(l)&&ia(l,h)?l[h][this.ud]:void 0};b.prototype.has=function(l){return d(l)&&
ia(l,h)&&ia(l[h],this.ud)};b.prototype.delete=function(l){return d(l)&&ia(l,h)&&ia(l[h],this.ud)?delete l[h][this.ud]:!1};return b});
fa("Map",function(a){function b(){var k={};return k.Ic=k.next=k.head=k}function c(k,l){var m=k[1];return ha(function(){if(m){for(;m.head!=k[1];)m=m.Ic;for(;m.next!=m.head;)return m=m.next,{done:!1,value:l(m)};m=null}return{done:!0,value:void 0}})}function d(k,l){var m=l&&typeof l;m=="object"||m=="function"?f.has(l)?m=f.get(l):(m=""+ ++h,f.set(l,m)):m="p_"+l;var n=k[0][m];if(n&&ia(k[0],m))for(k=0;k<n.length;k++){var u=n[k];if(l!==l&&u.key!==u.key||l===u.key)return{id:m,list:n,index:k,entry:u}}return{id:m,
list:n,index:-1,entry:void 0}}function e(k){this[0]={};this[1]=b();this.size=0;if(k){k=ba(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}}if(function(){if(!a||typeof a!="function"||!a.prototype.entries||typeof Object.seal!="function")return!1;try{var k=Object.seal({x:4}),l=new a(ba([[k,"s"]]));if(l.get(k)!="s"||l.size!=1||l.get({x:4})||l.set({x:4},"t")!=l||l.size!=2)return!1;var m=l.entries(),n=m.next();if(n.done||n.value[0]!=k||n.value[1]!="s")return!1;n=m.next();return n.done||n.value[0].x!=
4||n.value[1]!="t"||!m.next().done?!1:!0}catch(u){return!1}}())return a;var f=new WeakMap;e.prototype.set=function(k,l){k=k===0?0:k;var m=d(this,k);m.list||(m.list=this[0][m.id]=[]);m.entry?m.entry.value=l:(m.entry={next:this[1],Ic:this[1].Ic,head:this[1],key:k,value:l},m.list.push(m.entry),this[1].Ic.next=m.entry,this[1].Ic=m.entry,this.size++);return this};e.prototype.delete=function(k){k=d(this,k);return k.entry&&k.list?(k.list.splice(k.index,1),k.list.length||delete this[0][k.id],k.entry.Ic.next=
k.entry.next,k.entry.next.Ic=k.entry.Ic,k.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this[0]={};this[1]=this[1].Ic=b();this.size=0};e.prototype.has=function(k){return!!d(this,k).entry};e.prototype.get=function(k){return(k=d(this,k).entry)&&k.value};e.prototype.entries=function(){return c(this,function(k){return[k.key,k.value]})};e.prototype.keys=function(){return c(this,function(k){return k.key})};e.prototype.values=function(){return c(this,function(k){return k.value})};e.prototype.forEach=
function(k,l){for(var m=this.entries(),n;!(n=m.next()).done;)n=n.value,k.call(l,n[1],n[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var h=0;return e});function ja(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e}fa("Array.prototype.keys",function(a){return a?a:function(){return ja(this,function(b){return b})}});
fa("Object.is",function(a){return a?a:function(b,c){return b===c?b!==0||1/b===1/c:b!==b&&c!==c}});fa("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(c<0&&(c=Math.max(c+e,0));c<e;c++){var f=d[c];if(f===b||Object.is(f,b))return!0}return!1}});
fa("String.prototype.includes",function(a){return a?a:function(b,c){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return(this+"").indexOf(b,c||0)!==-1}});
var ka={},la;function ma(a,b,c){if(c<a){var d=c;c=a;a=d}return Math.max(a,Math.min(b,c))};

var na=28,oa=na,qa=[,2,1,4,3];
var ra=Object.create(null);function sa(a){this.cj=a}sa.prototype.toString=function(){return this.cj};var ta=new sa("connectionChecker"),ua=new sa("cursor"),p=new sa("event"),va=new sa("field"),wa=new sa("renderer"),xa=new sa("toolbox"),ya=new sa("theme"),za=new sa("flyoutsVerticalToolbox"),Aa=new sa("metricsManager"),Ba=new sa("blockDragger");
function q(a,b,c){if(!(a instanceof sa)&&typeof a!="string"||String(a).trim()=="")throw Error('Invalid type "'+a+'". The type must be a non-empty string or a Blockly.registry.Type.');a=String(a).toLowerCase();if(typeof b!="string"||b.trim()=="")throw Error('Invalid name "'+b+'". The name must be a non-empty string.');b=b.toLowerCase();if(!c)throw Error("Can not register a null value");var d=ra[a];d||(d=ra[a]=Object.create(null));switch(a){case String(va):if(typeof c.K!="function")throw Error('Type "'+
a+'" must have a fromJson function');}if(d[b])throw Error('Name "'+b+'" with type "'+a+'" already registered.');d[b]=c}function Ca(a,b,c){a=String(a).toLowerCase();b=b.toLowerCase();var d=ra[a];if(!d||!d[b]){b="Unable to find ["+b+"]["+a+"] in the registry.";if(c)throw Error(b+" You must require or register a "+a+" plugin.");console.warn(b);return null}return d[b]}function Da(a,b,c){b=b.plugins[a.toString()]||"default";return typeof b=="function"?b:Ca(a,b,c)};var r=function(){return typeof self==="object"?self:typeof window==="object"?window:typeof global==="object"?global:this}();
var t={};r.Blockly||(r.Blockly={});r.Blockly.Msg||(r.Blockly.Msg=t);function Ea(a){a=String(a).toLowerCase().trim();var b=Fa[a];if(b)return b;b=a.substring(0,2)=="0x"?"#"+a.substring(2):a;b=b[0]=="#"?b:"#"+b;if(/^#[0-9a-f]{6}$/.test(b))return b;if(/^#[0-9a-f]{3}$/.test(b))return["#",b[1],b[1],b[2],b[2],b[3],b[3]].join("");var c=a.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return c&&(a=Number(c[1]),b=Number(c[2]),c=Number(c[3]),a>=0&&a<256&&b>=0&&b<256&&c>=0&&c<256)?Ga(a,b,c):null}
function Ga(a,b,c){b=a<<16|b<<8|c;return a<16?"#"+(16777216|b).toString(16).substr(1):"#"+b.toString(16)}function Ha(a){a=Ea(a);if(!a)return[0,0,0];a=parseInt(a.substr(1),16);return[a>>16,a>>8&255,a&255]}function Ia(a,b,c){a=Ea(a);if(!a)return null;b=Ea(b);if(!b)return null;a=Ha(a);b=Ha(b);return Ga(Math.round(b[0]+c*(a[0]-b[0])),Math.round(b[1]+c*(a[1]-b[1])),Math.round(b[2]+c*(a[2]-b[2])))}
var Fa={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"};function w(a,b){this.x=a;this.y=b}function Ja(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1}function Ka(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}function La(a,b){return new w(a.x+b.x,a.y+b.y)}w.prototype.clone=function(){return new w(this.x,this.y)};w.prototype.scale=function(a){this.x*=a;this.y*=a;return this};w.prototype.translate=function(a,b){this.x+=a;this.y+=b;return this};function Na(a,b,c,d){this.top=a;this.bottom=b;this.left=c;this.right=d}Na.prototype.contains=function(a,b){return a>=this.left&&a<=this.right&&b>=this.top&&b<=this.bottom};function Oa(a){return a.length?a.reduce(function(b,c){return b.length<c.length?b:c}).length:0}function Pa(a,b){if(!a.length)return 0;if(a.length==1)return a[0].length;var c=0;b=b||Oa(a);for(var d=0;d<b;d++){for(var e=a[0][d],f=1;f<a.length;f++)if(e!=a[f][d])return c;e==" "&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f][d])&&e!=" ")return c;return b}
function Qa(a,b){if(!a.length)return 0;if(a.length==1)return a[0].length;var c=0;b=b||Oa(a);for(var d=0;d<b;d++){for(var e=a[0].substr(-d-1,1),f=1;f<a.length;f++)if(e!=a[f].substr(-d-1,1))return c;e==" "&&(c=d+1)}for(f=1;f<a.length;f++)if((e=a[f].charAt(a[f].length-d-1))&&e!=" ")return c;return b}
function Ra(a,b,c){for(var d=[0],e=[],f=0;f<a.length;f++)d[d.length-1]+=a[f].length,b[f]===!0?(d.push(0),e.push(a[f].charAt(a[f].length-1))):b[f]===!1&&d[d.length-1]++;a=Math.max.apply(Math,d);for(f=b=0;f<d.length;f++)b-=Math.pow(Math.abs(c-d[f]),1.5)*2,b-=Math.pow(a-d[f],1.5),".?!".indexOf(e[f])!=-1?b+=c/3:",;)]}".indexOf(e[f])!=-1&&(b+=c/4);d.length>1&&d[d.length-1]<=d[d.length-2]&&(b+=.5);return b}
function Sa(a,b,c){for(var d=Ra(a,b,c),e,f=0;f<b.length-1;f++)if(b[f]!=b[f+1]){var h=[].concat(b);h[f]=!h[f];h[f+1]=!h[f+1];var k=Ra(a,h,c);k>d&&(d=k,e=h)}return e?Sa(a,e,c):b};function Ta(a,b){this.width=a;this.height=b};function Ua(a){var b;(b=Va(a,"display"))||(b=a.currentStyle?a.currentStyle.display:null);if((b||a.style&&a.style.display)!="none")return new Ta(a.offsetWidth,a.offsetHeight);b=a.style;var c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";var f=a.offsetWidth;a=a.offsetHeight;b.display=c;b.position=e;b.visibility=d;return new Ta(f,a)}
function Va(a,b){return document.defaultView&&document.defaultView.getComputedStyle&&(a=document.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||"":""}function Wa(a){var b=new w(0,0);a=a.getBoundingClientRect();var c=document.documentElement;c=new w(window.pageXOffset||c.scrollLeft,window.pageYOffset||c.scrollTop);b.x=a.left+c.x;b.y=a.top+c.y;return b};var Xa,Ya,Za,$a,ab,bb,cb,db,eb,fb,gb;
(function(a){function b(d){return c.indexOf(d.toUpperCase())!=-1}gb=a;var c=gb.toUpperCase();Xa=b("Trident")||b("MSIE");Ya=b("Edge");b("JavaFX");!b("Chrome")&&b("CriOS");Za=b("WebKit")&&!Ya;$a=b("Gecko")&&!Za&&!Xa&&!Ya;ab=b("Android");a=r.navigator&&r.navigator.maxTouchPoints;bb=b("iPad")||b("Macintosh")&&a>0;cb=b("iPod");db=b("iPhone")&&!bb&&!cb;eb=b("Macintosh");fb=bb||ab&&!b("Mobile")||b("Silk");!fb&&(cb||db||ab||b("IEMobile"))})(r.navigator&&r.navigator.userAgent||"");
function hb(a){a.preventDefault();a.stopPropagation()}function ib(a){return a.target.type=="textarea"||a.target.type=="text"||a.target.type=="number"||a.target.type=="email"||a.target.type=="password"||a.target.type=="search"||a.target.type=="tel"||a.target.type=="url"||a.target.isContentEditable||a.target.dataset&&a.target.dataset.Wo=="true"}
function jb(a){var b=new w(0,0),c=a.getAttribute("x");c&&(b.x=parseInt(c,10));if(c=a.getAttribute("y"))b.y=parseInt(c,10);if(c=(c=a.getAttribute("transform"))&&c.match(kb))b.x+=Number(c[1]),c[3]&&(b.y+=Number(c[3]));(a=a.getAttribute("style"))&&a.indexOf("translate")>-1&&(a=a.match(lb))&&(b.x+=Number(a[1]),a[3]&&(b.y+=Number(a[3])));return b}var kb=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,lb=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/;
function mb(a){return a.ctrlKey&&eb?!0:a.button==2}function nb(a,b,c){var d=b.createSVGPoint();d.x=a.clientX;d.y=a.clientY;c||(c=b.getScreenCTM().inverse());return d.matrixTransform(c)}function ob(a){if(typeof a!="string")return a;a=pb(a,!1);return a.length?String(a[0]):""}
function pb(a,b){var c=[],d=a.split("");d.push("");var e=0;a=[];for(var f=null,h=0;h<d.length;h++){var k=d[h];e==0?k=="%"?((k=a.join(""))&&c.push(k),a.length=0,e=1):a.push(k):e==1?k=="%"?(a.push(k),e=0):b&&"0"<=k&&k<="9"?(e=2,f=k,(k=a.join(""))&&c.push(k),a.length=0):k=="{"?e=3:(a.push("%",k),e=0):e==2?"0"<=k&&k<="9"?f+=k:(c.push(parseInt(f,10)),h--,e=0):e==3&&(k==""?(a.splice(0,0,"%{"),h--,e=0):k!="}"?a.push(k):(e=a.join(""),/[A-Z]\w*/i.test(e)?(k=e.toUpperCase(),(k=k.lastIndexOf("BKY_",0)==0?k.substring(4):
null)&&k in t?(e=t[k],typeof e=="string"?Array.prototype.push.apply(c,pb(e,b)):b?c.push(String(e)):c.push(e)):c.push("%{"+e+"}")):c.push("%{"+e+"}"),e=a.length=0))}(k=a.join(""))&&c.push(k);b=[];for(h=a.length=0;h<c.length;++h)typeof c[h]=="string"?a.push(c[h]):((k=a.join(""))&&b.push(k),a.length=0,b.push(c[h]));(k=a.join(""))&&b.push(k);a.length=0;return b}function qb(){for(var a=rb.length,b=[],c=0;c<20;c++)b[c]=rb.charAt(Math.random()*a);return b.join("")}var rb="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
function sb(){if(tb!==void 0)return tb;if(!r.getComputedStyle)return!1;var a=document.createElement("p"),b="none",c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var d in c)if(a.style[d]!==void 0){a.style[d]="translate3d(1px,1px,1px)";b=r.getComputedStyle(a);if(!b)return document.body.removeChild(a),!1;b=b.getPropertyValue(c[d])}document.body.removeChild(a);return tb=
b!=="none"}var tb;function ub(a,b){b=a.indexOf(b);if(b==-1)return!1;a.splice(b,1);return!0}function vb(a){var b=Object.create(null),c=wb(a,!0);if(a=xb(a))a=c.indexOf(a),c.splice(a,c.length-a);a=0;for(var d;d=c[a];a++)b[d.type]?b[d.type]++:b[d.type]=1;return b}
function yb(a){var b=typeof a=="string"?ob(a):a,c=Number(b);if(!isNaN(c)&&0<=c&&c<=360){var d=b=a=0,e=Math.floor(c/60),f=c/60-e,h=165.75*.55,k=165.75*(1-.45*f);f=165.75*(1-.45*(1-f));switch(e){case 1:a=k;b=165.75;d=h;break;case 2:a=h;b=165.75;d=f;break;case 3:a=h;b=k;d=165.75;break;case 4:a=f;b=h;d=165.75;break;case 5:a=165.75;b=h;d=k;break;case 6:case 0:a=165.75,b=f,d=h}a=Ga(Math.floor(a),Math.floor(b),Math.floor(d));return{Cn:c,zf:a}}if(c=Ea(b))return{Cn:null,zf:c};c='Invalid colour: "'+b+'"';a!=
b&&(c+=' (from "'+a+'")');throw Error(c);};var x="",zb=!0,y=0,Ab=["create","move"],Bb=[];function z(a){y==0&&(Bb.length||setTimeout(Cb,0),Bb.push(a))}function Cb(){for(var a=Db(Bb,!0),b=Bb.length=0,c;c=a[b];b++)if(c.$a){var d=Eb[c.$a]||null;if(d){var e=c;if(e.Oa)for(d.Rd.push(e),d.Sf.length=0;d.Rd.length>d.Yj&&d.Yj>=0;)d.Rd.shift();for(var f=0;c=d.Ec[f];f++)c(e)}}}
function Db(a,b){a=a.slice();b||a.reverse();for(var c=[],d=Object.create(null),e=0,f;f=a[e];e++)if(!f.ah()){var h=[f.al?"ui":f.type,f.Z,f.$a].join(" "),k=d[h],l=k?k.event:null;if(!k)d[h]={event:f,index:e},c.push(f);else if(f.type=="move"&&k.index==e-1)l.Gd=f.Gd,l.Fd=f.Fd,l.Zc=f.Zc,k.index=e;else if(f.type=="change"&&f.element==l.element&&f.name==l.name)l.newValue=f.newValue;else if(f.type=="viewport_change")l.Ib=f.Ib,l.Hb=f.Hb,l.scale=f.scale,l.Lf=f.Lf;else if(f.type!="click"||l.type!="bubble_open")d[h]=
{event:f,index:e},c.push(f)}a=c.filter(function(m){return!m.ah()});b||a.reverse();for(e=1;f=a[e];e++)f.type=="change"&&f.element=="mutation"&&a.unshift(a.splice(e,1)[0]);return a}function A(a){x=typeof a=="boolean"?a?qb():"":a}function Fb(a){var b=[];a=wb(a,!1);for(var c=0,d;d=a[c];c++)b[c]=d.id;return b}function B(a){return Ca(p,a)};function C(a){this.no=a}C.prototype.toString=function(){return this.no};var Gb=new C("animate"),Hb=new C("circle"),Ib=new C("defs"),Jb=new C("feComposite"),Kb=new C("feGaussianBlur"),Lb=new C("fePointLight"),Mb=new C("feSpecularLighting"),Nb=new C("filter"),Ob=new C("g"),Pb=new C("image"),Qb=new C("line"),Rb=new C("path"),Sb=new C("pattern"),Tb=new C("rect"),Ub=new C("svg"),Vb=new C("text"),Wb=new C("tspan");var Xb=null,Zb=0,$b=null;function D(a,b,c){a=document.createElementNS("http://www.w3.org/2000/svg",String(a));for(var d in b)a.setAttribute(d,b[d]);document.body.runtimeStyle&&(a.runtimeStyle=a.currentStyle=a.style);c&&c.appendChild(a);return a}function E(a,b){var c=a.getAttribute("class")||"";a.setAttribute("class",c+" "+b)}
function ac(a,b){for(var c=(a.getAttribute("class")||"").split(/\s+/),d=0;d<c.length;d++)c[d]&&c[d]!=b||(c.splice(d,1),d--);c.length?a.setAttribute("class",c.join(" ")):a.removeAttribute("class")}function bc(a,b){return(" "+(a.getAttribute("class")||"")+" ").indexOf(" "+b+" ")!=-1}function F(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function cc(a,b){var c=b.nextSibling;b=b.parentNode;if(!b)throw Error("Reference node has no parent.");c?b.insertBefore(a,c):b.appendChild(a)}
function dc(a,b){a.style.transform=b;a.style["-webkit-transform"]=b}function ec(){Zb++;Xb||(Xb=Object.create(null))}function fc(){Zb--;Zb||(Xb=null)}function hc(a,b,c,d){var e=a.textContent;a=e+"\n"+a.className.baseVal;var f;if(Xb&&(f=Xb[a]))return f;$b||(f=document.createElement("canvas"),f.className="blocklyComputeCanvas",document.body.appendChild(f),$b=f.getContext("2d"));$b.font=c+" "+b+" "+d;f=$b.measureText(e).width;Xb&&(Xb[a]=f);return f};
function G(a){return document.createElementNS("https://developers.google.com/blockly/xml",a)};
function ic(a,b){if(a.Ab()&&(a=jc(a,!1)[0],!a))return new DocumentFragment;var c;a.i.o&&(c=a.i.Sg());b=kc(a,b);var d=a.ba();b.setAttribute("x",Math.round(a.i.o?c-d.x:d.x));b.setAttribute("y",Math.round(d.y));return b}
function kc(a,b){if(a.Ab())return(a=jc(a,!1)[0])?kc(a):new DocumentFragment;var c=G(a.P?"shadow":"block");c.setAttribute("type",a.type);b||c.setAttribute("id",a.id);if(a.Hc){var d=a.Hc();d&&(d.hasChildNodes()||d.hasAttributes())&&c.appendChild(d)}d=0;for(var e;e=a.m[d];d++)for(var f=0,h;h=e.X[f];f++){var k=!1;h.name&&(h.$j?k=!0:h.Pe&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),
k=!0));k?(k=G("field"),k.setAttribute("name",h.name||""),k.textContent=h.hb,h=k):h=null;h&&c.appendChild(h)}if(d=a.yc.text)e=a.yc.size,f=a.yc.Il,h=G("comment"),h.appendChild(document.createTextNode(d)),h.setAttribute("pinned",f),h.setAttribute("h",e.height),h.setAttribute("w",e.width),c.appendChild(h);a.data&&(d=G("data"),d.appendChild(document.createTextNode(a.data)),c.appendChild(d));for(d=0;e=a.m[d];d++){var l;f=!0;e.type!=5&&(k=e.connection.H(),e.type==1?l=G("value"):e.type==3&&(l=G("statement")),
h=e.connection.qe(),!h||k&&k.P||l.appendChild(lc(h,b)),k&&(h=kc(k,b),h.nodeType==Node.ELEMENT_NODE&&(l.appendChild(h),f=!1)),l.setAttribute("name",e.name),f||c.appendChild(l))}a.Cc!=void 0&&a.Cc!=a.Fn&&c.setAttribute("inline",a.Cc);a.isCollapsed()&&c.setAttribute("collapsed",!0);a.isEnabled()||c.setAttribute("disabled",!0);mc(a)||a.P||c.setAttribute("deletable",!1);a.Ma()||a.P||c.setAttribute("movable",!1);a.yb()||c.setAttribute("editable",!1);if(d=xb(a))h=kc(d,b),h.nodeType==Node.ELEMENT_NODE&&(l=
G("next"),l.appendChild(h),c.appendChild(l));h=a.D&&a.D.qe();!h||d&&d.P||l.appendChild(lc(h,b));return c}function lc(a,b){for(var c=a=a.cloneNode(!0),d;c;)if(b&&c.nodeName=="shadow"&&c.removeAttribute("id"),c.firstChild)c=c.firstChild;else{for(;c&&!c.nextSibling;)d=c,c=c.parentNode,d.nodeType==Node.TEXT_NODE&&d.data.trim()==""&&c.firstChild!=d&&F(d);c&&(d=c,c=c.nextSibling,d.nodeType==Node.TEXT_NODE&&d.data.trim()==""&&F(d))}return a}
function nc(a){return(new XMLSerializer).serializeToString(a).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")}function oc(a){var b=(new DOMParser).parseFromString(a,"text/xml");if(!b||!b.documentElement||b.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+a);return b.documentElement}
function pc(a,b){var c;b.o&&(c=b.Sg());var d=[];ec();var e=x;e||A(!0);b.Fb&&b.Fb(!1);var f=!0;try{for(var h=0,k;k=a.childNodes[h];h++){var l=k.nodeName.toLowerCase(),m=k;if(l=="block"||l=="shadow"&&!zb){var n=qc(m,b);d.push(n.id);var u=m.hasAttribute("x")?parseInt(m.getAttribute("x"),10):10,v=m.hasAttribute("y")?parseInt(m.getAttribute("y"),10):10;isNaN(u)||isNaN(v)||n.moveBy(b.o?c-u:u,v);f=!1}else{if(l=="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(l=="variables"){if(f)for(var J=
void 0,Ma=b,pa=0;J=m.childNodes[pa];pa++){if(J.nodeType==Node.ELEMENT_NODE){var Yb=J.getAttribute("type"),sd=J.getAttribute("id");Ma.Rc(J.textContent,Yb,sd)}}else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");f=!1}}}}finally{e||A(!1),fc()}b.Fb&&b.Fb(!0);z(new (B("finished_loading"))(b))}
function qc(a,b){if(a instanceof rc){var c=a;a=b;b=c;console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}y++;c=b.sf();try{var d=sc(a,b),e=wb(d,!1);if(b.I){tc(d,!1);for(var f=e.length-1;f>=0;f--)e[f].ue();for(f=e.length-1;f>=0;f--)e[f].U(!1);setTimeout(function(){d.disposed||tc(d,!0)},1);uc(d);vc(b)}else for(f=e.length-1;f>=0;f--);}finally{y--}if(y==0){a=wc(b,c);for(f=0;f<a.length;f++)b=a[f],z(new (B("var_create"))(b));z(new (B("create"))(d))}return d}
function xc(a,b){for(var c=0,d;d=a[c];c++){var e=d.textContent,f=d.getAttribute("pinned")=="true",h=parseInt(d.getAttribute("w"),10);d=parseInt(d.getAttribute("h"),10);b.Ge(e);b.yc.Il=f;isNaN(h)||isNaN(d)||(b.yc.size=new Ta(h,d));f&&b.on&&!b.zb&&setTimeout(function(){b.Kb.Ia(!0)},1)}}function yc(a){for(var b={Ye:null,Ze:null},c=0,d;d=a.childNodes[c];c++)d.nodeType==Node.ELEMENT_NODE&&(d.nodeName.toLowerCase()=="block"?b.Ye=d:d.nodeName.toLowerCase()=="shadow"&&(b.Ze=d));return b}
function sc(a,b,c,d){var e=a.getAttribute("type");if(!e)throw TypeError("Block type unspecified: "+a.outerHTML);var f=a.getAttribute("id");f=b.Be(e,f);for(var h=[],k=[],l=[],m=[],n=[],u=[],v=0,J;J=a.childNodes[v];v++)if(J.nodeType!=Node.TEXT_NODE)switch(J.nodeName.toLowerCase()){case "mutation":h.push(J);break;case "comment":if(!ka.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}k.push(J);break;case "data":l.push(J);break;case "title":case "field":m.push(J);
break;case "value":case "statement":n.push(J);break;case "next":u.push(J);break;default:console.warn("Ignoring unknown tag: "+J.nodeName)}v=!1;J=0;for(var Ma;Ma=h[J];J++)f.Sc&&(f.Sc(Ma),f.ue&&(v=!0));h=v;xc(k,f);for(k=0;v=l[k];k++)f.data=v.textContent;if(c)if(d)if(f.A)c.connect(f.A);else throw TypeError("Next block does not have previous statement.");else if(f.u)c.connect(f.u);else if(f.A)c.connect(f.A);else throw TypeError("Child block does not have output or previous statement.");for(c=0;k=m[c];c++)l=
k.getAttribute("name"),d=f,(v=zc(d,l))?v.Ai(k):console.warn("Ignoring non-existent field "+l+" in block "+d.type);for(m=0;d=n[m];m++){l=d.getAttribute("name");c=Ac(f,l);if(!c){console.warn("Ignoring non-existent input "+l+" in block "+e);break}d=yc(d);if(d.Ye){if(!c.connection)throw TypeError("Input connection does not exist.");sc(d.Ye,b,c.connection,!1)}d.Ze&&c.connection.Yf(d.Ze)}for(e=0;n=u[e];e++){n=yc(n);if(n.Ye){if(!f.D)throw TypeError("Next statement does not exist.");if(f.D.isConnected())throw TypeError("Next statement is already connected.");
sc(n.Ye,b,f.D,!0)}n.Ze&&f.D&&f.D.Yf(n.Ze)}h&&f.ue();(b=a.getAttribute("inline"))&&f.Nd(b=="true");(b=a.getAttribute("disabled"))&&f.Md(b!="true"&&b!="disabled");if(b=a.getAttribute("deletable"))f.di=b=="true";(b=a.getAttribute("movable"))&&f.Aj(b=="true");(b=a.getAttribute("editable"))&&f.zj(b=="true");(b=a.getAttribute("collapsed"))&&f.Kd(b=="true");if(a.nodeName.toLowerCase()=="shadow"){a=jc(f,!1);for(b=0;u=a[b];b++)if(!u.P)throw TypeError("Shadow block not allowed non-shadow child.");if(Bc(f).length)throw TypeError("Shadow blocks cannot have variable references.");
f.Fj(!0)}return f};var Cc="ontouchstart"in r||!!(r.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!r.navigator||!r.navigator.maxTouchPoints&&!r.navigator.msMaxTouchPoints),Dc=null,Ec={};
r.PointerEvent?Ec={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:Cc&&(Ec={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]});var Fc=0;
function Gc(a,b){Hc();a.changedTouches&&a.changedTouches.length!=1||(Fc=setTimeout(function(){a.changedTouches&&(a.button=2,a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY);b&&Ic(b,a)},750))}function Hc(){Fc&&(clearTimeout(Fc),Fc=0)}function Jc(a){return a.pointerId!=void 0?a.pointerId:a.changedTouches&&a.changedTouches[0]&&a.changedTouches[0].identifier!==void 0&&a.changedTouches[0].identifier!==null?a.changedTouches[0].identifier:"mouse"}
function Kc(a){var b=Jc(a);return Dc!==void 0&&Dc!==null?Dc==b:a.type=="mousedown"||a.type=="touchstart"||a.type=="pointerdown"?(Dc=b,!0):!1}function Lc(a){return a.type.lastIndexOf("touch",0)==0||a.type.lastIndexOf("mouse",0)==0||a.type.lastIndexOf("pointer",0)==0}function Mc(a){return a.type.lastIndexOf("touch",0)==0||a.type.lastIndexOf("pointer",0)==0}
function Nc(a){var b=[];if(a.changedTouches)for(var c=0;c<a.changedTouches.length;c++)b[c]={type:a.type,changedTouches:[a.changedTouches[c]],target:a.target,stopPropagation:function(){a.stopPropagation()},preventDefault:function(){a.preventDefault()}};else b.push(a);return b};function H(a,b,c,d,e,f){function h(v){var J=!e;v=Nc(v);for(var Ma=0,pa;pa=v[Ma];Ma++)if(!J||!Lc(pa)||Kc(pa)){var Yb=pa;if(Yb.type.lastIndexOf("touch",0)==0){var sd=Yb.changedTouches[0];Yb.clientX=sd.clientX;Yb.clientY=sd.clientY}c?d.call(c,pa):d(pa);k=!0}}var k=!1,l=[];if(r.PointerEvent&&b in Ec)for(var m=0,n;n=Ec[b][m];m++)a.addEventListener(n,h,!1),l.push([a,n,h]);else if(a.addEventListener(b,h,!1),l.push([a,b,h]),b in Ec){var u=function(v){h(v);var J=!f;k&&J&&v.preventDefault()};for(m=0;n=Ec[b][m];m++)a.addEventListener(n,
u,!1),l.push([a,n,u])}return l}function Oc(a,b,c){function d(l){c(l)}var e=[];if(r.PointerEvent&&b in Ec)for(var f=0,h;h=Ec[b][f];f++)a.addEventListener(h,d,!1),e.push([a,h,d]);else if(a.addEventListener(b,d,!1),e.push([a,b,d]),b in Ec){var k=function(l){if(l.changedTouches&&l.changedTouches.length==1){var m=l.changedTouches[0];l.clientX=m.clientX;l.clientY=m.clientY}c(l);l.preventDefault()};for(f=0;h=Ec[b][f];f++)a.addEventListener(h,k,!1),e.push([a,h,k])}return e}
function I(a){for(;a.length;){var b=a.pop();b[0].removeEventListener(b[1],b[2],!1)}};
function Pc(){this.tk=Object.create(null);this.Ym=Object.create(null)}function Qc(a,b){var c=Rc;c=String(c).toLowerCase();return a.tk[b].Fo.indexOf(c)!==-1}function Sc(a,b){b=String(b).toLowerCase();b=a.Ym[b];if(!b)return[];var c=[],d=[],e=a.tk;b.forEach(function(f){d.push(e[f])});d.sort(function(f,h){return f.weight-h.weight});d.forEach(function(f){c.push(f.component)});return c}function Tc(a){this.cj=a}Tc.prototype.toString=function(){return this.cj};
var Uc=new Tc("positionable"),Vc=new Tc("drag_target"),Rc=new Tc("delete_area"),Wc=new Tc("autohideable");
var Xc,Yc,Zc,$c=null,ad=null,bd=null,cd=null,dd="",ed="";
function fd(){if(!Xc){var a=document.createElement("div");a.className="blocklyDropDownDiv";(gd||document.body).appendChild(a);Xc=a;var b=document.createElement("div");b.className="blocklyDropDownContent";a.appendChild(b);Yc=b;b=document.createElement("div");b.className="blocklyDropDownArrow";a.appendChild(b);Zc=b;Xc.style.opacity=0;Xc.style.transition="transform 0.25s, opacity 0.25s";a.addEventListener("focusin",function(){E(a,"blocklyFocused")});a.addEventListener("focusout",function(){ac(a,"blocklyFocused")})}}
function hd(a,b,c,d){a=id(a,c.left,c.right,d.width);return{Mi:a.oe,Ni:b,xi:a.oe,yi:b+16,ce:a.ce,Sh:-9,Qh:!0,Rh:!0}}function jd(a,b,c,d){a=id(a,c.left,c.right,d.width);return{Mi:a.oe,Ni:b-d.height,xi:a.oe,yi:b-d.height-16,ce:a.ce,Sh:d.height-2-8,Qh:!1,Rh:!0}}function id(a,b,c,d){var e=a;a=ma(b,a-d/2,c-d);b=ma(12,e-8-a,d-12-16);return{ce:b,oe:a}}function kd(){var a=Xc;a.style.transform="translate(0, 0)";a.style.opacity=0;bd=setTimeout(function(){ld()},250);cd&&(cd(),cd=null)}
function ld(){if(ad){bd&&clearTimeout(bd);var a=Xc;a.style.transform="";a.style.left="";a.style.top="";a.style.opacity=0;a.style.display="none";a.style.backgroundColor="";a.style.borderColor="";cd&&(cd(),cd=null);Yc.textContent="";Yc.style.width="";ad=null;dd&&(ac(a,dd),dd="");ed&&(ac(a,ed),ed="");md(nd)}};function od(){this.lc=null;this.$a=void 0;this.group=x;this.Oa=zb}g=od.prototype;g.al=!1;g.S=function(){var a={type:this.type};this.group&&(a.group=this.group);return a};g.K=function(a){this.lc=!1;this.group=a.group};g.ah=function(){return!1};g.run=function(){};function pd(a){if(a.$a)var b=Eb[a.$a]||null;if(!b)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return b};function K(a,b){a.h=b.prototype;a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function qd(a,b){for(var c in b)a[c]=b[c]}function rd(){var a=td;return Object.values?Object.values(a):Object.keys(a).map(function(b){return a[b]})};function ud(a){ud.h.constructor.call(this);this.Z=(this.lc=typeof a=="undefined")?"":a.id;this.$a=this.lc?"":a.i.id}K(ud,od);ud.prototype.S=function(){var a=ud.h.S.call(this);a.blockId=this.Z;return a};ud.prototype.K=function(a){ud.h.K.call(this,a);this.Z=a.blockId};function vd(a,b,c,d,e){vd.h.constructor.call(this,a);a&&(this.element=typeof b=="undefined"?"":b,this.name=typeof c=="undefined"?"":c,this.oldValue=typeof d=="undefined"?"":d,this.newValue=typeof e=="undefined"?"":e)}K(vd,ud);g=vd.prototype;
g.type="change";g.S=function(){var a=vd.h.S.call(this);a.element=this.element;this.name&&(a.name=this.name);a.oldValue=this.oldValue;a.newValue=this.newValue;return a};g.K=function(a){vd.h.K.call(this,a);this.element=a.element;this.name=a.name;this.oldValue=a.oldValue;this.newValue=a.newValue};g.ah=function(){return this.oldValue==this.newValue};
g.run=function(a){var b=pd(this).Nb(this.Z);if(b)switch(b.Ed&&b.Ed.Ia(!1),a=a?this.newValue:this.oldValue,this.element){case "field":(b=zc(b,this.name))?wd(b,a):console.warn("Can't set non-existent field: "+this.name);break;case "comment":b.Ge(a||null);break;case "collapsed":b.Kd(!!a);break;case "disabled":b.Md(!a);break;case "inline":b.Nd(!!a);break;case "mutation":var c="";b.Hc&&(c=(c=b.Hc())&&nc(c));if(b.Sc){var d=oc(a||"<mutation/>");b.Sc(d)}z(new vd(b,"mutation",null,c,a));break;default:console.warn("Unknown change type: "+
this.element)}else console.warn("Can't change non-existent block: "+this.Z)};function xd(a){xd.h.constructor.call(this,a);a&&(a.P&&(this.Oa=!1),this.xml=a.i.I?ic(a):kc(a),this.vd=Fb(a))}K(xd,ud);xd.prototype.type="create";xd.prototype.S=function(){var a=xd.h.S.call(this);a.xml=nc(this.xml);a.ids=this.vd;this.Oa||(a.recordUndo=this.Oa);return a};xd.prototype.K=function(a){xd.h.K.call(this,a);this.xml=oc(a.xml);this.vd=a.ids;a.recordUndo!==void 0&&(this.Oa=a.recordUndo)};
xd.prototype.run=function(a){var b=pd(this);if(a)a=G("xml"),a.appendChild(this.xml),pc(a,b);else{a=0;for(var c;c=this.vd[a];a++){var d=b.Nb(c);d?d.dispose(!1):c==this.Z&&console.warn("Can't uncreate non-existent block: "+c)}}};function yd(a){yd.h.constructor.call(this,a);if(a){if(a.getParent())throw Error("Connected blocks cannot be deleted.");a.P&&(this.Oa=!1);this.ij=a.i.I?ic(a):kc(a);this.vd=Fb(a)}}K(yd,ud);yd.prototype.type="delete";
yd.prototype.S=function(){var a=yd.h.S.call(this);a.oldXml=nc(this.ij);a.ids=this.vd;this.Oa||(a.recordUndo=this.Oa);return a};yd.prototype.K=function(a){yd.h.K.call(this,a);this.ij=oc(a.oldXml);this.vd=a.ids;a.recordUndo!==void 0&&(this.Oa=a.recordUndo)};yd.prototype.run=function(a){var b=pd(this);if(a){a=0;for(var c;c=this.vd[a];a++){var d=b.Nb(c);d?d.dispose(!1):c==this.Z&&console.warn("Can't delete non-existent block: "+c)}}else a=G("xml"),a.appendChild(this.ij),pc(a,b)};
function zd(a){zd.h.constructor.call(this,a);a&&(a.P&&(this.Oa=!1),a=Ad(this),this.yl=a.El,this.vl=a.Wk,this.fj=a.wk)}K(zd,ud);g=zd.prototype;g.type="move";g.S=function(){var a=zd.h.S.call(this);this.Gd&&(a.newParentId=this.Gd);this.Fd&&(a.newInputName=this.Fd);this.Zc&&(a.newCoordinate=Math.round(this.Zc.x)+","+Math.round(this.Zc.y));this.Oa||(a.recordUndo=this.Oa);return a};
g.K=function(a){zd.h.K.call(this,a);this.Gd=a.newParentId;this.Fd=a.newInputName;if(a.newCoordinate){var b=a.newCoordinate.split(",");this.Zc=new w(Number(b[0]),Number(b[1]))}a.recordUndo!==void 0&&(this.Oa=a.recordUndo)};function Bd(a){var b=Ad(a);a.Gd=b.El;a.Fd=b.Wk;a.Zc=b.wk}function Ad(a){var b=pd(a).Nb(a.Z);a={};var c=b.getParent();if(c){if(a.El=c.id,b=Cd(c,b))a.Wk=b.name}else a.wk=b.ba();return a}g.ah=function(){return this.yl==this.Gd&&this.vl==this.Fd&&Ja(this.fj,this.Zc)};
g.run=function(a){var b=pd(this),c=b.Nb(this.Z);if(c){var d=a?this.Gd:this.yl,e=a?this.Fd:this.vl,f=a?this.Zc:this.fj;a=null;if(d&&(a=b.Nb(d),!a)){console.warn("Can't connect to non-existent block: "+d);return}c.getParent()&&Dd(c);if(f)e=c.ba(),c.moveBy(f.x-e.x,f.y-e.y);else{c=c.u||c.A;b=c.type;if(e){if(a=Ac(a,e))var h=a.connection}else b==4&&(h=a.D);h?c.connect(h):console.warn("Can't connect to non-existent input: "+e)}}else console.warn("Can't move non-existent block: "+this.Z)};q(p,"create",xd);
q(p,"delete",yd);q(p,"change",vd);q(p,"move",zd);function Ed(a){this.lc=typeof a=="undefined";this.$a=a?a.id:"";this.group=x;this.Oa=!1}K(Ed,od);Ed.prototype.type="finished_loading";Ed.prototype.S=function(){var a={type:this.type};this.group&&(a.group=this.group);this.$a&&(a.workspaceId=this.$a);return a};Ed.prototype.K=function(a){this.lc=!1;this.$a=a.workspaceId;this.group=a.group};q(p,"finished_loading",Ed);function Fd(a){Fd.h.constructor.call(this);this.lc=typeof a=="undefined";this.$a=a?a:"";this.Oa=!1}K(Fd,od);Fd.prototype.al=!0;function Gd(a,b,c,d){Gd.h.constructor.call(this,a?a.i.id:void 0);this.Z=a?a.id:null;this.element=typeof b=="undefined"?"":b;this.oldValue=typeof c=="undefined"?"":c;this.newValue=typeof d=="undefined"?"":d}K(Gd,Fd);Gd.prototype.type="ui";
Gd.prototype.S=function(){var a=Gd.h.S.call(this);a.element=this.element;this.newValue!==void 0&&(a.newValue=this.newValue);this.Z&&(a.blockId=this.Z);return a};Gd.prototype.K=function(a){Gd.h.K.call(this,a);this.element=a.element;this.newValue=a.newValue;this.Z=a.blockId};q(p,"ui",Gd);function Hd(a){Hd.h.constructor.call(this);this.jd=(this.lc=typeof a=="undefined")?"":a.cb();this.$a=this.lc?"":a.i.id}K(Hd,od);Hd.prototype.S=function(){var a=Hd.h.S.call(this);a.varId=this.jd;return a};Hd.prototype.K=function(a){Hd.h.S.call(this);this.jd=a.varId};function Id(a){Id.h.constructor.call(this,a);a&&(this.Td=a.type,this.Sd=a.name)}K(Id,Hd);Id.prototype.type="var_create";Id.prototype.S=function(){var a=Id.h.S.call(this);a.varType=this.Td;a.varName=this.Sd;return a};
Id.prototype.K=function(a){Id.h.K.call(this,a);this.Td=a.varType;this.Sd=a.varName};Id.prototype.run=function(a){var b=pd(this);a?b.Rc(this.Sd,this.Td,this.jd):b.ne(this.jd)};function Jd(a){Jd.h.constructor.call(this,a);a&&(this.Td=a.type,this.Sd=a.name)}K(Jd,Hd);Jd.prototype.type="var_delete";Jd.prototype.S=function(){var a=Jd.h.S.call(this);a.varType=this.Td;a.varName=this.Sd;return a};Jd.prototype.K=function(a){Jd.h.K.call(this,a);this.Td=a.varType;this.Sd=a.varName};
Jd.prototype.run=function(a){var b=pd(this);a?b.ne(this.jd):b.Rc(this.Sd,this.Td,this.jd)};function Kd(a,b){Kd.h.constructor.call(this,a);a&&(this.gj=a.name,this.dj=typeof b=="undefined"?"":b)}K(Kd,Hd);Kd.prototype.type="var_rename";Kd.prototype.S=function(){var a=Kd.h.S.call(this);a.oldName=this.gj;a.newName=this.dj;return a};Kd.prototype.K=function(a){Kd.h.K.call(this,a);this.gj=a.oldName;this.dj=a.newName};Kd.prototype.run=function(a){var b=pd(this);a?b.De(this.jd,this.dj):b.De(this.jd,this.gj)};
q(p,"var_create",Id);q(p,"var_delete",Jd);q(p,"var_rename",Kd);function Ld(a){this.ef=a;this.Fa()}g=Ld.prototype;g.Y=null;g.ec=null;g.ef=null;g.dd=1;g.eg=null;g.qk=new w(0,0);g.Fa=function(){this.Y||(this.Y=D(Ub,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklyBlockDragSurface"},this.ef),this.ec=D(Ob,{},this.Y))};
function Md(a,b){if(a.ec.childNodes.length)throw Error("Already dragging a block.");a.ec.appendChild(b);a.Y.style.display="block";a.eg=new w(0,0)}g.Le=function(a,b){this.eg=new w(a*this.dd,b*this.dd);a=this.eg.x;b=this.eg.y;a=a.toFixed(0);b=b.toFixed(0);this.Y.style.display="block";dc(this.Y,"translate3d("+a+"px, "+b+"px, 0px)")};g.Ei=function(){var a=jb(this.Y);return new w(a.x/this.dd,a.y/this.dd)};g.O=function(){return this.Y};
g.Cg=function(a){a?a.appendChild(this.ec.firstChild):this.ec.removeChild(this.ec.firstChild);this.Y.style.display="none";if(this.ec.childNodes.length)throw Error("Drag group was not cleared.");this.eg=null};var Nd=!1,Od=[".blocklySvg {","background-color: #fff;","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;",
"left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);",
"color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {",
"max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyArrowTop {","border-top: 1px solid;",
"border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;",
"}",".blocklyPathLight {","fill: none;","stroke-linecap: round;","stroke-width: 1;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;",
"}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPathDark {","display: none;","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;",
"}",".blocklyDisabled>.blocklyPathLight,",".blocklyDisabled>.blocklyPathDark {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",
".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {",
"margin: 0;","padding: 0;","}",".blocklyHtmlInput {","border: none;","border-radius: 4px;","height: 100%;","margin: 0;","outline: none;","padding: 0;","width: 100%;","text-align: center;","display: block;","box-sizing: border-box;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: #ddd;","fill-opacity: .8;",
"}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: #ccc;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",
".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",
".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {",
"box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {",
"background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}"];function Pd(a,b){this.re=a;this.Hj=b.spacing;this.fl=b.length;this.Hn=(this.Ui=a.firstChild)&&this.Ui.nextSibling;this.co=b.snap}Pd.prototype.dd=1;Pd.prototype.dispose=function(){this.re=null};Pd.prototype.update=function(a){this.dd=a;var b=this.Hj*a||100;this.re.setAttribute("width",b);this.re.setAttribute("height",b);b=Math.floor(this.Hj/2)+.5;var c=b-this.fl/2,d=b+this.fl/2;b*=a;c*=a;d*=a;Qd(this.Ui,a,c,d,b,b);Qd(this.Hn,a,b,b,c,d)};
function Qd(a,b,c,d,e,f){a&&(a.setAttribute("stroke-width",b),a.setAttribute("x1",c),a.setAttribute("y1",e),a.setAttribute("x2",d),a.setAttribute("y2",f))}Pd.prototype.moveTo=function(a,b){this.re.setAttribute("x",a);this.re.setAttribute("y",b);(Xa||Ya)&&this.update(this.dd)};function Rd(){this.name="classic";q(ya,"classic",this)}Rd.prototype.Ob=function(){return this.name+"-theme"};var Sd={};Sd=new Rd;function Td(a){if(!a)return null;if(a instanceof Element||typeof a=="string"){if(a){if(typeof a!="string"&&(Xa&&a.outerHTML?a=a.outerHTML:a instanceof Element||(a=null)),typeof a=="string"&&(a=oc(a),a.nodeName.toLowerCase()!="xml"))throw TypeError("Toolbox should be an <xml> document.");}else a=null;var b={contents:Ud(a)};a instanceof Node&&Vd(a,b);a=b}b=a.kind;var c=a.contents;if(b&&b!="flyoutToolbox"&&b!="categoryToolbox")throw Error("Invalid toolbox kind "+b+". Please supply either flyoutToolbox or categoryToolbox");
if(!c)throw Error("Toolbox must have a contents attribute.");return a}function Wd(a){if(!a)return!1;var b=a.kind;return b?b=="categoryToolbox":!!a.contents.filter(function(c){return c.kind.toUpperCase()=="CATEGORY"}).length}function Ud(a){var b=[],c=a.childNodes;c||(c=a);a=0;for(var d;d=c[a];a++)if(d.tagName){var e={},f=d.tagName.toUpperCase();e.kind=f;f=="BLOCK"?e.blockxml=d:d.childNodes&&d.childNodes.length>0&&(e.contents=Ud(d));Vd(d,e);b.push(e)}return b}
function Vd(a,b){for(var c=0;c<a.attributes.length;c++){var d=a.attributes[c];d.nodeName.indexOf("css-")>-1?(b.cssconfig=b.cssconfig||{},b.cssconfig[d.nodeName.replace("css-","")]=d.value):b[d.nodeName]=d.value}};function Xd(a){var b=!!a.readOnly;if(b)var c=null,d=!1,e=!1,f=!1,h=!1,k=!1,l=!1;else c=Td(a.toolbox),d=Wd(c),e=a.trashcan,e===void 0&&(e=d),f=a.collapse,f===void 0&&(f=d),h=a.comments,h===void 0&&(h=d),k=a.disable,k===void 0&&(k=d),l=a.sounds,l===void 0&&(l=!0);var m=!!a.rtl;var n=a.toolboxPosition!=="end"==m?3:2;var u=a.css;u===void 0&&(u=!0);var v="https://blockly-demo.appspot.com/static/media/";a.media?v=a.media:a.path&&(v=a.path+"media/");var J=a.oneBasedIndex===void 0?!0:!!a.oneBasedIndex,Ma=
a.renderer||"geras",pa=a.plugins||{};this.o=m;this.Vn=J;this.collapse=f;this.$m=h;this.disable=k;this.readOnly=b;this.If=a.maxBlocks||Infinity;this.gh=a.maxInstances;this.Gl=v;this.Nk=d;b=a.move||{};f={};b.scrollbars===void 0&&a.scrollbars===void 0?f.scrollbars=d:typeof b.scrollbars=="object"?(f.scrollbars={},f.scrollbars.Li=!!b.scrollbars.horizontal,f.scrollbars.vertical=!!b.scrollbars.vertical,f.scrollbars.Li&&f.scrollbars.vertical?f.scrollbars=!0:f.scrollbars.Li||f.scrollbars.vertical||(f.scrollbars=
!1)):f.scrollbars=!!b.scrollbars||!!a.scrollbars;f.Ne=f.scrollbars&&b.wheel!==void 0?!!b.wheel:typeof f.scrollbars=="object";f.dc=f.scrollbars?b.drag===void 0?!0:!!b.drag:!1;this.Ha=f;this.Qk=e;this.An=l;this.yn=u;this.zd=c;c=a.grid||{};d={};d.spacing=Number(c.spacing)||0;d.Zh=c.colour||"#888";d.length=c.length===void 0?1:Number(c.length);d.bp=d.spacing>0&&!!c.snap;this.Mk=d;c=a.zoom||{};d={};d.controls=c.controls===void 0?!1:!!c.controls;d.Ne=c.wheel===void 0?!1:!!c.wheel;d.jo=c.startScale===void 0?
1:Number(c.startScale);d.Jf=c.maxScale===void 0?3:Number(c.maxScale);d.Kf=c.minScale===void 0?.3:Number(c.minScale);d.Zn=c.scaleSpeed===void 0?1.2:Number(c.scaleSpeed);d.Hl=c.pinch===void 0?d.Ne||d.controls:!!c.pinch;this.la=d;this.Qd=n;this.Pl=Ma;this.Ql=a.rendererOverrides;this.Hi=null;this.fb=a.parentWorkspace;this.plugins=pa};
function Yd(a,b,c){this.j=a;b=b===void 0?!0:b;c=c===void 0?!0:c;var d=b&&c;b&&(this.ta=new Zd(a,!0,d));c&&(this.ya=new Zd(a,!1,d));d&&(this.ff=D(Tb,{height:$d,width:$d,"class":"blocklyScrollbarBackground"},null),cc(this.ff,a.gd));this.W=null}g=Yd.prototype;g.dispose=function(){F(this.ff);this.W=this.j=this.ff=null;this.ta&&(this.ta.dispose(),this.ta=null);this.ya&&(this.ya.dispose(),this.ya=null)};
g.resize=function(){var a=this.j.hc();if(a){var b=!1,c=!1;this.W&&this.W.Ka==a.Ka&&this.W.Ra==a.Ra&&this.W.ab==a.ab&&this.W.Ta==a.Ta?(this.W&&this.W.scrollWidth==a.scrollWidth&&this.W.Hb==a.Hb&&this.W.scrollLeft==a.scrollLeft||(b=!0),this.W&&this.W.scrollHeight==a.scrollHeight&&this.W.Ib==a.Ib&&this.W.scrollTop==a.scrollTop||(c=!0)):c=b=!0;if(b||c){try{y++,this.ta&&b&&this.ta.resize(a),this.ya&&c&&this.ya.resize(a)}finally{y--}ae(this.j)}this.ta&&this.ya&&(this.W&&this.W.Ka==a.Ka&&this.W.Ta==a.Ta||
this.ff.setAttribute("x",this.ya.position.x),this.W&&this.W.Ra==a.Ra&&this.W.ab==a.ab||this.ff.setAttribute("y",this.ta.position.y));this.W=a}};g.set=function(a,b,c){this.ta&&this.ta.set(a,!1);this.ya&&this.ya.set(b,!1);if(c||c===void 0)a={},this.ta&&(a.x=be(this.ta)),this.ya&&(a.y=be(this.ya)),this.j.yh(a)};g.Wf=function(a){this.ta&&this.ta.Wf(a);this.ya&&this.ya.Wf(a)};g.isVisible=function(){var a=!1;this.ta&&(a=this.ta.isVisible());this.ya&&(a=a||this.ya.isVisible());return a};
function Zd(a,b,c){this.j=a;this.ad=c||!1;this.td=b;this.Ad=.5;this.ratio=this.W=null;a="blocklyScrollbar"+(this.td?"Horizontal":"Vertical");this.nc=D(Ub,{"class":a+" blocklyMainWorkspaceScrollbar"},null);this.G=D(Ob,{},this.nc);this.Lc=D(Tb,{"class":"blocklyScrollbarBackground"},this.G);a=Math.floor(($d-5)/2);this.pb=D(Tb,{"class":"blocklyScrollbarHandle",rx:a,ry:a},this.G);this.j.gb.subscribe(this.pb,"scrollbarColour","fill");this.j.gb.subscribe(this.pb,"scrollbarOpacity","fill-opacity");cc(this.nc,
L(this.j));this.position=new w(0,0);a=$d;b?(this.Lc.setAttribute("height",a),this.nc.setAttribute("height",a),this.pb.setAttribute("height",a-5),this.pb.setAttribute("y",2.5),this.eh="width",this.Jl="x"):(this.Lc.setAttribute("width",a),this.nc.setAttribute("width",a),this.pb.setAttribute("width",a-5),this.pb.setAttribute("x",2.5),this.eh="height",this.Jl="y");this.Bl=H(this.Lc,"mousedown",this,this.Qn);this.Cl=H(this.pb,"mousedown",this,this.Rn)}var ce,de;g=Zd.prototype;g.Dl=new w(0,0);g.Tl=0;
g.Eb=0;g.Tc=0;g.xf=0;g.Df=!0;g.ai=!0;var $d=15;Cc&&($d=25);g=Zd.prototype;g.dispose=function(){ee();I(this.Bl);this.Bl=null;I(this.Cl);this.Cl=null;F(this.nc);this.Lc=this.G=this.nc=null;this.pb&&(this.j.gb.unsubscribe(this.pb),this.pb=null);this.j=null};function fe(a,b){return b=b<=0||isNaN(b)?0:Math.min(b,a.Eb)}function ge(a,b){a.Tc=b;a.pb.setAttribute(a.eh,a.Tc)}function he(a,b){return b=b<=0||isNaN(b)?0:Math.min(b,a.Eb-a.Tc)}function ie(a,b){a.xf=b;a.pb.setAttribute(a.Jl,a.xf)}
function je(a,b){a.Eb=b;a.nc.setAttribute(a.eh,a.Eb);a.Lc.setAttribute(a.eh,a.Eb)}g.setPosition=function(a,b){this.position.x=a;this.position.y=b;dc(this.nc,"translate("+(this.position.x+this.Dl.x)+"px,"+(this.position.y+this.Dl.y)+"px)")};
g.resize=function(a){if(!a&&(a=this.j.hc(),!a))return;var b;if(!(b=!this.W)){b=a;var c=this.W;b=!(b.Ka==c.Ka&&b.Ra==c.Ra&&b.Hb==c.Hb&&b.Ib==c.Ib&&b.ab==c.ab&&b.Ta==c.Ta&&b.scrollWidth==c.scrollWidth&&b.scrollHeight==c.scrollHeight&&b.scrollLeft==c.scrollLeft&&b.scrollTop==c.scrollTop)}b&&(this.td?(b=a,ke(this,b)?le(this,b):me(this,b)):(b=a,ke(this,b)?ne(this,b):oe(this,b)),this.W=a,pe(this))};function ke(a,b){return a.W?a.W.Ka!==b.Ka||a.W.Ra!==b.Ra||a.W.Ta!==b.Ta||a.W.ab!==b.ab:!0}
function le(a,b){var c=b.Ka-a.Ad*2;a.ad&&(c-=$d);je(a,Math.max(0,c));c=b.Ta+a.Ad;a.ad&&a.j.o&&(c+=$d);a.setPosition(c,b.ab+b.Ra-$d-a.Ad);me(a,b)}function me(a,b){if(b.Ka>=b.scrollWidth)ge(a,a.Eb),ie(a,0),a.ad||a.Ia(!1);else{a.ad||a.Ia(!0);var c=a.Eb*b.Ka/b.scrollWidth;c=fe(a,c);ge(a,c);c=b.scrollWidth-b.Ka;var d=a.Eb-a.Tc;b=(b.Hb-b.scrollLeft)/c*d;b=he(a,b);ie(a,b);a.ratio=d/c}}
function ne(a,b){var c=b.Ra-a.Ad*2;a.ad&&(c-=$d);je(a,Math.max(0,c));a.setPosition(a.j.o?b.Ta+a.Ad:b.Ta+b.Ka-$d-a.Ad,b.ab+a.Ad);oe(a,b)}function oe(a,b){if(b.Ra>=b.scrollHeight)ge(a,a.Eb),ie(a,0),a.ad||a.Ia(!1);else{a.ad||a.Ia(!0);var c=a.Eb*b.Ra/b.scrollHeight;c=fe(a,c);ge(a,c);c=b.scrollHeight-b.Ra;var d=a.Eb-a.Tc;b=(b.Ib-b.scrollTop)/c*d;b=he(a,b);ie(a,b);a.ratio=d/c}}g.isVisible=function(){return this.Df};g.Wf=function(a){var b=a!=this.ai;this.ai=a;b&&qe(this)};
g.Ia=function(a){var b=a!=this.isVisible();if(this.ad)throw Error("Unable to toggle visibility of paired scrollbars.");this.Df=a;b&&qe(this)};function qe(a){a.ai&&a.isVisible()?a.nc.setAttribute("display","block"):a.nc.setAttribute("display","none")}
g.Qn=function(a){md(this.j);Dc=null;ee();if(mb(a))a.stopPropagation();else{var b=nb(a,L(this.j),re(this.j));b=this.td?b.x:b.y;var c=this.pb;for(var d=0,e=0;c;){var f=jb(c);d+=f.x;e+=f.y;if((" "+(c.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!=-1)break;c=c.parentNode}c=new w(d,e);c=this.td?c.x:c.y;d=this.xf;e=this.Tc*.95;b<=c?d-=e:b>=c+this.Tc&&(d+=e);ie(this,he(this,d));pe(this);a.stopPropagation();a.preventDefault()}};
g.Rn=function(a){md(this.j);ee();mb(a)?a.stopPropagation():(this.ho=this.xf,se(this.j),this.Tl=this.td?a.clientX:a.clientY,ce=H(document,"mouseup",this,this.Tn),de=H(document,"mousemove",this,this.Sn),a.stopPropagation(),a.preventDefault())};g.Sn=function(a){ie(this,he(this,this.ho+((this.td?a.clientX:a.clientY)-this.Tl)));pe(this)};g.Tn=function(){te(this.j);Dc=null;ee()};function ee(){M(!0);ce&&(I(ce),ce=null);de&&(I(de),de=null)}function be(a){a=a.xf/(a.Eb-a.Tc);isNaN(a)&&(a=0);return a}
function pe(a){var b=be(a),c={};a.td?c.x=b:c.y=b;a.j.yh(c)}g.set=function(a,b){ie(this,he(this,a*this.ratio));(b||b===void 0)&&pe(this)};var ue=!1,ve=!1,we=0,xe=0,ye=0,ze=0,Ae=null,Be=null,N=null;function Ce(a){for(;a&&a.Wb;){if(typeof a.Wb=="string"||typeof a.Wb=="function")return a;a=a.Wb}return null}function De(a){a.Kn=Oc(a,"mouseover",Ee);a.Jn=Oc(a,"mouseout",Fe);a.addEventListener("mousemove",Ge,!1)}function He(a){a&&(I(a.Kn),I(a.Jn),a.removeEventListener("mousemove",Ge))}function Ee(a){ve||(a=Ce(a.currentTarget),Ae!=a&&(Ie(),Be=null,Ae=a),clearTimeout(we))}
function Fe(){ve||(we=setTimeout(function(){Be=Ae=null;Ie()},1),clearTimeout(xe))}function Ge(a){if(Ae&&Ae.Wb&&!ve)if(ue){var b=ye-a.pageX;a=ze-a.pageY;Math.sqrt(b*b+a*a)>10&&Ie()}else Be!=Ae&&(clearTimeout(xe),ye=a.pageX,ze=a.pageY,xe=setTimeout(Je,750))}function Ie(){ue&&(ue=!1,N&&(N.style.display="none"));xe&&clearTimeout(xe)}
function Je(){if(!ve&&(Be=Ae,N)){N.textContent="";var a;if(a=Ce(Ae)){for(a=a.Wb;typeof a=="function";)a=a();if(typeof a!="string")throw Error("Tooltip function must return a string.");}else a="";a=a.split("\n");for(var b=0;b<a.length;b++){var c=b;var d=a[b],e=50;if(d.length<=e)var f=d;else{for(var h=d.trim().split(/\s+/),k=0;k<h.length;k++)h[k].length>e&&(e=h[k].length);k=-Infinity;var l=1;do{var m=k;f=d;d=[];var n=h.length/l,u=1;for(k=0;k<h.length-1;k++)u<(k+1.5)/n?(u++,d[k]=!0):d[k]=!1;d=Sa(h,d,
e);k=Ra(h,d,e);n=h;u=[];for(var v=0;v<n.length;v++)u.push(n[v]),d[v]!==void 0&&u.push(d[v]?"\n":" ");d=u.join("");l++}while(k>m)}a[c]=f}a=a.join("\n");a=a.split("\n");for(b=0;b<a.length;b++)c=document.createElement("div"),c.appendChild(document.createTextNode(a[b])),N.appendChild(c);a=Ae.o;b=document.documentElement.clientWidth;c=document.documentElement.clientHeight;N.style.direction=a?"rtl":"ltr";N.style.display="block";ue=!0;f=ye;f=a?f-(0+N.offsetWidth):f+0;m=ze+10;m+N.offsetHeight>c+window.scrollY&&
(m-=N.offsetHeight+20);a?f=Math.max(5-window.scrollX,f):f+N.offsetWidth>b+window.scrollX-10&&(f=b-N.offsetWidth-10);N.style.top=m+"px";N.style.left=f+"px"}};function Ke(a,b,c){Array.isArray(c)&&(c=c.join(" "));a.setAttribute("aria-"+b,c)};function Le(a,b){this.l=a;this.type=b}g=Le.prototype;g.J=null;g.disposed=!1;g.ge=null;g.Ah=null;g.x=0;g.y=0;
g.Eg=function(a){var b=this.v(),c=a.v();a.isConnected()&&a.disconnect();if(this.isConnected()){var d=this.qe(!0);this.Ah=null;var e=this.H();if(e.P)e.dispose(!1);else{this.disconnect();var f=e}this.Ah=d}var h;y==0&&(h=new (B("move"))(c));if(!this||!a)throw Error("Cannot connect null connections.");this.J=a;a.J=this;c.zh(b);h&&(Bd(h),z(h));f&&(a=this.type===1?f.u:f.A,(c=Me(c,a))?a.connect(c):a.jj(this))};
g.dispose=function(){if(this.isConnected()){this.Yf(null);var a=this.H();a&&Dd(a)}this.disposed=!0};g.v=function(){return this.l};function Ne(a){return a.type==1||a.type==3}g.isConnected=function(){return!!this.J};g.jj=function(){};g.connect=function(a){if(this.J!=a&&Oe(this,a,!1)==0){var b=x;b||A(!0);Ne(this)?this.Eg(a):a.Eg(this);b||A(!1)}};function Pe(a,b){var c=null;b=b.u;for(var d=0,e;e=a.m[d];d++)if((e=e.connection)&&Oe(b,e,!1)==0){if(c)return null;c=e}return c}
function Me(a,b){if(b.type===2){a:{b=b.v();for(var c;c=Pe(a,b);)if(a=c.H(),!a||a.P){b=c;break a}b=null}return b}return(a=a.bh(!0))&&Oe(b,a,!1)==0?a:null}g.disconnect=function(){var a=this.J;if(!a)throw Error("Source connection not connected.");if(a.J!=this)throw Error("Target connection not connected to source connection.");if(Ne(this)){var b=this.l;var c=a.v();a=this}else b=a.v(),c=this.l;var d=x;d||A(!0);this.ji(b,c);c.P||a.Tf();d||A(!1)};
g.ji=function(a,b){var c;y==0&&(c=new (B("move"))(b));this.J=this.J.J=null;b.zh(null);c&&(Bd(c),z(c))};g.Tf=function(){var a=this.v(),b=this.qe();if(a.i&&b)if(a=qc(b,a.i),a.u)this.connect(a.u);else if(a.A)this.connect(a.A);else throw Error("Child block does not have output or previous statement.");};g.H=function(){return this.isConnected()?this.J.v():null};g.Al=function(){!this.isConnected()||this.J&&Oe(this,this.J,!1)==0||Dd(Ne(this)?this.H():this.l)};
g.Vf=function(a){a?(Array.isArray(a)||(a=[a]),this.ge=a,this.Al()):this.ge=null};g.Yf=function(a){this.Ah=a;a=this.H();a?a.P&&(a.dispose(!1),this.Tf()):this.Tf()};g.qe=function(a){return a&&this.H().P?kc(this.H()):this.Ah};g.ql=function(){return[]};g.jc=function(){for(var a=null,b=this.l.m,c=0;c<b.length;c++)if(b[c].connection===this){a=b[c];break}return a};function Oe(a,b,c,d){if(a&&b){if(Ne(a)){var e=a.v();var f=b.v()}else f=a.v(),e=b.v();e=e==f?1:b.type!=qa[a.type]?2:e.i!==f.i?5:e.P&&!f.P?6:0}else e=3;if(e!=0)a=e;else{a:if(e=a.ge,f=b.ge,e&&f){for(var h=0;h<e.length;h++)if(f.indexOf(e[h])!=-1){e=!0;break a}e=!1}else e=!0;a=e?c&&!Qe(a,b,d||0)?7:0:4}return a}
function Qe(a,b,c){if(Re(a,b)>c||b.v().Ab())return!1;switch(b.type){case 4:return a.J||Se.indexOf(b)!=-1?a=!1:b.J?(a=b.H(),a=a.Ab()?!(a.A&&a.A.H()):!1):a=!0,a;case 2:if(b.isConnected()&&!b.H().Ab()||a.isConnected())return!1;break;case 1:if(b.isConnected()&&!b.H().Ma()&&!b.H().P)return!1;break;case 3:if(b.isConnected()&&!a.v().D&&!b.H().P&&b.H().D)return!1;break;default:return!1}return Se.indexOf(b)!=-1?!1:!0}q(ta,"default",function(){});function Te(a){this.na=Object.create(null);this.i=a}g=Te.prototype;g.clear=function(){this.na=Object.create(null)};g.De=function(a,b){var c=this.wf(a);if(!c)throw Error("Tried to rename a variable that didn't exist. ID: "+a);var d=this.Qg(b,c.type);a=Ue(this.i);A(!0);try{if(d&&d.cb()!=c.cb()){var e=c.type;b!=d.name&&Ve(d,b,a);for(b=0;b<a.length;b++){var f,h=a[b];for(d=0;f=h.m[d];d++)for(var k=0;f.X[k];k++);}z(new (B("var_delete"))(c));this.na[e].splice(this.Rg(e).indexOf(c),1)}else Ve(c,b,a)}finally{A(!1)}};
function Ve(a,b,c){z(new (B("var_rename"))(a,b));a.name=b;for(a=0;a<c.length;a++)for(var d=c[a],e=0;b=d.m[e];e++)for(var f=0;b.X[f];f++);}
g.Rc=function(a,b,c){var d=this.Qg(a,b);if(d){if(c&&d.cb()!=c)throw Error('Variable "'+a+'" is already in use and its id is "'+d.cb()+'" which conflicts with the passed in id, "'+c+'".');return d}if(c&&this.wf(c))throw Error('Variable id, "'+c+'", is already in use.');b=b||"";d=new We(this.i,a,b,c||qb());a=this.na[b]||[];a.push(d);delete this.na[b];this.na[b]=a;return d};
g.ne=function(a){var b=this.wf(a);if(b){var c=b.name,d=this.Gi(a);a=0;for(var e;e=d[a];a++)if(e.type=="procedures_defnoreturn"||e.type=="procedures_defreturn"){a=Xe(e,"NAME");c=t.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",c).replace("%2",a);Ye(c);return}var f=this;d.length>1?(c=t.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length)).replace("%2",c),Ze(c,function(h){h&&b&&$e(f,b,d)})):$e(f,b,d)}else console.warn("Can't delete non-existent variable: "+a)};
function $e(a,b,c){var d=x;d||A(!0);try{for(var e=0;e<c.length;e++)c[e].dispose(!0);var f=a.na[b.type];a=0;for(var h;h=f[a];a++)if(h.cb()==b.cb()){f.splice(a,1);z(new (B("var_delete"))(b));break}}finally{d||A(!1)}}g.Qg=function(a,b){if(b=this.na[b||""])for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a.toLowerCase())return d;return null};g.wf=function(a){for(var b=Object.keys(this.na),c=0;c<b.length;c++)for(var d=b[c],e=0,f;f=this.na[d][e];e++)if(f.cb()==a)return f;return null};
g.Rg=function(a){return(a=this.na[a||""])?a.slice():[]};g.sf=function(){var a=[],b;for(b in this.na)a=a.concat(this.na[b]);return a};g.Gi=function(a){for(var b=[],c=Ue(this.i),d=0;d<c.length;d++){var e=Bc(c[d]);if(e)for(var f=0;f<e.length;f++)e[f].cb()==a&&b.push(c[d])}return b};function rc(a){this.id=qb();Eb[this.id]=this;this.options=a||new Xd({});this.o=!!this.options.o;this.Qd=this.options.Qd;new (Da(ta,this.options,!0))(this);this.hg=[];this.Hh=[];Object.create(null);this.Ec=[];this.Rd=[];this.Sf=[];this.Th=Object.create(null);this.Nc=Object.create(null);this.na=new Te(this);this.Ol=null}g=rc.prototype;g.I=!1;g.Qi=!1;g.Yj=1024;g.Gg=null;g.dispose=function(){this.Ec.length=0;this.clear();delete Eb[this.id]};
g.qc=function(a,b){a=a.ba();b=b.ba();return a.y+rc.prototype.qc.offset*a.x-(b.y+rc.prototype.qc.offset*b.x)};g.xg=function(a){this.hg.push(a)};g.wh=function(a){if(!ub(this.hg,a))throw Error("Block not present in workspace's list of top-most blocks.");};g.Xa=function(a){var b=[].concat(this.hg);a&&b.length>1&&(this.qc.offset=Math.sin(3*Math.PI/180),this.o&&(this.qc.offset*=-1),b.sort(this.qc));return b};function af(a,b){return a.Nc[b]?a.Nc[b].slice(0):[]}
function Ue(a){var b=a.Xa(!1);for(a=0;a<b.length;a++)b.push.apply(b,jc(b[a],!1));return b.filter(function(c){return!c.Ab()})}g.clear=function(){this.Qi=!0;try{var a=x;for(a||A(!0);this.hg.length;)this.hg[0].dispose(!1);for(;this.Hh.length;)this.Hh[this.Hh.length-1].dispose(!1);a||A(!1);this.na.clear();this.Ol&&this.Ol.clear()}finally{this.Qi=!1}};g.De=function(a,b){this.na.De(a,b)};g.Rc=function(a,b,c){return this.na.Rc(a,b,c)};g.Gi=function(a){return this.na.Gi(a)};g.ne=function(a){this.na.ne(a)};
g.Qg=function(a,b){return this.na.Qg(a,b)};g.wf=function(a){return this.na.wf(a)};g.Rg=function(a){return this.na.Rg(a)};g.sf=function(){return this.na.sf()};g.Sg=function(){return 0};g.Be=function(a,b){return new bf(this,a,b)};function cf(a,b){if(!df(a))return!0;var c=0,d;for(d in b){if(b[d]>(a.options.gh?(a.options.gh[d]!==void 0?a.options.gh[d]:Infinity)-af(a,d).length:Infinity))return!1;c+=b[d]}return c>(isNaN(a.options.If)?Infinity:a.options.If-Ue(a).length)?!1:!0}
function df(a){return a.options.If!=Infinity||!!a.options.gh}function ef(a,b){var c=b?a.Sf:a.Rd;a=b?a.Rd:a.Sf;var d=c.pop();if(d){for(var e=[d];c.length&&d.group&&d.group==c[c.length-1].group;)e.push(c.pop());for(c=0;d=e[c];c++)a.push(d);e=Db(e,b);zb=!1;try{for(c=0;d=e[c];c++)d.run(b)}finally{zb=!0}}}function ff(){var a=O;a.Rd.length=0;a=a.Sf.length=0;for(var b;b=Bb[a];a++)b.Oa=!1}g.Nb=function(a){return this.Th[a]||null};var Eb=Object.create(null);
function gf(){var a=[],b;for(b in Eb)a.push(Eb[b]);return a};function hf(a){this.ef=a;this.Fa()}g=hf.prototype;g.Y=null;g.ef=null;g.Fa=function(){this.Y||(this.Y=D(Ub,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklyWsDragSurface blocklyOverflowVisible"},null),this.ef.appendChild(this.Y))};g.Le=function(a,b){a=a.toFixed(0);b=b.toFixed(0);this.Y.style.display="block";dc(this.Y,"translate3d("+a+"px, "+b+"px, 0px)")};g.Ei=function(){return jb(this.Y)};
g.Cg=function(a){if(!a)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var b=this.Y.childNodes[0],c=this.Y.childNodes[1];if(!(b&&c&&bc(b,"blocklyBlockCanvas")&&bc(c,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");this.sj!=null?cc(b,this.sj):a.insertBefore(b,a.firstChild);cc(c,b);this.Y.style.display="none";if(this.Y.childNodes.length)throw Error("Drag surface was not cleared.");dc(this.Y,"");this.sj=null};function jf(a,b,c){if(!b)throw Error("Cannot create a node without a location.");this.mg=a;this.L=b;this.jm=null;(a=c||null)&&a.im&&(this.jm=a.im)}var kf=!1;function lf(a){return a?new jf("field",a):null}function mf(a){if(!a)return null;var b=a.type;return b==1||b==3&&a.jc()?nf(a.jc()):b==3?new jf("next",a):b==2?new jf("output",a):b==4?new jf("previous",a):null}function nf(a){return a&&a.connection?new jf("input",a.connection):null}function of(a){return a?new jf("block",a):null}
function pf(a){return a?new jf("stack",a):null}g=jf.prototype;g.getType=function(){return this.mg};function qf(a,b){a=a.L;a instanceof bf||(a=a.v());if(!a||!a.i)return null;var c=a.Qb();a=c.i.Xa(!0);for(var d=0,e;e=a[d];d++)if(c.id==e.id)return b=d+(b?1:-1),b==-1||b==a.length?null:pf(a[b]);throw Error("Couldn't find "+(b?"next":"previous")+" stack?!");}function rf(a){if(!a)return null;do var b=a.A&&a.A.H();while(b&&xb(b)==a&&(a=b));return(b=a.A||a.u)&&b.J&&b.J.jc()?nf(b.J.jc()):pf(a)}
g.v=function(){return this.getType()==="block"?this.L:this.getType()==="stack"?this.L:this.getType()==="workspace"?null:this.L.v()};
g.next=function(){switch(this.mg){case "stack":return qf(this,!0);case "output":var a=this.L;return of(a.v());case "field":a:{var b=this.L,c=b.jc();a=b.v();b=c.X.indexOf(b)+1;c=a.m.indexOf(c);for(var d;d=a.m[c];c++){for(var e=d.X;b<e.length;){if(sf(e[b])||kf){a=lf(e[b]);break a}b++}b=0;if(d.connection){a=nf(d);break a}}a=null}return a;case "input":a:{b=this.L.jc();a=b.v();for(b=a.m.indexOf(b)+1;c=a.m[b];b++){d=c.X;e=0;for(var f;f=d[e];e++)if(sf(f)||kf){a=lf(f);break a}if(c.connection){a=nf(c);break a}}a=
null}return a;case "block":return mf(this.L.D);case "previous":return a=this.L,of(a.v());case "next":return a=this.L,mf(a.J)}return null};g.Vc=function(){switch(this.mg){case "workspace":var a=this.L.Xa(!0);if(a.length>0)return pf(a[0]);break;case "stack":a=this.L;var b=a.A||a.u;return b?mf(b):of(a);case "block":a=this.L;a:{a=a.m;b=0;for(var c;c=a[b];b++){for(var d=c.X,e=0,f;f=d[e];e++)if(sf(f)||kf){a=lf(f);break a}if(c.connection){a=nf(c);break a}}a=null}return a;case "input":return mf(this.L.J)}return null};
g.cd=function(){switch(this.mg){case "stack":return qf(this,!1);case "field":a:{var a=this.L;var b=a.jc();var c=a.v();a=b.X.indexOf(a)-1;for(var d=c.m.indexOf(b),e;e=c.m[d];d--){if(e.connection&&e!==b){b=nf(e);break a}for(e=e.X;a>-1;){if(sf(e[a])||kf){b=lf(e[a]);break a}a--}d-1>=0&&(a=c.m[d-1].X.length-1)}b=null}return b;case "input":a:{b=this.L.jc();c=b.v();for(a=c.m.indexOf(b);d=c.m[a];a--){if(d.connection&&d!==b){b=nf(d);break a}d=d.X;e=d.length-1;for(var f;f=d[e];e--)if(sf(f)||kf){b=lf(f);break a}}b=
null}return b;case "block":return b=this.L,mf(b.A||b.u);case "previous":b=this.L;if((b=b.J)&&!b.jc())return mf(b);break;case "next":return b=this.L,of(b.v())}return null};
g.$c=function(){switch(this.mg){case "stack":var a=this.L,b=a.ba();a=a.i;return(b=new w(b.x,b.y+-20),a)?new jf("workspace",a,{im:b}):null;case "output":return b=this.L,(a=b.J)?mf(a):pf(b.v());case "field":return of(this.L.v());case "input":return b=this.L,of(b.v());case "block":return a=this.L,rf(a);case "previous":return b=this.L,rf(b.v());case "next":return b=this.L,rf(b.v())}return null};var tf=Object.create(null);var uf=Object.create(null);function vf(){this.oo=this.Wb;this.$f(function(){var a=this.getParent();return a&&wf(a)&&a.Wb||this.oo}.bind(this))}if(uf.parent_tooltip_when_inline)throw Error('Error: Extension "parent_tooltip_when_inline" is already registered.');if(typeof vf!="function")throw Error('Error: Extension "parent_tooltip_when_inline" must be a function');uf.parent_tooltip_when_inline=vf;var xf=0,yf=null;function zf(a,b,c,d){var e=(new Date-c)/150;e>1?F(a):(a.setAttribute("transform","translate("+(a.qo+(b?-1:1)*a.kk.width*d/2*e)+","+(a.so+a.kk.height*d*e)+") scale("+(1-e)*d+")"),setTimeout(zf,10,a,b,c,d))}function Af(a,b,c){var d=(new Date-b)/150;d>1?F(a):(a.setAttribute("r",d*25*c),a.style.opacity=1-d,xf=setTimeout(Af,10,a,b,c))}
function Bf(a,b,c){var d=(new Date-c)/200;d>1?a.ag="":(a.ag="skewX("+Math.round(Math.sin(d*Math.PI*3)*(1-d)*b)+")",yf=a,xf=setTimeout(Bf,10,a,b,c));a.setAttribute("transform",a.lg+a.ag)}function Cf(){if(yf){clearTimeout(xf);var a=yf;a.ag="";a.setAttribute("transform",a.lg);yf=null}};function Df(a,b,c){Df.h.constructor.call(this,a?a.i.id:void 0);this.Z=a?a.id:null;this.$k=b;this.mk=c}K(Df,Fd);Df.prototype.type="drag";Df.prototype.S=function(){var a=Df.h.S.call(this);a.isStart=this.$k;a.blockId=this.Z;a.blocks=this.mk;return a};Df.prototype.K=function(a){Df.h.K.call(this,a);this.$k=a.isStart;this.Z=a.blockId;this.mk=a.blocks};q(p,"drag",Df);function Ef(a){this.hd=P=a;this.j=a.i;this.Xc=this.Si=null;this.qf=Ff(this,this.hd);this.Na=this.oa=null;this.Yb=!1;this.pf=this.Ki=this.Bd=null;this.zg=Gf(this)}Ef.prototype.dispose=function(){this.zg.length=0;y++;try{this.qf&&this.qf.dispose(),this.Xc&&this.Xc.dispose()}finally{y--}};
Ef.prototype.update=function(a,b){var c=this.oa&&this.Na?oa:na;for(var d=null,e=null,f=0;f<this.zg.length;f++){var h=this.zg[f],k=h.closest(c,a);k.connection&&(d=k.connection,e=h,c=k.sh)}c={closest:d,local:e,sh:c};if((this.Yb=this.Gj(c,b))||Hf(this,c,a)){y++;c.closest?(a=this.oa!=c.closest,b=this.Na!=c.local,this.oa&&this.Na&&(a||b||this.Yb)&&If(this)):If(this);this.Na=this.oa=this.Bd=null;if(!this.Yb&&(a=c.closest,b=c.local,a))if(a==this.oa||a.v().Ab())console.log("Trying to connect to an insertion marker");
else{this.oa=a;this.Na=b;a=this.oa;b=this.Na;c=this.hd;b.type==2||b.type==4?((d=!a.isConnected())||(d=a.H(),d=!!Me(c,b.type===2?d.u:d.A)),b=d?0:2):b=0;switch(b){case 1:this.Ki=this.oa.v();break;case 0:d=this.Na;b=this.oa;c=this.Si&&d==this.Si?this.Xc:this.qf;d=c.Di(d.v(),d);if(d==this.Bd)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");c.U();c.I=!0;c.O().setAttribute("visibility","visible");d&&b&&(d.type!=3&&d.type!=1||c.moveBy(b.x-d.x,b.y-d.y));b&&d.connect(b);
this.Bd=d;break;case 2:this.pf=this.oa.H(),Jf(this.pf.ea,"blocklyReplaceable",!0)}a&&(c=a.l.i.ma.C(),b=Kf(c,a),a.type==1||a.type==2?(c=c.ae,b=Q(0,-c)+R("v",c)+b.Cb+R("v",c)):(c=c.Te-c.Zb,b=Q(-c,0)+R("h",c)+b.bd+R("h",c)),c=a.l.ba(),Le.Uk=D(Rb,{"class":"blocklyHighlightedConnectionPath",d:b,transform:"translate("+(a.x-c.x)+","+(a.y-c.y)+")"+(a.l.o?" scale(-1 1)":"")},a.l.O()))}y--}};
function Ff(a,b){var c=b.type;y++;try{var d=a.j.Be(c);d.Rl(!0);if(b.Hc){var e=b.Hc();e&&d.Sc(e)}for(a=0;a<b.m.length;a++){var f=b.m[a];if(f.name!="_TEMP_COLLAPSED_INPUT"){var h=d.m[a];if(!h)throw Error("The insertion marker manager tried to create a marker but the result is missing an input. If you are using a mutator, make sure your domToMutation method is properly defined.");for(c=0;c<f.X.length;c++){var k=f.X[c],l=h.X[c];if(!l)throw Error("The insertion marker manager tried to create a marker but the result is missing a field. If you are using a mutator, make sure your domToMutation method is properly defined.");
wd(l,k.hb)}}}d.Kd(b.isCollapsed());d.Nd(wf(b));d.ue();d.O().setAttribute("visibility","hidden")}finally{y--}return d}function Gf(a){var b=a.hd.Pb(!1),c=a.hd.bh(!0);if(c&&c!=a.hd.D){b.push(c);a.Si=c;if(a.Xc){y++;try{a.Xc.dispose()}finally{y--}}a.Xc=Ff(a,c.v())}return b}
function Hf(a,b,c){var d=b.local,e=b.closest;b=b.sh;if(d&&e){if(a.Na&&a.oa){if(a.oa==e&&a.Na==d)return!1;d=a.Na.x+c.x-a.oa.x;a=a.Na.y+c.y-a.oa.y;a=Math.sqrt(d*d+a*a);return!(e&&b>a-8)}if(a.Na||a.oa)console.error("Only one of localConnection_ and closestConnection_ was set.");else return!0}else return!(!a.Na||!a.oa);console.error("Returning true from shouldUpdatePreviews, but it's not clear why.");return!0}Ef.prototype.Gj=function(a,b){return b&&Qc(this.j.$e,b.id)?b.vo(this.hd,a&&!!a.closest):!1};
function If(a){a.oa&&a.oa.H()&&(F(Le.Uk),delete Le.Uk);if(a.pf)Jf(a.pf.ea,"blocklyReplaceable",!1),a.pf=null;else if(a.Ki)a.Ki=null;else if(a.Bd)if(a.Bd){var b=a.Bd,c=b.v(),d=c.D,e=c.A,f=c.u;f=b.type==1&&!(f&&f.J);!(b!=d||e&&e.J)||f?Dd(b.H(),!1):b.type==3&&b!=d?(d=b.J,Dd(d.v(),!1),e=e?e.J:null,Dd(c,!0),e&&e.connect(d)):Dd(c,!0);if(b.J)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");a.Bd=null;(a=c.O())&&a.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")}
Ef.prototype.pe=function(){var a=[];this.qf&&a.push(this.qf);this.Xc&&a.push(this.Xc);return a};function Lf(a,b){this.V=a;this.j=b;this.fc=new Ef(this.V);this.aa=null;this.Yb=!1;this.rc=this.V.ba();b=[];a=wb(a,!1);for(var c=0,d;d=a[c];c++){d=Mf(d);for(var e=0;e<d.length;e++){var f={location:d[e].Ro(),icon:d[e]};b.push(f)}}this.Ng=b}g=Lf.prototype;g.dispose=function(){this.Ng.length=0;this.fc&&this.fc.dispose()};
g.Eh=function(a,b){x||A(!0);var c=new (B("drag"))(this.V,!0,wb(this.V,!1));z(c);this.j.$g&&Nf(this.V);ec();this.j.Fb(!1);Cf();if(this.V.getParent()||b&&this.V.D&&this.V.D.H())Dd(this.V,b),a=this.Ce(a),a=La(this.rc,a),this.V.translate(a.x,a.y),a=this.V,a.i.ac.play("disconnect"),a.i.scale<1||(b=Of(a).height,b=Math.atan(10/b)/Math.PI*180,a.o||(b*=-1),Bf(a.O(),b,new Date)),a=this.fc,a.zg=Gf(a);this.V.Ld(!0);a=this.V;a.og&&(b=a.ba(),a.O().removeAttribute("transform"),a.i.ib.Le(b.x,b.y),(b=a.O())&&Md(a.i.ib,
b))};g.dc=function(a,b){b=this.Ce(b);Pf(this.V,La(this.rc,b));for(var c=0;c<this.Ng.length;c++){var d=this.Ng[c];d.icon.ap(La(d.location,b))}c=this.aa;this.aa=Qf(this.j,a);this.fc.update(b,this.aa);a=this.Yb;this.Yb=this.fc.Yb;a!=this.Yb&&Jf(this.V.ea,"blocklyDraggingDelete",this.Yb);this.aa!==c&&(c&&c.Nn(this.V),this.aa&&this.aa.Mn(this.V));this.aa&&this.aa.On(this.V)};
g.mf=function(a,b){this.dc(a,b);this.Ng=[];a=new (B("drag"))(this.V,!1,wb(this.V,!1));z(a);fc();Cf();if(this.aa&&this.aa.bo(this.V))b=this.rc;else{var c=b=this.Ce(b);b=La(this.rc,b)}a=this.V;a.og&&(a.translate(b.x,b.y),a.i.ib.Cg(a.i.Ba));this.aa&&this.aa.Pn(this.V);this.Yb?(Rf(this),this.V.dispose(!1,!0),Se=[],b=!0):b=!1;if(!b)if(this.V.Ld(!1),c){Sf(this.V,c.x,c.y);Rf(this);if(this.fc.oa){if(c=this.fc,c.oa&&(y++,If(c),y--,c.Na.connect(c.oa),c.hd.I)){a=(Ne(c.Na)?c.oa:c.Na).v();var d=a.i;b=d.scale;
d.ac.play("click");if(!(b<1)){var e=Tf(d,a.O());a.u?(e.x+=(a.o?3:-3)*b,e.y+=13*b):a.A&&(e.x+=(a.o?-23:23)*b,e.y+=3*b);a=D(Hb,{cx:e.x,cy:e.y,r:0,fill:"none",stroke:"#888","stroke-width":10},L(d));Af(a,new Date,b)}Nf(c.hd.Qb())}}else this.V.U();Uf(this.V)}else Vf(this.V.i,Wf(this.j.Ae,!0),this.V);this.j.Fb(!0);A(!1)};function Rf(a){var b=new (B("move"))(a.V);b.fj=a.rc;Bd(b);z(b)}g.Ce=function(a){a=new w(a.x/this.j.scale,a.y/this.j.scale);this.j.$g&&a.scale(1/this.j.options.fb.scale);return a};
g.pe=function(){return this.fc&&this.fc.pe?this.fc.pe():[]};q(Ba,"default",Lf);function Xf(a,b){this.za=a;this.j=b;this.aa=null;this.pg=!1;this.rc=this.za.ba();this.od=sb()&&b.ib?b.ib:null}Xf.prototype.dispose=function(){this.od=this.j=this.za=null};function Yf(a,b,c){a.Ce(c);Pf(a.za,a.od);c=a.aa;a.aa=Qf(a.j,b);b=a.pg;a.pg=a.Gj(a.aa);b!=a.pg&&Jf(a.za.ea,"blocklyDraggingDelete",a.pg);a.aa!==c&&(c&&c.Nn(a.za),a.aa&&a.aa.Mn(a.za));a.aa&&a.aa.On(a.za)}Xf.prototype.Gj=function(a){return a&&Qc(this.j.$e,a.id)?a.vo(this.za,!1):!1};
function Zf(a,b,c){Yf(a,b,c);a.aa&&a.aa.bo(a.za)?b=a.rc:(b=a.Ce(c),b=La(a.rc,b));a.za.moveTo(b.x,b.y);a.aa&&a.aa.Pn(a.za);a.pg?a.za.dispose(!1,!0):(a.od&&a.od.Cg(a.j.gd),a.za.Ld&&a.za.Ld(!1));a.j.Fb(!0);A(!1)}Xf.prototype.Ce=function(a){a=new w(a.x/this.j.scale,a.y/this.j.scale);this.j.$g&&a.scale(1/this.j.options.fb.scale);return a};function $f(a,b,c){$f.h.constructor.call(this,a?a.i.id:b);this.Z=a?a.id:null;this.Ul=c}K($f,Fd);$f.prototype.type="click";$f.prototype.S=function(){var a=$f.h.S.call(this);a.targetType=this.Ul;this.Z&&(a.blockId=this.Z);return a};$f.prototype.K=function(a){$f.h.K.call(this,a);this.Ul=a.targetType;this.Z=a.blockId};q(p,"click",$f);function ag(a){this.j=a;this.Vk=bg(this.j);this.gm=cg(this.j);this.lo=new w(a.scrollX,a.scrollY)}ag.prototype.dispose=function(){this.j=null};ag.prototype.Eh=function(){P&&dg(P);se(this.j)};ag.prototype.mf=function(a){this.dc(a);te(this.j)};ag.prototype.dc=function(a){a=La(this.lo,a);if(this.Vk&&this.gm)this.j.scroll(a.x,a.y);else if(this.Vk)this.j.scroll(a.x,this.j.scrollY);else if(this.gm)this.j.scroll(this.j.scrollX,a.y);else throw new TypeError("Invalid state.");};function eg(a,b){this.ml=null;this.Va=new w(0,0);this.ra=this.Ja=this.Ie=this.Je=this.Vb=null;this.ci=b;this.Bf=this.wd=this.Cf=this.qd=!1;this.Ub=a;this.N=this.Vd=this.bc=this.Oc=this.nh=this.mh=null;this.Rk=this.Yg=this.yf=this.pk=!1}g=eg.prototype;g.dispose=function(){Dc=null;ve=!1;this.ci.La=null;this.mh&&I(this.mh);this.nh&&I(this.nh);this.bc&&this.bc.dispose();this.Vd&&this.Vd.dispose();this.Oc&&this.Oc.dispose()};
function fg(a,b){var c=new w(b.clientX,b.clientY);var d=a.ml;a.Va=new w(c.x-d.x,c.y-d.y);a.qd?c=!1:(c=a.Va,a.qd=Math.sqrt(c.x*c.x+c.y*c.y)>(a.N?10:5),c=a.qd);if(c){if(a.pk)throw Error("updateIsDragging_ should only be called once per gesture.");a.pk=!0;a.Vb?(a.Bf=!0,a.Oc=new Xf(a.Vb,a.ra),c=a.Oc,x||A(!0),c.j.Fb(!1),c.za.$o(!1),c.od&&(c.za.moveTo(0,0),c.od.Le(c.rc.x,c.rc.y),Md(c.od,c.za.O())),c.za.Ld&&c.za.Ld(!0),Yf(a.Oc,a.Ub,a.Va),c=!0):c=!1;if(!c){a.Ja?(a.N?(a.Ja&&a.N.To(a.Ja)?!a.N.Gn()||a.N.Uo(a.Va)?
(a.ra=a.N.Lj,gg(a.ra),x||A(!0),a.Ie=null,a.Ja=a.N.dn(a.Ja),a.Ja.select(),c=!0):c=!1:c=!1,a.wd=c):a.Ja.Ma()&&(a.wd=!0),a.wd?(a.bc=new (Da(Ba,a.ci.options,!0))(a.Ja,a.ra),a.bc.Eh(a.Va,a.Rk),a.bc.dc(a.Ub,a.Va),c=!0):c=!1):c=!1;if(c=!c)if(a.N)c=a.N.Gn();else if(c=a.ra)c=a.ra,c=c.options.Ha&&c.options.Ha.dc;c&&(a.Vd=new ag(a.ra),a.Cf=!0,a.Vd.Eh())}Hc()}a.Ub=b}
g.ki=function(a){ib(a)?this.cancel():(this.yf=!0,Cf(),gg(this.ra),this.ra.$g&&this.ra.resize(),M(!!this.N),md(this.ra),this.Ub=a,Ie(),ve=!0,this.Ja&&this.Ja.select(),mb(a)?Ic(this,a):(a.type.toLowerCase()!="touchstart"&&a.type.toLowerCase()!="pointerdown"||a.pointerType=="mouse"||Gc(a,this),this.ml=new w(a.clientX,a.clientY),this.Rk=a.altKey||a.ctrlKey||a.metaKey,this.lk(a)))};
g.lk=function(a){this.mh=H(document,"mousemove",null,this.se.bind(this));this.nh=H(document,"mouseup",null,this.Tg.bind(this));a.preventDefault();a.stopPropagation()};g.se=function(a){fg(this,a);this.Cf?this.Vd.dc(this.Va):this.wd?this.bc.dc(this.Ub,this.Va):this.Bf&&Yf(this.Oc,this.Ub,this.Va);a.preventDefault();a.stopPropagation()};
g.Tg=function(a){fg(this,a);Hc();if(this.Yg)console.log("Trying to end a gesture recursively.");else{this.Yg=!0;if(this.Bf)Zf(this.Oc,a,this.Va);else if(this.wd)this.bc.mf(a,this.Va);else if(this.Cf)this.Vd.mf(this.Va);else if(this.Vb&&!this.qd)this.Vb.ao&&this.Vb.ao(),this.Vb.select&&this.Vb.select();else if(hg(this)){var b=this.Je,c=this.Ub;sf(b)&&b.Dh(c);ig(this)}else!this.Ie||this.qd||hg(this)?this.Ie||this.Vb||this.Je||this.qd||(b=this.ci,P&&dg(P),b=this.ra||b,z(new (B("click"))(null,b.id,"workspace"))):
(this.N&&this.N.jk?this.Ja.isEnabled()&&(x||A(!0),Uf(this.N.dn(this.Ja))):(b=new (B("click"))(this.Ie,this.ra.id,"block"),z(b)),ig(this),A(!1));a.preventDefault();a.stopPropagation();this.dispose()}};g.cancel=function(){this.Yg||(Hc(),this.Bf?Zf(this.Oc,this.Ub,this.Va):this.wd?this.bc.mf(this.Ub,this.Va):this.Cf&&this.Vd.mf(this.Va),this.dispose())};function Ic(a,b){a.Ja?(ig(a),M(!!a.N),a.Ja.Bh(b)):a.Vb?a.Vb.Bh(b):a.ra&&!a.N&&(M(),a.ra.Bh(b));b.preventDefault();b.stopPropagation();a.dispose()}
function ig(a){a.Ja&&!a.N&&Nf(a.Ja)}function jg(a,b){b.P?jg(a,b.getParent()):a.Ja=b}function hg(a){return(a.Je?sf(a.Je):!1)&&!a.qd&&(!a.N||!a.N.jk)}g.xb=function(){return this.Cf||this.wd||this.Bf};g.pe=function(){return this.bc?this.bc.pe():[]};function kg(){for(var a=gf(),b=0,c;c=a[b];b++)if(c.La)return!0;return!1};function lg(){this.ub=this.Lb=this.Zh=null;this.type="marker"}function mg(a,b){var c=a.Lb;a.Lb=b;a.ub&&a.ub.Mb(c,a.Lb)}lg.prototype.Mb=function(){this.ub&&this.ub.Mb(this.Lb,this.Lb)};lg.prototype.Bc=function(){this.ub&&this.ub.Bc()};lg.prototype.dispose=function(){this.ub&&this.ub.dispose()};function ng(){ng.h.constructor.call(this);this.type="cursor"}K(ng,lg);ng.prototype.next=function(){var a=this.Lb;if(!a)return null;for(a=a.next();a&&a.next()&&(a.getType()=="next"||a.getType()=="block");)a=a.next();a&&mg(this,a);return a};ng.prototype.Vc=function(){var a=this.Lb;if(!a)return null;if(a.getType()=="previous"||a.getType()=="output")a=a.next();(a=a.Vc())&&mg(this,a);return a};
ng.prototype.cd=function(){var a=this.Lb;if(!a)return null;for(a=a.cd();a&&a.cd()&&(a.getType()=="next"||a.getType()=="block");)a=a.cd();a&&mg(this,a);return a};ng.prototype.$c=function(){var a=this.Lb;if(!a)return null;(a=a.$c())&&a.getType()=="block"&&(a=a.cd()||a);a&&mg(this,a);return a};q(ua,"default",ng);function og(a){this.zc=this.tb=null;this.Hf=Object.create(null);this.j=a}g=og.prototype;g.tf=function(){return this.tb};g.vf=function(a){return this.Hf[a]||null};g.Jc=function(a){a?(this.j.Ba.appendChild(a),this.zc=a):this.zc=null};g.ed=function(a){a?this.j.Ba&&(this.zc?this.j.Ba.insertBefore(a,this.zc):this.j.Ba.appendChild(a)):this.Gc=null};
g.dispose=function(){for(var a=Object.keys(this.Hf),b=0,c;c=a[b];b++){var d=this.Hf[c];if(d)d.dispose(),delete this.Hf[c];else throw Error("Marker with ID "+c+" does not exist. Can only unregister markers that exist.");}this.Hf=null;this.tb&&(this.tb.dispose(),this.tb=null)};var pg,qg=null,rg=null,sg="",tg="";function ug(a){var b=S,c=S.dispose;vg();qg=b;rg=c;b=pg;b.style.direction=a?"rtl":"ltr";b.style.display="block";a=nd;sg=a.ma.Ob();tg=a.Ac().Ob();E(b,sg);E(b,tg)}function vg(){if(qg){qg=null;var a=pg;a.style.display="none";a.style.left="";a.style.top="";rg&&rg();rg=null;a.textContent="";sg&&(ac(a,sg),sg="");tg&&(ac(a,tg),tg="");md(nd)}}function wg(a,b,c){pg.style.left=a+"px";pg.style.top=b+"px";pg.style.height=c+"px"};function xg(a,b,c){this.hb=this.Kh;this.Xl=this.fm=null;this.Pa=new Ta(0,0);this.g=this.bj=this.Pd=this.Qa=this.sa=this.bb=this.Gc=this.zc=null;c&&this.af(c);wd(this,a);b&&(this.fm=b)}g=xg.prototype;g.Kh=null;g.name=void 0;g.disposed=!1;g.ll=50;g.l=null;g.Wc=!0;g.kd=!0;g.rk=null;g.Pe=!0;g.$j=!1;g.af=function(a){var b=a.tooltip;typeof b=="string"&&(b=ob(a.tooltip));b&&this.$f(b)};g.C=function(){!this.g&&this.l&&this.l.i&&this.l.i.I&&(this.g=this.l.i.ma.C());return this.g};g.v=function(){return this.l};
g.init=function(){this.bb||(this.bb=D(Ob,{},null),this.isVisible()||(this.bb.style.display="none"),this.l.O().appendChild(this.bb),this.Vg(),yg(this),this.$f(this.Xl),De(zg(this)),this.bj=H(zg(this),"mousedown",this,this.Mf))};g.Vg=function(){Ag(this);Bg(this)};function Ag(a){a.sa=D(Tb,{rx:a.C().tg,ry:a.C().tg,x:0,y:0,height:a.Pa.height,width:a.Pa.width,"class":"blocklyFieldRect"},a.bb)}
function Bg(a){a.Qa=D(Vb,{"class":"blocklyText"},a.bb);a.C().Lh&&a.Qa.setAttribute("dominant-baseline","central");a.Pd=document.createTextNode("");a.Qa.appendChild(a.Pd)}g.Ai=function(a){wd(this,a.textContent)};g.dispose=function(){ad===this&&kd();qg==this&&vg();He(zg(this));this.bj&&I(this.bj);F(this.bb);this.disposed=!0};
function yg(a){var b=a.bb;a.Pe&&b&&(a.l.yb()?(E(b,"blocklyEditableText"),ac(b,"blocklyNonEditableText"),b.style.cursor=a.qm):(E(b,"blocklyNonEditableText"),ac(b,"blocklyEditableText"),b.style.cursor=""))}function sf(a){return!!a.l&&a.l.yb()&&!!a.Dh&&typeof a.Dh==="function"}g.isVisible=function(){return this.kd};g.Ia=function(a){if(this.kd!=a){this.kd=a;var b=this.O();b&&(b.style.display=a?"block":"none")}};g.O=function(){return this.bb};g.Ea=function(){};
g.wj=function(){this.Pd&&(this.Pd.nodeValue=Cg(this));this.bm()};g.bm=function(){var a=this.C(),b=this.sa?this.C().Qe:0,c=b*2,d=a.ug,e=0;this.Qa&&(e=hc(this.Qa,a.Se+"pt",a.Xd,a.Wd),c+=e);this.sa&&(d=Math.max(d,a.Sj));this.Pa.height=d;this.Pa.width=c;Dg(this,b,e);Eg(this)};function Dg(a,b,c){if(a.Qa){var d=a.C(),e=a.Pa.height/2;a.Qa.setAttribute("x",a.l.o?a.Pa.width-c-b:b);a.Qa.setAttribute("y",d.Lh?e:e-d.ug/2+d.Vj)}}
function Eg(a){a.sa&&(a.sa.setAttribute("width",a.Pa.width),a.sa.setAttribute("height",a.Pa.height),a.sa.setAttribute("rx",a.C().tg),a.sa.setAttribute("ry",a.C().tg))}g.getSize=function(){if(!this.isVisible())return new Ta(0,0);this.Wc?(this.wj(),this.Wc=!1):this.kd&&this.Pa.width==0&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.wj());return this.Pa};
function Cg(a){var b=Fg(a);if(!b)return"\u00a0";b.length>a.ll&&(b=b.substring(0,a.ll-2)+"\u2026");b=b.replace(/\s/g,"\u00a0");a.l&&a.l.o&&(b+="\u200f");return b}function Fg(a){if(a.Fi){var b=a.Fi.call(a);if(b!==null)return String(b)}return String(a.hb)}g.Gf=function(){this.Wc=!0;this.g=null};function Gg(a){a.Wc=!0;a.l&&a.l.I&&(a.l.U(),a.l.jb(),a.Oj())}
function wd(a,b){if(b!==null){var c=a.Mg(b);b=Hg(a,b,c);if(!(b instanceof Error)){if(c=a.fm)if(c=c.call(a,b),b=Hg(a,b,c),b instanceof Error)return;c=a.l;if(!c||!c.disposed){var d=a.hb;d===b?a.kf(b):(c&&y==0&&z(new (B("change"))(c,"field",a.name||null,d,b)),a.kf(b),a.Wc&&Gg(a))}}}}function Hg(a,b,c){if(c===null)return a.Wc&&Gg(a),Error();c!==void 0&&(b=c);return b}g.Mg=function(a){return a===null||a===void 0?null:a};g.kf=function(a){this.hb=a;this.Wc=!0};
g.Mf=function(a){if(this.l&&this.l.i&&(a=Ig(this.l.i,a))){if(a.yf)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");a.Je||(a.Je=this)}};g.$f=function(a){a||a===""||(a=this.l);var b=zg(this);b?b.Wb=a:this.Xl=a};function zg(a){return a.rk||a.O()}g.jc=function(){for(var a=null,b=this.l,c=b.m,d=0;d<b.m.length;d++)for(var e=c[d],f=e.X,h=0;h<f.length;h++)if(f[h]===this){a=e;break}return a};g.Kk=function(){return!1};
g.Jc=function(a){a?(this.bb.appendChild(a),this.zc=a):this.zc=null};g.ed=function(a){a?(this.bb.appendChild(a),this.Gc=a):this.Gc=null};g.Oj=function(){var a=this.l.i;a.Ef&&this.zc&&a.tf().Mb();a.Ef&&this.Gc&&a.vf("local_marker_1").Mb()};function Jg(a,b,c){this.Bg=null;Jg.h.constructor.call(this,a,null,c);c||(this.Bg=b||null)}K(Jg,xg);Jg.prototype.Kh="";Jg.K=function(a){var b=ob(a.text);return new Jg(b,void 0,a)};Jg.prototype.Pe=!1;Jg.prototype.af=function(a){Jg.h.af.call(this,a);this.Bg=a["class"]};Jg.prototype.Vg=function(){Bg(this);this.Bg&&E(this.Qa,this.Bg)};Jg.prototype.Mg=function(a){return a===null||a===void 0?null:String(a)};q(va,"field_label",Jg);function Kg(a,b,c,d){if(a!=5&&!b)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=a;this.name=b;this.l=c;this.connection=d;this.X=[]}g=Kg.prototype;g.align=-1;g.kd=!0;g.v=function(){return this.l};function Lg(a,b,c){Mg(a,a.X.length,b,c);return a}
function Mg(a,b,c,d){if(b<0||b>a.X.length)throw Error("index "+b+" out of bounds.");if(!(c||c==""&&d))return b;if(typeof c=="string"){c={type:"field_label",text:c};var e=Ca(va,c.type);e?c=e.K(c):(console.warn("Blockly could not create a field of type "+c.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),c=null)}if(c.l)throw Error("Field already bound to a block.");
c.l=a.l;a.l.I&&(c.init(),c.Ea());c.name=d;c.Ia(a.isVisible());c.rj&&(b=Mg(a,b,c.rj));a.X.splice(b,0,c);++b;c.Kj&&(b=Mg(a,b,c.Kj));a.l.I&&(a.l=a.l,a.l.U(),a.l.jb());return b}g.isVisible=function(){return this.kd};
g.Ia=function(a){if(this.kd!=a){this.kd=a;for(var b=0,c;c=this.X[b];b++)c.Ia(a);if(this.connection){this.connection=this.connection;if(a)Ng(this.connection);else if(b=this.connection,Og(b,!1),b.J)for(b=wb(b.H(),!1),c=0;c<b.length;c++){for(var d=b[c],e=d.Pb(!0),f=0;f<e.length;f++)Og(e[f],!1);d=Mf(d);for(f=0;f<d.length;f++)d[f].Ia(!1)}if(b=this.connection.H())b.O().style.display=a?"block":"none"}}};g.Gf=function(){for(var a=0,b;b=this.X[a];a++)b.Gf()};
g.Vf=function(a){if(!this.connection)throw Error("This input does not have a connection.");this.connection.Vf(a)};function Pg(a){a.align=1;a.l.I&&(a.l=a.l,a.l.U());return a}g.Yf=function(a){if(!this.connection)throw Error("This input does not have a connection.");this.connection.Yf(a)};g.qe=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.qe()};g.init=function(){if(this.l.i.I)for(var a=0;a<this.X.length;a++)this.X[a].init()};
g.dispose=function(){for(var a=0,b;b=this.X[a];a++)b.dispose();this.connection&&this.connection.dispose();this.l=null};function bf(a,b,c){if(ka.Generator&&typeof ka.Generator.prototype[b]!="undefined")throw Error('Block prototypeName "'+b+'" conflicts with Blockly.Generator members.');this.id=c&&!a.Nb(c)?c:qb();a.Th[this.id]=this;this.A=this.D=this.u=null;this.m=[];this.Cc=void 0;this.disabled=!1;this.Wb="";this.contextMenu=!0;this.oc=null;this.wc=[];this.Ek=this.ol=this.di=!0;this.md=this.P=!1;this.yc={text:null,Il:!1,size:new Ta(160,80)};this.km=new w(0,0);this.i=a;this.zb=a.yd;this.o=a.o;this.xe=!1;this.rd=void 0;
this.I=null;if(b){this.type=b;c=tf[b];if(!c||typeof c!="object")throw TypeError("Unknown block type: "+b);qd(this,c)}a.xg(this);a.Nc[this.type]||(a.Nc[this.type]=[]);a.Nc[this.type].push(this);(a=x)||A(!0);b=zb;try{typeof this.init=="function"&&(zb=!1,this.init(),zb=b),y==0&&z(new (B("create"))(this))}finally{a||A(!1),zb=b}this.Fn=this.Cc;if(typeof this.onchange=="function"){if((a=this.onchange)&&typeof a!="function")throw Error("onchange must be a function.");this.Nf&&ub(this.i.Ec,this.Nf);if(this.onchange=
a)this.Nf=a.bind(this),this.i.Ec.push(this.Nf)}}g=bf.prototype;g.data=null;g.disposed=!1;g.sb="#000000";g.cg="";
g.dispose=function(a){if(this.i){this.Nf&&ub(this.i.Ec,this.Nf);Dd(this,a);y==0&&z(new (B("delete"))(this));y++;try{if(this.i){this.i.wh(this);var b=this.i;b.Nc[this.type].splice(b.Nc[this.type].indexOf(this),1);b.Nc[this.type].length||delete b.Nc[this.type];delete this.i.Th[this.id];this.i=null}P==this&&(P=null);for(var c=this.wc.length-1;c>=0;c--)this.wc[c].dispose(!1);c=0;for(var d;d=this.m[c];c++)d.dispose();this.m.length=0;var e=this.Pb(!0);c=0;for(var f;f=e[c];c++)f.dispose()}finally{y--,this.disposed=
!0}}};function Dd(a,b){if(a.u){var c=null;a.u.isConnected()&&(c=a.u.J,a.u.disconnect());if(c&&b){a:{b=null;for(var d=0;d<a.m.length;d++){var e=a.m[d].connection;if(e&&e.type==1&&e.J){if(b){a=null;break a}b=e}}a=b}a&&a.isConnected()&&!a.H().P&&(a=a.J,a.disconnect(),Oe(a,c,!1)==0?c.connect(a):a.jj(c))}}else a.A&&(c=null,a.A.isConnected()&&(c=a.A.J,a.A.disconnect()),d=xb(a),b&&d&&!d.P&&(a=a.D.J,a.disconnect(),c&&Oe(c,a,!1)==0&&c.connect(a)))}
g.Pb=function(){var a=[];this.u&&a.push(this.u);this.A&&a.push(this.A);this.D&&a.push(this.D);for(var b=0,c;c=this.m[b];b++)c.connection&&a.push(c.connection);return a};g.bh=function(a){for(var b=this.D;b;){var c=b.H();if(!c||a&&c.P)return b;b=c.D}return null};g.jb=function(){};g.getParent=function(){return this.oc};function Cd(a,b){for(var c=0,d;d=a.m[c];c++)if(d.connection&&d.connection.H()==b)return d;return null}
function Qg(a){do{var b=a;a=a.getParent();if(!a)return null}while(xb(a)==b);return a}function xb(a){return a.D&&a.D.H()}g.Qb=function(){var a=this;do{var b=a;a=b.oc}while(a);return b};function jc(a,b){if(!b)return a.wc;b=[];for(var c=0,d;d=a.m[c];c++)d.connection&&(d=d.connection.H())&&b.push(d);(a=xb(a))&&b.push(a);return b}
g.zh=function(a){if(a!=this.oc){if(this.oc){ub(this.oc.wc,this);if(this.A&&this.A.isConnected())throw Error("Still connected to previous block.");if(this.u&&this.u.isConnected())throw Error("Still connected to parent block.");this.oc=null}else this.i.wh(this);(this.oc=a)?a.wc.push(this):this.i.xg(this)}};function wb(a,b){var c=[a];a=jc(a,b);for(var d,e=0;d=a[e];e++)c.push.apply(c,wb(d,b));return c}function mc(a){return a.di&&!a.P&&!(a.i&&a.i.options.readOnly)}
g.Ma=function(){return this.ol&&!this.P&&!(this.i&&this.i.options.readOnly)};g.Aj=function(a){this.ol=a};g.Fj=function(a){this.P=a};g.Ab=function(){return this.xe};g.Rl=function(a){this.xe=a};g.yb=function(){return this.Ek&&!(this.i&&this.i.options.readOnly)};g.zj=function(a){this.Ek=a;a=0;for(var b;b=this.m[a];a++)for(var c=0,d;d=b.X[c];c++)yg(d)};
g.Di=function(a,b){var c=this.Pb(!0);a=a.Pb(!0);if(c.length!=a.length)throw Error("Connection lists did not match in length.");for(var d=0;d<a.length;d++)if(a[d]==b)return c[d];return null};g.$f=function(a){this.Wb=a};g.Ci=function(){return this.sb};g.Fe=function(a){this.sb=yb(a).zf};g.He=function(a){this.cg=a};
function zc(a,b){if(typeof b!=="string")throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(b===void 0?"nothing":b+" of type "+typeof b)+" instead");for(var c=0,d;d=a.m[c];c++)for(var e=0,f;f=d.X[e];e++)if(f.name===b)return f;return null}function Bc(a){for(var b=0,c;c=a.m[b];b++)for(var d=0;c.X[d];d++);return[]}function Xe(a,b){return(a=zc(a,b))?a.hb:null}function Rg(a,b){a=zc(a,"NAME");if(!a)throw Error('Field "NAME" not found.');wd(a,b)}
g.Ej=function(a,b){if(a){b===void 0&&(b=null);if(!this.A){if(this.u)throw Error("Remove output connection prior to adding previous connection.");this.A=this.Ff(4)}this.A.Vf(b)}else if(this.A){if(this.A.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.A.dispose();this.A=null}};
g.Bj=function(a,b){if(a)b===void 0&&(b=null),this.D||(this.D=this.Ff(3)),this.D.Vf(b);else if(this.D){if(this.D.isConnected())throw Error("Must disconnect next statement before removing connection.");this.D.dispose();this.D=null}};
g.Cj=function(a,b){if(a){b===void 0&&(b=null);if(!this.u){if(this.A)throw Error("Remove previous connection prior to adding output connection.");this.u=this.Ff(2)}this.u.Vf(b)}else if(this.u){if(this.u.isConnected())throw Error("Must disconnect output value before removing connection.");this.u.dispose();this.u=null}};g.Nd=function(a){this.Cc!=a&&(z(new (B("change"))(this,"inline",null,this.Cc,a)),this.Cc=a)};
function wf(a){if(a.Cc!=void 0)return a.Cc;for(var b=1;b<a.m.length;b++)if(a.m[b-1].type==5&&a.m[b].type==5)return!1;for(b=1;b<a.m.length;b++)if(a.m[b-1].type==1&&a.m[b].type==5)return!0;return!1}g.isEnabled=function(){return!this.disabled};g.Md=function(a){this.isEnabled()!=a&&(z(new (B("change"))(this,"disabled",null,this.disabled,!a)),this.disabled=!a)};function Sg(a){for(a=Qg(a);a;){if(a.disabled)return!0;a=Qg(a)}return!1}g.isCollapsed=function(){return this.md};
g.Kd=function(a){this.md!=a&&(z(new (B("change"))(this,"collapsed",null,this.md,a)),this.md=a)};
g.toString=function(a,b){function c(m){var n=m.ge;!n&&m.J&&(n=m.J.ge);return!!n&&(n.indexOf("Boolean")!=-1||n.indexOf("Number")!=-1)}function d(){h&&h.getType()==k.getType()&&h.L==k.L&&(h=null)}var e=[];b=b||"?";var f=kf;kf=!0;for(var h=of(this),k=h;h;){switch(h.getType()){case "input":var l=h.L;h.Vc()?c(l)&&e.push("("):e.push(b);break;case "field":l=h.L,l.name!="_TEMP_COLLAPSED_FIELD"&&e.push(Fg(l))}l=h;h=l.Vc()||l.next();if(!h){h=l.$c();for(d();h&&!h.next();)h=h.$c(),d(),h&&h.getType()=="input"&&
c(h.L)&&e.push(")");h&&(h=h.next())}}kf=f;for(b=2;b<e.length;b++)e[b-2]=="("&&e[b]==")"&&(e[b-2]=e[b-1],e.splice(b-1,2));e=e.reduce(function(m,n){return m+(m.substr(-1)=="("||n==")"?"":" ")+n},"");e=e.trim()||"???";a&&e.length>a&&(e=e.substring(0,a-3)+"...");return e};g.uc=function(a,b){var c=null;if(a==1||a==3)c=this.Ff(a);a=new Kg(a,b,this,c);this.m.push(a);return a};
g.uj=function(a,b){for(var c=0,d;d=this.m[c];c++)if(d.name==a)return d.dispose(),this.m.splice(c,1),!0;if(b)return!1;throw Error("Input not found: "+a);};function Ac(a,b){for(var c=0,d;d=a.m[c];c++)if(d.name==b)return d;return null}g.Ge=function(a){this.yc.text!=a&&(z(new (B("change"))(this,"comment",null,this.yc.text,a)),this.yc.text=a)};g.ba=function(){return this.km};g.moveBy=function(a,b){if(this.oc)throw Error("Block has parent.");var c=new (B("move"))(this);this.km.translate(a,b);Bd(c);z(c)};
g.Ff=function(a){return new Le(this,a)};function Tg(){this.Tb=[];this.Jd=this.Ga=this.kh=this.ih=this.hh=this.xc=this.jh=this.sd=this.lj=null}g=Tg.prototype;
g.U=function(a){var b=document.createElement("div");b.className="blocklyMenu goog-menu blocklyNonSelectable";b.tabIndex=0;this.Jd&&b.setAttribute("role",this.Jd);this.Ga=b;for(var c=0,d;d=this.Tb[c];c++)b.appendChild(d.Fa());this.jh=H(b,"mouseover",this,this.wn,!0);this.xc=H(b,"click",this,this.rn,!0);this.hh=H(b,"mouseenter",this,this.un,!0);this.ih=H(b,"mouseleave",this,this.vn,!0);this.kh=H(b,"keydown",this,this.sn);a.appendChild(b)};
g.focus=function(){var a=this.Ga;a&&(a.focus({preventScroll:!0}),E(a,"blocklyFocused"))};g.Xf=function(a){this.Jd=a};g.dispose=function(){this.jh&&(I(this.jh),this.jh=null);this.xc&&(I(this.xc),this.xc=null);this.hh&&(I(this.hh),this.hh=null);this.ih&&(I(this.ih),this.ih=null);this.kh&&(I(this.kh),this.kh=null);for(var a=0,b;b=this.Tb[a];a++)b.dispose();this.Ga=null};
function Ug(a,b){for(var c=a.Ga;b&&b!=c;){if(bc(b,"blocklyMenuItem"))for(var d=0,e;e=a.Tb[d];d++)if(e.Ga==b)return e;b=b.parentElement}return null}
g.Kc=function(a){var b=this.sd;b&&(b.Kc(!1),this.sd=null);if(a){a.Kc(!0);this.sd=a;b=this.Ga;var c=a.Ga,d=Wa(c),e=Wa(b);var f=Va(b,"borderLeftWidth");Va(b,"borderRightWidth");var h=Va(b,"borderTopWidth");Va(b,"borderBottomWidth");f=d.x-e.x-parseFloat(f);d=d.y-e.y-parseFloat(h);c=new Ta(c.offsetWidth,c.offsetHeight);e=b.clientHeight-c.height;h=b.scrollLeft;var k=b.scrollTop;h+=Math.min(f,Math.max(f-(b.clientWidth-c.width),0));k+=Math.min(d,Math.max(d-e,0));f=new w(h,k);b.scrollLeft=f.x;b.scrollTop=
f.y;Ke(b,"activedescendant",a.cb())}};function Vg(a,b,c){b+=c;for(var d;d=a.Tb[b];){if(d.isEnabled()){a.Kc(d);break}b+=c}}g.wn=function(a){(a=Ug(this,a.target))&&(a.isEnabled()?this.sd!=a&&this.Kc(a):this.Kc(null))};g.rn=function(a){var b=this.lj;this.lj=null;b&&typeof a.clientX=="number"&&Ka(b,new w(a.clientX,a.clientY))<1||(a=Ug(this,a.target))&&a.isEnabled()&&a.Xe&&a.Xe(a)};g.un=function(){this.focus()};g.vn=function(){if(this.Ga){var a=this.Ga;a&&(a.blur(),ac(a,"blocklyFocused"));this.Kc(null)}};
g.sn=function(a){if(this.Tb.length&&!(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)){var b=this.sd;switch(a.keyCode){case 13:case 32:b&&b.isEnabled()&&b.Xe&&b.Xe(b);break;case 38:b=this.Tb.indexOf(this.sd);Vg(this,b<0?this.Tb.length:b,-1);break;case 40:Vg(this,this.Tb.indexOf(this.sd),1);break;case 33:case 36:Vg(this,-1,1);break;case 34:case 35:Vg(this,this.Tb.length,-1);break;default:return}a.preventDefault();a.stopPropagation()}};
g.getSize=function(){var a=this.Ga,b=Ua(a);b.height=a.scrollHeight;return b};var Wg=0;function Xg(a,b){this.bi=a;this.hb=b;this.Og=!0;this.Ga=null;this.yj=!1;this.Jd=null;this.Tk=this.Yh=this.Xh=!1;this.Xe=null}g=Xg.prototype;
g.Fa=function(){var a=document.createElement("div");a.id="blockly-"+(Wg++).toString(36);this.Ga=a;a.className="blocklyMenuItem goog-menuitem "+(this.Og?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.Yh?"blocklyMenuItemSelected goog-option-selected ":"")+(this.Tk?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.yj?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var b=document.createElement("div");b.className="blocklyMenuItemContent goog-menuitem-content";if(this.Xh){var c=document.createElement("div");
c.className="blocklyMenuItemCheckbox goog-menuitem-checkbox";b.appendChild(c)}c=this.bi;typeof this.bi=="string"&&(c=document.createTextNode(this.bi));b.appendChild(c);a.appendChild(b);this.Jd&&a.setAttribute("role",this.Jd);Ke(a,"selected",this.Xh&&this.Yh||!1);Ke(a,"disabled",!this.Og);return a};g.dispose=function(){this.Ga=null};g.cb=function(){return this.Ga.id};g.Xf=function(a){this.Jd=a};
g.Kc=function(a){this.Tk=a;var b=this.Ga;b&&this.isEnabled()&&(a?(E(b,"blocklyMenuItemHighlight"),E(b,"goog-menuitem-highlight")):(ac(b,"blocklyMenuItemHighlight"),ac(b,"goog-menuitem-highlight")))};g.isEnabled=function(){return this.Og};g.Md=function(a){this.Og=a};function Yg(a,b,c){a.Xe=b.bind(c)};var S={Hg:null,Za:null,show:function(a,b,c){ug(c);if(b.length){var d=S.Wn(b,c);S.Za=d;S.Xn(d,a,c);setTimeout(function(){d.focus()},1);S.Hg=null}else S.Bc()},Wn:function(a,b){var c=new Tg;c.Xf("menu");for(var d=0,e;e=a[d];d++){var f=new Xg(e.text);f.yj=b;f.Xf("menuitem");c.Tb.push(f);f.Md(e.enabled);e.enabled&&Yg(f,function(){S.Bc();this.ga(this.scope)},e)}return c},Xn:function(a,b,c){var d=document.body;var e=document.documentElement;d=new w(d.scrollLeft||e.scrollLeft,d.scrollTop||e.scrollTop);d=
new Na(d.y,document.documentElement.clientHeight+d.y,d.x,document.documentElement.clientWidth+d.x);var f=new Na(b.clientY+d.top,b.clientY+d.top,b.clientX+d.left,b.clientX+d.left);S.fn(a);b=a.getSize();c&&(f.left+=b.width,f.right+=b.width,d.left+=b.width,d.right+=b.width);e=f.bottom+b.height>=d.bottom?f.top-b.height:f.bottom;c?(c=Math.max(f.right-b.width,d.left),c=Math.min(c,d.right-b.width)):(c=Math.min(f.left,d.right-b.width),c=Math.max(c,d.left));e<0?wg(c,0,b.height+e):wg(c,e,b.height);a.focus()},
fn:function(a){a.U(pg);var b=a.Ga;E(b,"blocklyContextMenu");H(b,"contextmenu",null,hb);a.focus()},Bc:function(){qg==S&&vg();S.Hg=null},dispose:function(){S.Za&&(S.Za.dispose(),S.Za=null)},Eo:function(a,b){return function(){y++;try{var c=qc(b,a.i),d=a.ba();d.x=a.o?d.x-na:d.x+na;d.y+=na*2;c.moveBy(d.x,d.y)}finally{y--}y==0&&!c.P&&z(new (B("create"))(c));c.select()}}};function Zg(){$g=this;this.Db=Object.create(null)}var $g=null;Zg.prototype.register=function(a){if(this.Db[a.id])throw Error('Menu item with ID "'+a.id+'" is already registered.');this.Db[a.id]=a};Zg.prototype.unregister=function(a){if(!this.Db[a])throw Error('Menu item with ID "'+a+'" not found.');delete this.Db[a]};Zg.prototype.getItem=function(a){return this.Db[a]||null};
function ah(a,b){var c=[],d=$g.Db;Object.keys(d).forEach(function(e){e=d[e];if(a==e.ob){var f=e.qa(b);f!="hidden"&&(e={text:typeof e.Wa=="function"?e.Wa(b):e.Wa,enabled:f=="enabled",ga:e.ga,scope:b,weight:e.weight},c.push(e))}});c.sort(function(e,f){return e.weight-f.weight});return c}new Zg;function bh(a,b,c){bh.h.constructor.call(this,c);this.ul=a;this.rl=b}K(bh,Fd);bh.prototype.type="selected";bh.prototype.S=function(){var a=bh.h.S.call(this);a.oldElementId=this.ul;a.newElementId=this.rl;return a};bh.prototype.K=function(a){bh.h.K.call(this,a);this.ul=a.oldElementId;this.rl=a.newElementId};q(p,"selected",bh);function ch(a,b){ch.h.constructor.call(this,a,b);this.me=a.i.Gg[b];this.xk=a.i.Gg[qa[b]];this.Hd=new w(0,0);this.Mc=dh;this.J=null}K(ch,Le);var dh=-1;g=ch.prototype;g.dispose=function(){ch.h.dispose.call(this);this.Mc==1&&eh(this.me,this,this.y)};g.v=function(){return ch.h.v.call(this)};g.H=function(){return ch.h.H.call(this)};function Re(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}
function fh(a,b){if(!a.l.i.xb()){var c=a.l.Qb();if(!c.zb){var d=!1;if(!c.Ma()){c=b.v().Qb();if(!c.Ma())return;b=a;d=!0}var e=P==c;e||gh(c.ea,!0);var f=b.x+na+Math.floor(Math.random()*10)-a.x,h=b.y+na+Math.floor(Math.random()*10)-a.y;d&&(h=-h);c.o&&(f=b.x-na-Math.floor(Math.random()*10)-a.x);c.moveBy(f,h);e||gh(c.ea,!1)}}}
g.moveTo=function(a,b){if(this.Mc==dh){var c=this.me;c.pa.splice(hh(c,b),0,this);this.Mc=1}else this.Mc==1&&(eh(this.me,this,this.y),c=this.me,c.pa.splice(hh(c,b),0,this));this.x=a;this.y=b};g.moveBy=function(a,b){this.moveTo(this.x+a,this.y+b)};function ih(a,b){a.moveTo(b.x+a.Hd.x,b.y+a.Hd.y)}function jh(a,b,c){a.Hd.x=b;a.Hd.y=c}
function kh(a){var b=a.J.x-a.x,c=a.J.y-a.y;if(b!=0||c!=0){a=a.H();var d=a.O();if(!d)throw Error("block is not rendered.");d=jb(d);a.O().setAttribute("transform","translate("+(d.x-b)+","+(d.y-c)+")");Sf(a,-b,-c)}}
g.closest=function(a,b){var c=this.xk;if(c.pa.length){var d=this.y,e=this.x;this.x=e+b.x;this.y=d+b.y;var f=hh(c,this.y);b=null;for(var h=a,k,l=f-1;l>=0&&Math.abs(c.pa[l].y-this.y)<=a;)k=c.pa[l],Oe(this,k,!0,h)==0&&(b=k,h=Re(k,this)),l--;for(;f<c.pa.length&&Math.abs(c.pa[f].y-this.y)<=a;)k=c.pa[f],Oe(this,k,!0,h)==0&&(b=k,h=Re(k,this)),f++;this.x=e;this.y=d;a={connection:b,sh:h}}else a={connection:null,sh:a};return a};
function Og(a,b){b&&a.Mc==1||!b&&a.Mc==0||a.l.zb||(b?(b=a.me,b.pa.splice(hh(b,a.y),0,a),a.Mc=1):(a.Mc==1&&eh(a.me,a,a.y),a.Mc=0))}function Ng(a){Og(a,!0);var b=[];if(a.type!=1&&a.type!=3)return b;if(a=a.H()){if(a.isCollapsed()){var c=[];a.u&&c.push(a.u);a.D&&c.push(a.D);a.A&&c.push(a.A)}else c=a.Pb(!0);for(var d=0;d<c.length;d++)b.push.apply(b,Ng(c[d]));b.length||(b[0]=a)}return b}
g.jj=function(a){var b=this.v();if(zb){var c=x;setTimeout(function(){b.disposed||b.getParent()||(A(c),fh(this,a),A(!1))}.bind(this),250)}};g.ji=function(a,b){ch.h.ji.call(this,a,b);a.I&&a.U();b.I&&(uc(b),b.U(),b.O().style.display="block")};g.Tf=function(){ch.h.Tf.call(this);var a=this.H();a&&(a.ue(),a.U(!1),a=this.v(),a.I&&a.U())};g.ql=function(a){return lh(this.xk,this,a)};
g.Eg=function(a){ch.h.Eg.call(this,a);var b=this.v();a=a.v();var c=b.I,d=a.I;c&&uc(b);d&&uc(a);c&&d&&(this.type==3||this.type==4?a.U():b.U());if(b=Cd(b,a))b=b.isVisible(),a.O().style.display=b?"block":"none"};g.Al=function(){!this.isConnected()||this.J&&Oe(this,this.J,!1)==0||(Dd(Ne(this)?this.H():this.l),this.l.jb())};function mh(){mh.h.constructor.call(this)}K(mh,ng);g=mh.prototype;g.next=function(){var a=this.Lb;if(!a)return null;(a=nh(this,a,this.dm))&&mg(this,a);return a};g.Vc=function(){return this.next()};g.cd=function(){var a=this.Lb;if(!a)return null;(a=oh(this,a,this.dm))&&mg(this,a);return a};g.$c=function(){return this.cd()};function nh(a,b,c){if(!b)return null;var d=b.Vc()||b.next();if(c(d))return d;if(d)return nh(a,d,c);b=ph(a,b.$c());return c(b)?b:b?nh(a,b,c):null}
function oh(a,b,c){if(!b)return null;var d=b.cd();d=d?qh(a,d):b.$c();return c(d)?d:d?oh(a,d,c):null}g.dm=function(a){var b=!1;a=a&&a.getType();if(a=="output"||a=="input"||a=="field"||a=="next"||a=="previous"||a=="workspace")b=!0;return b};function ph(a,b){if(!b)return null;var c=b.next();return c?c:ph(a,b.$c())}function qh(a,b){if(!b.Vc())return b;for(b=b.Vc();b.next();)b=b.next();return qh(a,b)}q(ua,"basicCursor",mh);function T(a,b,c){this.G=D(Ob,{},null);this.G.lg="";this.style=rh(a.ma.C(),null);this.ea=a.ma.jl(this.G,this.style);this.vj=this.I=!1;this.i=a;this.A=this.D=this.u=null;this.og=sb()&&!!a.ib;var d=this.ea.wa;d.Wb=this;De(d);T.h.constructor.call(this,a,b,c);this.G.dataset?this.G.dataset.id=this.id:Xa&&this.G.setAttribute("data-id",this.id)}K(T,bf);g=T.prototype;g.height=0;g.width=0;g.Jh=null;
g.ue=function(){if(!this.i.I)throw TypeError("Workspace is headless.");for(var a=0,b;b=this.m[a];a++)b.init();b=Mf(this);for(a=0;a<b.length;a++)b[a].Lo();this.Ea();Jf(this.ea,"blocklyDraggable",this.Ma());a=this.O();this.i.options.readOnly||this.mn||!a||H(a,"mousedown",this,this.Mf);this.mn=!0;a.parentNode||this.i.Ba.appendChild(a)};
g.select=function(){if(this.P&&this.getParent())this.getParent().select();else if(P!=this){var a=null;if(P){a=P.id;y++;try{dg(P)}finally{y--}}a=new (B("selected"))(a,this.id,this.i.id);z(a);P=this;gh(this.ea,!0)}};function dg(a){if(P==a){var b=new (B("selected"))(a.id,null,a.i.id);b.$a=a.i.id;z(b);P=null;gh(a.ea,!1)}}g.Ed=null;g.Kb=null;g.hm=null;function Mf(a){var b=[];a.Ed&&b.push(a.Ed);a.Kb&&b.push(a.Kb);a.hm&&b.push(a.hm);return b}
g.zh=function(a){var b=this.oc;if(a!=b){ec();T.h.zh.call(this,a);fc();var c=this.O();if(!this.i.Qi&&c){var d=this.ba();a?(a.O().appendChild(c),a=this.ba(),Sf(this,a.x-d.x,a.y-d.y)):b&&(this.i.Ba.appendChild(c),this.translate(d.x,d.y));this.Ea()}}};g.ba=function(){var a=0,b=0,c=this.og?this.i.ib.ec:null,d=this.O();if(d){do{var e=jb(d);a+=e.x;b+=e.y;this.og&&this.i.ib.ec.firstChild==d&&(e=this.i.ib.Ei(),a+=e.x,b+=e.y);d=d.parentNode}while(d&&d!=this.i.Ba&&d!=c)}return new w(a,b)};
g.moveBy=function(a,b){if(this.oc)throw Error("Block has parent.");var c=y==0;if(c)var d=new (B("move"))(this);var e=this.ba();this.translate(e.x+a,e.y+b);Sf(this,a,b);c&&(Bd(d),z(d));vc(this.i)};g.translate=function(a,b){this.O().setAttribute("transform","translate("+a+","+b+")")};g.moveTo=function(a){var b=this.ba();this.moveBy(a.x-b.x,a.y-b.y)};function Pf(a,b){a.og?a.i.ib.Le(b.x,b.y):(a.G.lg="translate("+b.x+","+b.y+")",a.G.setAttribute("transform",a.G.lg+a.G.ag))}
function sh(a){if(a.i&&!a.i.xb()&&!a.getParent()&&!a.zb){var b=a.i.wb;if(b&&b.co){var c=b.Hj,d=c/2,e=a.ba();b=Math.round((e.x-d)/c)*c+d-e.x;c=Math.round((e.y-d)/c)*c+d-e.y;b=Math.round(b);c=Math.round(c);b==0&&c==0||a.moveBy(b,c)}}}function th(a){var b=a.ba(),c=Of(a);if(a.o){a=b.x-c.width;var d=b.x}else a=b.x,d=b.x+c.width;return new Na(b.y,b.y+c.height,a,d)}g.Gf=function(){this.ea.df=this.i.ma.C();for(var a=0,b;b=this.m[a];a++)b.Gf()};
g.Kd=function(a){this.md!=a&&(T.h.Kd.call(this,a),a?this.I&&this.U():uh(this))};function uh(a){for(var b=a.isCollapsed(),c=0,d;d=a.m[c];c++)d.name!="_TEMP_COLLAPSED_INPUT"&&d.Ia(!b);if(b){d=Mf(a);for(c=0;b=d[c];c++)b.Ia(!1);c=a.toString(30);(d=zc(a,"_TEMP_COLLAPSED_FIELD"))?wd(d,c):(d=Ac(a,"_TEMP_COLLAPSED_INPUT")||a.uc(5,"_TEMP_COLLAPSED_INPUT"),Lg(d,new Jg(c),"_TEMP_COLLAPSED_FIELD"))}else uc(a),a.uj("_TEMP_COLLAPSED_INPUT")}
g.Mf=function(a){var b=this.i&&Ig(this.i,a);if(b){if(b.yf)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");b.Ie||b.Vb||(b.Ie=this,this.zb&&this!=this.Qb()?jg(b,this.Qb()):jg(b,this));b.Ub=a}};g.showHelp=function(){var a=typeof this.Rb=="function"?this.Rb():this.Rb;a&&window.open(a)};g.Bh=function(a){if(this.i.options.readOnly||!this.contextMenu)var b=null;else b=ah("block",{block:this}),this.gn&&this.gn(b);b&&b.length&&(S.show(a,b,this.o),S.Hg=this)};
function Sf(a,b,c){if(a.I){for(var d=a.Pb(!1),e=0;e<d.length;e++)d[e].moveBy(b,c);d=Mf(a);for(e=0;e<d.length;e++)d[e].an();for(e=0;e<a.wc.length;e++)Sf(a.wc[e],b,c)}}g.Ld=function(a){if(a){var b=this.O();b.lg="";b.ag="";Se=Se.concat(this.Pb(!0));E(this.G,"blocklyDragging")}else Se=[],ac(this.G,"blocklyDragging");for(b=0;b<this.wc.length;b++)this.wc[b].Ld(a)};g.Aj=function(a){T.h.Aj.call(this,a);Jf(this.ea,"blocklyDraggable",a)};g.zj=function(a){T.h.zj.call(this,a);a=Mf(this);for(var b=0;b<a.length;b++)yg(a[b])};
g.Fj=function(a){T.h.Fj.call(this,a);this.Ea()};g.Rl=function(a){this.xe!=a&&(this.xe=a)&&(this.Fe(this.i.ma.C().Em),Jf(this.ea,"blocklyInsertionMarker",!0))};g.O=function(){return this.G};
g.dispose=function(a,b){if(this.i){Be=Ae=null;Ie();He(this.ea.wa);ec();var c=this.i;P==this&&(dg(this),vh(this.i));S.Hg==this&&S.Bc();if(b&&this.I){Dd(this,a);b=this.i;var d=this.O();b.ac.play("delete");var e=Tf(b,d);d=d.cloneNode(!0);d.qo=e.x;d.so=e.y;d.setAttribute("transform","translate("+e.x+","+e.y+")");L(b).appendChild(d);d.kk=d.getBBox();zf(d,b.o,new Date,b.scale)}this.I=!1;if(this.Jh){for(var f in this.Jh)clearTimeout(this.Jh[f]);this.Jh=null}f=Mf(this);for(b=0;b<f.length;b++)f[b].dispose();
T.h.dispose.call(this,!!a);F(this.G);vc(c);this.G=null;fc()}};g.Ea=function(){this.ea.Ea(this);for(var a=Mf(this),b=0;b<a.length;b++)a[b].Ea();for(a=0;b=this.m[a];a++)for(var c=0,d;d=b.X[c];c++)d.Ea()};function uc(a){var b=jc(a,!1);a.Ea();if(!a.isCollapsed()){a=0;for(var c;c=b[a];a++)c.I&&uc(c)}}g.on=function(){return this.Kb};
g.Ge=function(a){if(!ka.Comment)throw Error("Missing require for Blockly.Comment");this.yc.text!=a&&(T.h.Ge.call(this,a),a=a!=null,!!this.Kb==a?this.Kb.kp():(a?this.Kb=new ka.Comment(this):(this.Kb.dispose(),this.Kb=null),this.I&&(this.U(),this.jb())))};g.Md=function(a){this.isEnabled()!=a&&(T.h.Md.call(this,a),this.I&&!Sg(this)&&uc(this))};g.Kc=function(a){this.I&&this.ea.Zl(a)};g.Ci=function(){return this.style.nd};
g.Fe=function(a){T.h.Fe.call(this,a);a=wh(this.i.ma.C(),this.sb);this.ea.He(a.style);this.style=a.style;this.cg=a.name;this.Ea()};g.He=function(a){var b=rh(this.i.ma.C(),a);this.cg=a;if(b)this.rd=b.rd,this.ea.He(b),this.sb=b.nd,this.style=b,this.Ea();else throw Error("Invalid style name: "+a);};function Nf(a){do{var b=a.O(),c=b.parentNode,d=c.childNodes;d[d.length-1]!==b&&c.appendChild(b);a=a.getParent()}while(a)}g.Ej=function(a,b){T.h.Ej.call(this,a,b);this.I&&(this.U(),this.jb())};
g.Bj=function(a,b){T.h.Bj.call(this,a,b);this.I&&(this.U(),this.jb())};g.Cj=function(a,b){T.h.Cj.call(this,a,b);this.I&&(this.U(),this.jb())};g.Nd=function(a){T.h.Nd.call(this,a);this.I&&(this.U(),this.jb())};g.uj=function(a,b){a=T.h.uj.call(this,a,b);this.I&&(this.U(),this.jb());return a};g.uc=function(a,b){a=T.h.uc.call(this,a,b);this.I&&(this.U(),this.jb());return a};
function tc(a,b){a.A&&Og(a.A,b);a.u&&Og(a.u,b);if(a.D){Og(a.D,b);var c=a.D.H();c&&tc(c,b)}if(!a.md)for(c=0;c<a.m.length;c++){var d=a.m[c].connection;d&&(Og(d,b),(d=d.H())&&tc(d,b))}}g.Pb=function(a){var b=[];if(a||this.I)if(this.u&&b.push(this.u),this.A&&b.push(this.A),this.D&&b.push(this.D),a||!this.md){a=0;for(var c;c=this.m[a];a++)c.connection&&b.push(c.connection)}return b};g.bh=function(a){return T.h.bh.call(this,a)};g.Di=function(a,b){return T.h.Di.call(this,a,b)};
g.Ff=function(a){return new ch(this,a)};g.jb=function(){if(this.i&&!this.i.xb()){var a=this.Qb();if(!a.zb)for(var b=this.Pb(!1),c=0,d;d=b[c];c++){d.isConnected()&&Ne(d)&&d.H().jb();for(var e=d.ql(na),f=0,h;h=e[f];f++)d.isConnected()&&h.isConnected()||h.v().Qb()!=a&&(Ne(d)?fh(h,d):fh(d,h))}}};function Uf(a){var b=x;setTimeout(function(){A(b);sh(a);A(!1)},125);setTimeout(function(){A(b);a.jb();A(!1)},250)}g.getParent=function(){return T.h.getParent.call(this)};g.Qb=function(){return T.h.Qb.call(this)};
g.U=function(a){if(!this.vj){this.vj=!0;try{this.I=!0;ec();this.isCollapsed()&&uh(this);this.i.ma.U(this);var b=this.ba();this.A&&ih(this.A,b);this.u&&ih(this.u,b);for(var c=0;c<this.m.length;c++){var d=this.m[c].connection;d&&(ih(d,b),d.isConnected()&&kh(d))}this.D&&(ih(this.D,b),this.D.isConnected()&&kh(this.D));if(a!==!1){var e=this.getParent();e?e.U(!0):vc(this.i)}fc();this.Oj()}finally{this.vj=!1}}};g.Oj=function(){this.i.Ef&&this.ea.hf&&this.i.tf().Mb();this.i.Ef&&this.ea.$i&&this.i.vf("local_marker_1").Mb()};
g.Jc=function(a){this.ea.Jc(a)};g.ed=function(a){this.ea.ed(a)};function Of(a){var b=a.height,c=a.width,d=xb(a);d&&(d=Of(d),a=a.i.ma.C().Mh,b+=d.height-a,c=Math.max(c,d.width));return{height:b,width:c}};function xh(){this.pa=[]}function yh(a,b,c){if(!a.pa.length)return-1;var d=hh(a,c);if(d>=a.pa.length)return-1;c=b.y;for(var e=d;e>=0&&a.pa[e].y==c;){if(a.pa[e]==b)return e;e--}for(e=d;e<a.pa.length&&a.pa[e].y==c;){if(a.pa[e]==b)return e;e++}return-1}function hh(a,b){if(!a.pa.length)return 0;for(var c=0,d=a.pa.length;c<d;){var e=Math.floor((c+d)/2);if(a.pa[e].y<b)c=e+1;else if(a.pa[e].y>b)d=e;else{c=e;break}}return c}
function eh(a,b,c){b=yh(a,b,c);if(b==-1)throw Error("Unable to find connection in connectionDB.");a.pa.splice(b,1)}function lh(a,b,c){function d(m){var n=f-e[m].x,u=h-e[m].y;Math.sqrt(n*n+u*u)<=c&&l.push(e[m]);return u<c}var e=a.pa,f=b.x,h=b.y;a=0;for(var k=b=e.length-2;a<k;)e[k].y<h?a=k:b=k,k=Math.floor((a+b)/2);var l=[];b=a=k;if(e.length){for(;a>=0&&d(a);)a--;do b++;while(b<e.length&&d(b))}return l};function zh(a,b){zh.h.constructor.call(this,b);this.Vl=a}K(zh,Fd);zh.prototype.type="theme_change";zh.prototype.S=function(){var a=zh.h.S.call(this);a.themeName=this.Vl;return a};zh.prototype.K=function(a){zh.h.K.call(this,a);this.Vl=a.themeName};q(p,"theme_change",zh);function Ah(a,b,c,d,e){Ah.h.constructor.call(this,d);this.Ib=a;this.Hb=b;this.scale=c;this.Lf=e}K(Ah,Fd);Ah.prototype.type="viewport_change";Ah.prototype.S=function(){var a=Ah.h.S.call(this);a.viewTop=this.Ib;a.viewLeft=this.Hb;a.scale=this.scale;a.oldScale=this.Lf;return a};Ah.prototype.K=function(a){Ah.h.K.call(this,a);this.Ib=a.viewTop;this.Hb=a.viewLeft;this.scale=a.scale;this.Lf=a.oldScale};q(p,"viewport_change",Ah);function Bh(a){this.j=a}function Ch(a){var b=0,c=0;a&&(b=a.Sg(),c=a.Qo());return new Ta(b,c)}function Dh(a){var b=Ch(Eh(a.j,!0));return{width:b.width,height:b.height,position:a.j.Qd}}function Fh(a){var b=Ch(a.j.ka);return{width:b.width,height:b.height,position:a.j.Qd}}function Gh(a){var b=0,c=Fh(a),d=Dh(a),e=!!a.j.ka;a=!!Eh(a.j,!0);var f=(e?c.position:d.position)==2;e&&f?b=c.width:a&&f&&(b=d.width);return{top:0,left:b}}
function Hh(a,b){b=b?a.j.scale:1;var c=Ih(a.j),d=Fh(a),e=Dh(a),f=a.j.ka?d.position:e.position;if(a.j.ka){if(f==2||f==3)c.width-=d.width}else!Eh(a.j,!0)||f!=2&&f!=3||(c.width-=e.width);return{height:c.height/b,width:c.width/b,top:-a.j.scrollY/b,left:-a.j.scrollX/b}}
function Jh(a){var b=a.j.scale;a=[].concat(a.j.jg);if(a.length){for(var c=th(a[0]),d=1;d<a.length;d++){var e=a[d];e.Ab&&e.Ab()||(e=th(e),e.top<c.top&&(c.top=e.top),e.bottom>c.bottom&&(c.bottom=e.bottom),e.left<c.left&&(c.left=e.left),e.right>c.right&&(c.right=e.right))}a=c}else a=new Na(0,0,0,0);return{height:(a.bottom-a.top)*b,width:(a.right-a.left)*b,top:a.top*b,left:a.left*b}}
function Wf(a,b,c,d){b=b?a.j.scale:1;c=c||Hh(a,!1);d=d||Jh(a);if(bg(a.j)&&cg(a.j))a={};else{var e=bg(a.j),f=cg(a.j);a=c||Hh(a,!1);var h={};f||(h.top=a.top,h.bottom=a.top+a.height);e||(h.left=a.left,h.right=a.left+a.width);a=h}h=d.top+d.height;e=d.left+d.width;f=c.width;var k=c.height;var l=f/2,m=k/2;c=Math.min(d.top-m,h-k);h=Math.max(h+m,d.top+k);k=Math.min(d.left-l,e-f);d=Math.max(e+l,d.left+f);c=a.top!==void 0?a.top:c;e=a.left!==void 0?a.left:k;return{top:c/b,left:e/b,width:((a.right!==void 0?a.right:
d)-e)/b,height:((a.bottom!==void 0?a.bottom:h)-c)/b}}Bh.prototype.hc=function(){var a=Fh(this),b=Dh(this),c=Ih(this.j),d=Gh(this),e=Hh(this),f=Jh(this),h=Wf(this,!1,e,f);return{Ho:f.height,Ko:f.width,Jo:f.top,Io:f.left,scrollHeight:h.height,scrollWidth:h.width,scrollTop:h.top,scrollLeft:h.left,Ra:e.height,Ka:e.width,Ib:e.top,Hb:e.left,ab:d.top,Ta:d.left,cp:c.height,ep:c.width,ip:a.width,gp:a.height,Qd:a.position,Oo:b.width,No:b.height}};q(Aa,"default",Bh);function Kh(a){var b=Sd;this.j=a;this.gg=b;this.dg=[];this.Pc=Object.create(null)}g=Kh.prototype;g.Ac=function(){return this.gg};g.Zf=function(a){var b=this.gg;this.gg=a;if(a=Lh(this.j))b&&ac(a,b.Ob()),E(a,this.gg.Ob());for(b=0;a=this.dg[b];b++)Mh(a);M()};g.subscribe=function(a,b,c){this.Pc[b]||(this.Pc[b]=[]);this.Pc[b].push({element:a,propertyName:c});a.style[c]=""};
g.unsubscribe=function(a){if(a)for(var b=Object.keys(this.Pc),c=0,d;d=b[c];c++){for(var e=this.Pc[d],f=e.length-1;f>=0;f--)e[f].element===a&&e.splice(f,1);this.Pc[d].length||delete this.Pc[d]}};g.dispose=function(){this.Pc=this.dg=this.gg=null};function Nh(a,b){Nh.h.constructor.call(this,a,b);this.Zg=!1;this.kb=Object.create(null);this.Sl=this.Qf=0;this.Zk=this.kj=null}K(Nh,eg);g=Nh.prototype;g.ki=function(a){this.Zk=this.ra.options.la&&this.ra.options.la.Hl;Nh.h.ki.call(this,a);!this.Yg&&Mc(a)&&Oh(this,a)};g.lk=function(a){this.kj=H(document,"mousedown",null,this.xn.bind(this),!0);this.mh=H(document,"mousemove",null,this.se.bind(this),!0);this.nh=H(document,"mouseup",null,this.Tg.bind(this),!0);a.preventDefault();a.stopPropagation()};
g.xn=function(a){!this.xb()&&Mc(a)&&(Oh(this,a),this.Zg&&Hc())};g.se=function(a){if(this.xb())Lc(a)&&!Kc(a)||Nh.h.se.call(this,a);else if(this.Zg){if(Mc(a)){this.kb[Jc(a)]=Ph(this,a);var b=Object.keys(this.kb);if(this.Zk&&b.length===2){b=Object.keys(this.kb);b=Ka(this.kb[b[0]],this.kb[b[1]])/this.Sl;if(this.Qf>0&&this.Qf<Infinity){var c=b-this.Qf;c=c>0?c*5:c*6;var d=this.ra,e=nb(a,L(d),re(d));d.zoom(e.x,e.y,c)}this.Qf=b;a.preventDefault()}else Nh.h.se.call(this,a)}Hc()}else Nh.h.se.call(this,a)};
g.Tg=function(a){if(Mc(a)&&!this.xb()){var b=Jc(a);this.kb[b]&&delete this.kb[b];Object.keys(this.kb).length<2&&(this.kb=Object.create(null),this.Qf=0)}!this.Zg||this.xb()?Lc(a)&&!Kc(a)||Nh.h.Tg.call(this,a):(a.preventDefault(),a.stopPropagation(),this.dispose())};g.dispose=function(){Nh.h.dispose.call(this);this.kj&&I(this.kj)};function Oh(a,b){a.kb[Jc(b)]=Ph(a,b);var c=Object.keys(a.kb);c.length==2&&(a.Sl=Ka(a.kb[c[0]],a.kb[c[1]]),a.Zg=!0,b.preventDefault())}
function Ph(a,b){return a.ra?new w(b.changedTouches?b.changedTouches[0].pageX:b.pageX,b.changedTouches?b.changedTouches[0].pageY:b.pageY):null};function Qh(a){this.oj=a;this.Ve=Object.create(null)}g=Qh.prototype;g.Ti=null;g.dispose=function(){this.Ve=this.oj=null};g.load=function(a,b){if(a.length){try{var c=new r.Audio}catch(k){return}for(var d,e=0;e<a.length;e++){var f=a[e],h=f.match(/\.(\w+)$/);if(h&&c.canPlayType("audio/"+h[1])){d=new r.Audio(f);break}}d&&d.play&&(this.Ve[b]=d)}};g.preload=function(){for(var a in this.Ve){var b=this.Ve[a];b.volume=.01;var c=b.play();c!==void 0?c.then(b.pause).catch(function(){}):b.pause();if(bb||db)break}};
g.play=function(a,b){var c=this.Ve[a];c?(a=new Date,this.Ti!=null&&a-this.Ti<100||(this.Ti=a,c=bb||ab?c:c.cloneNode(),c.volume=b===void 0?1:b,c.play())):this.oj&&this.oj.ac.play(a,b)};function Rh(a,b,c){Rh.h.constructor.call(this,a);this.Ae=new (Da(Aa,a,!0))(this);this.hc=a.hc||this.Ae.hc.bind(this.Ae);this.yh=a.yh||Sh;this.$e=new Pc;var d=[];d[1]=new xh;d[2]=new xh;d[3]=new xh;d[4]=new xh;this.Gg=d;b&&(this.ib=b);c&&(this.Ud=c);this.Ih=!!this.Ud&&sb();this.ac=new Qh(a.fb);this.wb=this.options.Hi?new Pd(this.options.Hi,a.Mk):null;this.Sb=new og(this);this.Wl=Object.create(null);this.Hk=Object.create(null);Th&&Uh&&Vh(this,"VARIABLE",Uh);Wh&&Xh&&(Vh(this,"PROCEDURE",Xh),this.Ec.push(Yh));
this.gb=this.options.fb?this.options.fb.gb:new Kh(this);this.gb.dg.push(this);c=this.options.Pl||"geras";a=this.Ac();b=this.options.Ql;c=new (Ca(wa,c))(c);c.init(a,b);this.ma=c;this.Wh=null;this.Ef=!1;this.jg=[];this.li=[];this.Vh=new Ta(0,0)}K(Rh,rc);g=Rh.prototype;g.xh=null;g.I=!0;g.Df=!0;g.yd=!1;g.$g=!1;g.xj=!0;g.scrollX=0;g.scrollY=0;g.scale=1;g.hj=1;g.zl=0;g.wl=0;g.Me=null;g.va=null;g.N=null;g.ka=null;g.La=null;g.ib=null;g.Ud=null;g.Ih=!1;g.Xg=!1;g.Oi=null;g.dl=null;g.Lj=null;g.Yk=null;
g.Pi=!0;g.Jc=function(a){this.Sb.Jc(a)};g.ed=function(a){this.Sb.ed(a)};g.vf=function(a){return this.Sb?this.Sb.vf(a):null};g.tf=function(){return this.Sb?this.Sb.tf():null};g.Ac=function(){return this.gb.Ac()};g.Zf=function(a){a||(a=Sd);this.gb.Zf(a)};function Mh(a){a.G&&a.ma.tj(a.G,a.Ac());Zh(Ue(a).filter(function(b){return!!b.cg}));$h(a);a.ka&&Mh(a.ka);a.isVisible()&&a.Ia(!0);a=new (B("theme_change"))(a.Ac().name,a.id);z(a)}
function Zh(a){for(var b=0,c;c=a[b];b++){var d=c.cg;d&&(c.He(d),c.Ed&&c.Ed.jp())}}function re(a){if(a.Pi){var b=L(a).getScreenCTM();b&&(a.Yk=b.inverse(),a.Pi=!1)}return a.Yk}g.ng=function(){this.Pi=!0};g.isVisible=function(){return this.Df};function Tf(a,b){var c=0,d=0,e=1;if(a.Ba.contains(b)||a.gd.contains(b))e=a.scale;do{var f=jb(b);if(b==a.Ba||b==a.gd)e=1;c+=f.x*e;d+=f.y*e;b=b.parentNode}while(b&&b!=L(a));return new w(c,d)}function Ih(a){a=a.Vh;return new Ta(a.width,a.height)}
function Lh(a){if(!a.Oi)for(var b=a.G;b;){if((" "+(b.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!=-1){a.Oi=b;break}b=b.parentNode}return a.Oi}
g.Fa=function(a){this.G=D(Ob,{"class":"blocklyWorkspace"},null);a&&(this.Lc=D(Tb,{height:"100%",width:"100%","class":a},this.G),a=="blocklyMainBackground"&&this.wb?this.Lc.style.fill="url(#"+this.wb.re.id+")":this.gb.subscribe(this.Lc,"workspaceBackgroundColour","fill"));this.Ba=D(Ob,{"class":"blocklyBlockCanvas"},this.G);this.gd=D(Ob,{"class":"blocklyBubbleCanvas"},this.G);this.yd||(H(this.G,"mousedown",this,this.Mf,!1,!0),H(this.G,"wheel",this,this.Un));this.options.Nk&&(this.ka=new (Da(xa,this.options,
!0))(this));this.wb&&this.wb.update(this.scale);ai(this);var b=Da(ua,this.options);b&&(a=this.Sb,b=new b,a.tb&&a.tb.ub&&a.tb.ub.dispose(),a.tb=b,a.tb&&(b=a.tb,b=new bi(a.j,a.j.ma.C(),b),a.tb.ub=b,a.Jc(a.tb.ub.Fa())));this.ma.Fa(this.G,this.Ac());return this.G};
g.dispose=function(){this.I=!1;this.La&&this.La.cancel();this.G&&(F(this.G),this.G=null);this.gd=this.Ba=null;this.ka&&(this.ka.dispose(),this.ka=null);this.N&&(this.N.dispose(),this.N=null);this.Me&&(this.Me.dispose(),this.Me=null);this.va&&(this.va.dispose(),this.va=null);this.qg&&(this.qg.dispose(),this.qg=null);this.ac&&(this.ac.dispose(),this.ac=null);this.wb&&(this.wb.dispose(),this.wb=null);this.ma.dispose();this.Sb&&(this.Sb.dispose(),this.Sb=null);Rh.h.dispose.call(this);if(this.gb){var a=
this.gb,b=a.dg.indexOf(this);if(b<0)throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");a.dg.splice(b,1);this.gb.unsubscribe(this.Lc);this.options.fb||(this.gb.dispose(),this.gb=null)}this.Hk=this.Wl=this.Gg=null;this.options.fb||(a=L(this))&&a.parentNode&&F(a.parentNode);this.xh&&(I(this.xh),this.xh=null)};g.Be=function(a,b){return new T(this,a,b)};function Eh(a,b){return a.N||b?a.N:a.ka?Eh(a.ka):null}function vc(a){a.xj&&a.I&&(a.va&&a.va.resize(),a.ng())}
g.resize=function(){this.ka&&this.ka.position();this.N&&this.N.position();var a=Sc(this.$e,Uc);var b=this.Ae;b={lp:Hh(b),zo:Gh(b),hp:Fh(b)};for(var c=[],d=0,e;e=a[d];d++)e.position(b,c),(e=th(e))&&c.push(e);this.va&&this.va.resize();this.ng();ai(this)};function gg(a){var b=document.documentElement;var c=window;b=Xa&&c.pageYOffset!=b.scrollTop?new w(b.scrollLeft,b.scrollTop):new w(c.pageXOffset||b.scrollLeft,c.pageYOffset||b.scrollTop);Ja(a.dl,b)||(a.dl=b,a.ng(),ai(a))}
function L(a){if(!a.Wh)for(var b=a.G;b;){if(b.tagName=="svg"){a.Wh=b;break}b=b.parentNode}return a.Wh}function ae(a){if(y==0){var b=a.scale,c=-a.scrollY,d=-a.scrollX;if(!(b==a.hj&&Math.abs(c-a.zl)<1&&Math.abs(d-a.wl)<1)){var e=new (B("viewport_change"))(c,d,b,a.id,a.hj);a.hj=b;a.zl=c;a.wl=d;z(e)}}}
g.translate=function(a,b){if(this.Ih&&this.Xg)this.Ud.Le(a,b);else{var c="translate("+a+","+b+") scale("+this.scale+")";this.Ba.setAttribute("transform",c);this.gd.setAttribute("transform",c)}if(this.ib){c=this.ib;var d=this.scale;c.dd=d;var e=a.toFixed(0),f=b.toFixed(0);c.qk.x=parseInt(e,10);c.qk.y=parseInt(f,10);c.ec.setAttribute("transform","translate("+e+","+f+") scale("+d+")")}this.wb&&this.wb.moveTo(a,b);ae(this)};
function te(a){if(a.Ih){a.Xg=!1;var b=a.Ud.Ei();a.Ud.Cg(a.G);b="translate("+b.x+","+b.y+") scale("+a.scale+")";a.Ba.setAttribute("transform",b);a.gd.setAttribute("transform",b)}}
function se(a){if(a.Ih&&!a.Xg){a.Xg=!0;var b=a.Ba.previousSibling,c=parseInt(L(a).getAttribute("width"),10),d=parseInt(L(a).getAttribute("height"),10),e=jb(a.Ba),f=a.Ud,h=a.Ba,k=a.gd,l=a.scale;if(f.Y.childNodes.length)throw Error("Already dragging a block.");f.sj=b;h.setAttribute("transform","translate(0, 0) scale("+l+")");k.setAttribute("transform","translate(0, 0) scale("+l+")");f.Y.setAttribute("width",c);f.Y.setAttribute("height",d);f.Y.appendChild(h);f.Y.appendChild(k);f.Y.style.display="block";
a.Ud.Le(e.x,e.y)}}g.Sg=function(){var a=this.hc();return a?a.Ka/this.scale:0};g.Ia=function(a){this.Df=a;if(this.G)if(this.va&&this.va.Wf(a),Eh(this)&&Eh(this).Wf(a),L(this).style.display=a?"block":"none",this.ka&&this.ka.Ia(a),a){a=Ue(this);for(var b=a.length-1;b>=0;b--)a[b].Gf();this.U();this.ka&&this.ka.position()}else M(!0)};g.U=function(){for(var a=Ue(this),b=a.length-1;b>=0;b--)a[b].U(!1);if(this.La)for(a=this.La.pe(),b=0;b<a.length;b++)a[b].U(!1);b=this.Sb;b.j.Ef&&b.zc&&b.j.tf().Mb()};
function ci(a){var b=di;if(a.I&&b.tagName&&!(b.getElementsByTagName("block").length>=(isNaN(a.options.If)?Infinity:a.options.If-Ue(a).length)))if(a.La&&a.La.cancel(),b.tagName.toLowerCase()=="comment"){y++;try{var c=ka.xo.Ai(b),d=parseInt(b.getAttribute("x"),10),e=parseInt(b.getAttribute("y"),10);isNaN(d)||isNaN(e)||(a.o&&(d=-d),c.moveBy(d+50,e+50))}finally{y--}y==0&&ka.wo.Mo(c);c.select()}else{y++;try{var f=qc(b,a),h=parseInt(b.getAttribute("x"),10),k=parseInt(b.getAttribute("y"),10);if(!isNaN(h)&&
!isNaN(k)){a.o&&(h=-h);do{b=!1;var l=Ue(a);c=0;for(var m;m=l[c];c++){var n=m.ba();if(Math.abs(h-n.x)<=1&&Math.abs(k-n.y)<=1){b=!0;break}}if(!b){var u=f.Pb(!1);c=0;for(var v;v=u[c];c++)if(v.closest(na,new w(h,k)).connection){b=!0;break}}b&&(h=a.o?h-na:h+na,k+=na*2)}while(b);f.moveBy(h,k)}}finally{y--}y==0&&!f.P&&z(new (B("create"))(f));f.select()}}function $h(a){(a=a.yd?a.Lj:a)&&!a.La&&a.ka&&Eh(a.ka)&&a.ka.Zo()}g.De=function(a,b){Rh.h.De.call(this,a,b);$h(this)};
g.ne=function(a){Rh.h.ne.call(this,a);$h(this)};g.Rc=function(a,b,c){a=Rh.h.Rc.call(this,a,b,c);$h(this);return a};function ai(a){var b=Sc(a.$e,Vc);a.li=[];for(var c=0,d;d=b[c];c++){var e=d.getClientRect();e&&a.li.push({component:d,Zm:e})}}function Qf(a,b){for(var c=0,d;d=a.li[c];c++)if(d.Zm.contains(b.clientX,b.clientY))return d.component;return null}
g.Mf=function(a){var b=Ig(this,a);if(b){if(b.yf)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");b.ra||(b.ra=this);b.Ub=a;b.ki(a)}};g.Eh=function(a){a=nb(a,L(this),re(this));a.x/=this.scale;a.y/=this.scale};g.xb=function(){return this.La!=null&&this.La.xb()};
g.Ma=function(){return this.options.Ha&&!!this.options.Ha.scrollbars||this.options.Ha&&this.options.Ha.Ne||this.options.Ha&&this.options.Ha.dc||this.options.la&&this.options.la.Ne||this.options.la&&this.options.la.Hl};function bg(a){var b=!!a.va;return a.Ma()&&(!b||b&&!!a.va.ta)}function cg(a){var b=!!a.va;return a.Ma()&&(!b||b&&!!a.va.ya)}
g.Un=function(a){if(kg())a.preventDefault(),a.stopPropagation();else{var b=this.options.la&&this.options.la.Ne,c=this.options.Ha&&this.options.Ha.Ne;if(b||c){a:switch(a.deltaMode){default:var d=a.deltaX;var e=a.deltaY;break a;case 1:d=a.deltaX*40;e=a.deltaY*40;break a;case 2:d=a.deltaX*125,e=a.deltaY*125}!b||!a.ctrlKey&&c?(b=this.scrollX-d,c=this.scrollY-e,a.shiftKey&&!d&&(b=this.scrollX-e,c=this.scrollY),this.scroll(b,c)):(d=-e/50,e=nb(a,L(this),re(this)),this.zoom(e.x,e.y,d));a.preventDefault()}}};
g.Bh=function(a){if(!this.options.readOnly&&!this.yd){var b=ah("workspace",{i:this});this.cn&&this.cn(b,a);S.show(a,b,this.o)}};function md(a){if(a.options.fb)md(a.options.fb);else{nd=a;document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{L(a).focus({preventScroll:!0})}catch(b){try{L(a).parentNode.setActive()}catch(c){L(a).parentNode.focus({preventScroll:!0})}}}}
g.zoom=function(a,b,c){c=Math.pow(this.options.la.Zn,c);var d=this.scale*c;if(this.scale!=d){d>this.options.la.Jf?c=this.options.la.Jf/this.scale:d<this.options.la.Kf&&(c=this.options.la.Kf/this.scale);var e=this.Ba.getCTM(),f=L(this).createSVGPoint();f.x=a;f.y=b;f=f.matrixTransform(e.inverse());a=f.x;b=f.y;e=e.translate(a*(1-c),b*(1-c)).scale(c);this.scrollX=e.e;this.scrollY=e.f;this.setScale(d)}};
g.setScale=function(a){this.options.la.Jf&&a>this.options.la.Jf?a=this.options.la.Jf:this.options.la.Kf&&a<this.options.la.Kf&&(a=this.options.la.Kf);this.scale=a;M(!1);this.N&&(this.N.Yo(),ai(this));this.wb&&this.wb.update(this.scale);a=this.hc();this.scrollX-=a.Ta;this.scrollY-=a.ab;a.Hb+=a.Ta;a.Ib+=a.ab;this.scroll(this.scrollX,this.scrollY);if(this.va)if(this.N){var b=this.va;b.ta&&le(b.ta,a);b.ya&&ne(b.ya,a)}else b=this.va,b.ta&&me(b.ta,a),b.ya&&oe(b.ya,a)};
g.scroll=function(a,b){M(!0);var c=this.hc();a=Math.min(a,-c.scrollLeft);b=Math.min(b,-c.scrollTop);var d=c.scrollTop+Math.max(0,c.scrollHeight-c.Ra);a=Math.max(a,-(c.scrollLeft+Math.max(0,c.scrollWidth-c.Ka)));b=Math.max(b,-d);this.scrollX=a;this.scrollY=b;this.va&&this.va.set(-(a+c.scrollLeft),-(b+c.scrollTop),!1);a+=c.Ta;b+=c.ab;this.translate(a,b)};
function Sh(a){var b=this.hc();typeof a.x=="number"&&(this.scrollX=-(b.scrollLeft+(b.scrollWidth-b.Ka)*a.x));typeof a.y=="number"&&(this.scrollY=-(b.scrollTop+(b.scrollHeight-b.Ra)*a.y));this.translate(this.scrollX+b.Ta,this.scrollY+b.ab)}g.Nb=function(a){return Rh.h.Nb.call(this,a)};g.Xa=function(a){return Rh.h.Xa.call(this,a)};g.xg=function(a){this.jg.push(a);Rh.h.xg.call(this,a)};g.wh=function(a){ub(this.jg,a);Rh.h.wh.call(this,a)};g.Fb=function(a){var b=!this.xj&&a;this.xj=a;b&&vc(this)};
g.clear=function(){this.Fb(!1);Rh.h.clear.call(this);this.jg=[];this.Fb(!0)};function ei(a,b){if(typeof b!="function")throw TypeError("Button callbacks must be functions.");a.Hk.CREATE_VARIABLE=b}function Vh(a,b,c){if(typeof c!="function")throw TypeError("Toolbox category callbacks must be functions.");a.Wl[b]=c}
function Ig(a,b){var c=b.type=="mousedown"||b.type=="touchstart"||b.type=="pointerdown",d=a.La;return d?c&&d.yf?(console.warn("Tried to start the same gesture twice."),d.cancel(),null):d:c?(a.La=new Nh(b,a),a.La):null}function vh(a){a.La&&a.La.cancel()};function fi(a,b){typeof a=="string"&&(a=document.getElementById(a)||document.querySelector(a));if(!document.contains(a))throw Error("Error: container is not in current document");b=new Xd(b||{});var c=document.createElement("div");c.className="injectionDiv";c.tabIndex=0;Ke(c,"label",t.WORKSPACE_ARIA_LABEL);a.appendChild(c);a=gi(c,b);var d=new Ld(c),e=new hf(c),f=hi(a,b,d,e);ii(f);nd=f;ji(f);c.addEventListener("focusin",function(){nd=f});return f}
function gi(a,b){a.setAttribute("dir","LTR");var c=b.yn,d=b.Gl;if(!Nd){Nd=!0;var e=Od.join("\n");Od.length=0;c&&(c=d.replace(/[\\/]$/,""),e=e.replace(/<<<PATH>>>/g,c),c=document.createElement("style"),c.id="blockly-common-style",c.appendChild(document.createTextNode(e)),document.head.insertBefore(c,document.head.firstChild))}a=D(Ub,{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1","class":"blocklySvg",tabindex:"0"},
a);c=D(Ib,{},a);e=b.Mk;c=D(Sb,{id:"blocklyGridPattern"+String(Math.random()).substring(2),patternUnits:"userSpaceOnUse"},c);e.length>0&&e.spacing>0?(D(Qb,{stroke:e.colour},c),e.length>1&&D(Qb,{stroke:e.colour},c)):D(Qb,{},c);b.Hi=c;return a}
function hi(a,b,c,d){b.fb=null;b=new Rh(b,c,d);c=b.options;b.scale=c.la.jo;a.appendChild(b.Fa("blocklyMainBackground"));E(Lh(b),b.ma.Ob());E(Lh(b),b.Ac().Ob());!c.Nk&&c.zd&&(d=new Xd({parentWorkspace:b,rtl:b.o,oneBasedIndex:b.options.Vn,renderer:b.options.Pl,rendererOverrides:b.options.Ql,move:{scrollbars:!0}}),d.Qd=b.options.Qd,b.N=new (Da(za,b.options,!0))(d),b.N.jk=!1,b.N.qn().Ia(!0),d=b.N.Fa(Ub),cc(d,a));if(c.Qk){if(!ka.Um)throw Error("Missing require for Blockly.Trashcan");b.Me=new ka.Um(b);
d=b.Me.Fa();b.G.insertBefore(d,b.Ba)}if(c.la&&c.la.controls){if(!ka.Vm)throw Error("Missing require for Blockly.ZoomControls");b.qg=new ka.Vm(b);c=b.qg.Fa();b.G.appendChild(c)}b.gb.subscribe(a,"workspaceBackgroundColour","background-color");b.translate(0,0);b.Ec.push(ki(b));ji(b);pg||(pg=document.createElement("div"),pg.className="blocklyWidgetDiv",(gd||document.body).appendChild(pg));fd();N||(N=document.createElement("div"),N.className="blocklyTooltipDiv",(gd||document.body).appendChild(N));return b}
function li(a){var b=a.Ae;if(!(bg(b.j)&&cg(b.j)||a.xb())){b=Wf(b,!0);for(var c=[].concat(a.jg),d=0,e;e=c[d];d++)Vf(a,b,e)}}
function ki(a){return function(b){var c=a.Ae;if(!(bg(c.j)&&cg(c.j)||a.xb()))if(Ab.indexOf(b.type)!==-1){c=Wf(c,!0);var d=null;switch(b.type){case "create":case "move":(d=a.Nb(b.Z))&&(d=d.Qb())}if(d){var e=x;A(b.group);Vf(a,c,d)&&!b.group&&console.warn("Moved object in bounds but there was no event group. This may break undo.");e!==null&&A(e)}}else b.type==="viewport_change"&&b.scale>b.Lf&&li(a)}}
function Vf(a,b,c){var d=th(c),e=ma(b.top,d.top,b.top+b.height-(d.bottom-d.top))-d.top,f=b.left;b=b.left+b.width-(d.right-d.left);a.o?f=Math.min(b,f):b=Math.max(f,b);return(a=ma(f,d.left,b)-d.left)||e?(c.moveBy(a,e),!0):!1}
function ii(a){var b=a.options,c=L(a);H(c.parentNode,"contextmenu",null,function(e){ib(e)||e.preventDefault()});c=H(window,"resize",null,function(){M(!0);ji(a);li(a)});a.xh=c;mi();if(b.zd){c=a.ka;var d=Eh(a,!0);c?c.init():d&&(d.init(a),d.show(b.zd),typeof d.$n=="function"&&d.$n())}b.Qk&&a.Me.init();b.la&&b.la.controls&&a.qg.init();b.Ha&&b.Ha.scrollbars?(a.va=new Yd(a,b.Ha.scrollbars===!0||!!b.Ha.scrollbars.Li,b.Ha.scrollbars===!0||!!b.Ha.scrollbars.vertical),a.va.resize()):a.yh({x:.5,y:.5});b.An&&
ni(b.Gl,a)}function mi(){la||(H(document,"scroll",null,function(){for(var a=gf(),b=0,c;c=a[b];b++)c.ng&&c.ng()}),H(document,"keydown",null,oi),Oc(document,"touchend",Hc),Oc(document,"touchcancel",Hc),bb&&H(window,"orientationchange",document,function(){ji(nd)}));la=!0}
function ni(a,b){function c(){for(;e.length;)I(e.pop());d.preload()}var d=b.ac;d.load([a+"click.mp3",a+"click.wav",a+"click.ogg"],"click");d.load([a+"disconnect.wav",a+"disconnect.mp3",a+"disconnect.ogg"],"disconnect");d.load([a+"delete.mp3",a+"delete.ogg",a+"delete.wav"],"delete");var e=[];e.push(H(document,"mousemove",null,c,!0));e.push(H(document,"touchstart",null,c,!0))};var Wh={};function pi(a){var b=af(a,"procedures_defnoreturn").map(function(c){return c.pn()});a=af(a,"procedures_defreturn").map(function(c){return c.pn()});b.sort(qi);a.sort(qi);return[b,a]}function qi(a,b){return a[0].localeCompare(b[0],void 0,{sensitivity:"base"})}
function Xh(a){function b(f,h){for(var k=0;k<f.length;k++){var l=f[k][0],m=f[k][1],n=G("block");n.setAttribute("type",h);n.setAttribute("gap",16);var u=G("mutation");u.setAttribute("name",l);n.appendChild(u);for(l=0;l<m.length;l++){var v=G("arg");v.setAttribute("name",m[l]);u.appendChild(v)}c.push(n)}}var c=[];if(tf.procedures_defnoreturn){var d=G("block");d.setAttribute("type","procedures_defnoreturn");d.setAttribute("gap",16);var e=G("field");e.setAttribute("name","NAME");e.appendChild(document.createTextNode(t.PROCEDURES_DEFNORETURN_PROCEDURE));
d.appendChild(e);c.push(d)}tf.procedures_defreturn&&(d=G("block"),d.setAttribute("type","procedures_defreturn"),d.setAttribute("gap",16),e=G("field"),e.setAttribute("name","NAME"),e.appendChild(document.createTextNode(t.PROCEDURES_DEFRETURN_PROCEDURE)),d.appendChild(e),c.push(d));tf.procedures_ifreturn&&(d=G("block"),d.setAttribute("type","procedures_ifreturn"),d.setAttribute("gap",16),c.push(d));c.length&&c[c.length-1].setAttribute("gap",24);a=pi(a);b(a[0],"procedures_callnoreturn");b(a[1],"procedures_callreturn");
return c}
function ri(a){for(var b=[],c=af(a,"procedures_mutatorarg"),d=0,e;e=c[d];d++)b.push(Xe(e,"NAME"));c=G("xml");d=G("block");d.setAttribute("type","procedures_mutatorarg");e=G("field");e.setAttribute("name","NAME");a:if(b.length){for(var f="",h=14,k="x";;){for(var l=!1,m=0;m<b.length;m++)if(b[m].toLowerCase()==k){l=!0;break}if(!l){b=k;break a}h++;h==25&&(h=0,f=Number(f)+1);k="ijkmnopqrstuvwxyzabcdefgh".charAt(h)+f}b=void 0}else b="x";e.appendChild(document.createTextNode(b));d.appendChild(e);c.appendChild(d);
if(b=Td(c)){if(!a.options.zd)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Wd(b)){if(!a.ka)throw Error("Existing toolbox has no categories.  Can't change mode.");a.options.zd=b;a.ka.U(b)}else{if(!a.N)throw Error("Existing toolbox has categories.  Can't change mode.");a.options.zd=b;a.N.show(b)}}else if(a.options.zd)throw Error("Can't nullify an existing toolbox.");}
function Yh(a){if(a.type=="bubble_open"&&a.Bo==="mutator"&&a.Vo){a=(Eb[a.$a]||null).Nb(a.Z);var b=a.type;if(b=="procedures_defnoreturn"||b=="procedures_defreturn")a=a.Ed.qn(),ri(a),a.Ec.push(si)}}function si(a){a.type!="create"&&a.type!="delete"&&a.type!="change"||ri(Eb[a.$a]||null)};function ti(){ui=this;this.Db=Object.create(null);this.ye=Object.create(null)}var ui,td={Shift:16,Control:17,Alt:18,Meta:91};ti.prototype.register=function(a,b){if(this.Db[a.name]&&!b)throw Error('Shortcut with name "'+a.name+'" already exists.');this.Db[a.name]=a};
ti.prototype.unregister=function(a){if(!this.Db[a])return console.warn('Keyboard shortcut with name "'+a+'" not found.'),!1;for(var b in this.ye){var c=b,d=this.ye[c],e=d.indexOf(a);e>-1&&(d.splice(e,1),d.length==0&&delete this.ye[c])}delete this.Db[a];return!0};function U(a,b){var c=ui;a=String(a);var d=c.ye[a];if(d)throw Error('Shortcut with name "'+b+'" collides with shortcuts '+d.toString());c.ye[a]=[b]}
function V(a,b){var c="";if(b){for(var d=rd(),e=0,f;f=b[e];e++)if(d.indexOf(f)<0)throw Error(f+" is not a valid modifier key.");for(var h in td)b.indexOf(td[h])>-1&&(c!=""&&(c+="+"),c+=h)}c!=""&&a?c=c+"+"+a:a&&(c=a.toString());return c}new ti;function We(a,b,c,d){this.i=a;this.name=b;this.type=c||"";this.ud=d||qb();z(new (B("var_create"))(this))}We.prototype.cb=function(){return this.ud};function vi(a,b){return a.name.localeCompare(b.name,void 0,{sensitivity:"base"})};var Th={};function Uh(a){var b=[],c=document.createElement("button");c.setAttribute("text","%{BKY_NEW_VARIABLE}");c.setAttribute("callbackKey","CREATE_VARIABLE");ei(a,function(d){wi(d.So())});b.push(c);a=xi(a);return b=b.concat(a)}
function xi(a){a=a.Rg("");var b=[];if(a.length>0){var c=a[a.length-1];if(tf.variables_set){var d=G("block");d.setAttribute("type","variables_set");d.setAttribute("gap",tf.math_change?8:24);d.appendChild(yi(c));b.push(d)}tf.math_change&&(d=G("block"),d.setAttribute("type","math_change"),d.setAttribute("gap",tf.variables_get?20:8),d.appendChild(yi(c)),c=oc('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),d.appendChild(c),b.push(d));if(tf.variables_get){a.sort(vi);
c=0;for(var e;e=a[c];c++)d=G("block"),d.setAttribute("type","variables_get"),d.setAttribute("gap",8),d.appendChild(yi(e)),b.push(d)}}return b}function wi(a){function b(c){zi(c,function(d){if(d){var e=Ai(d,a);if(e){if(e.type=="")var f=t.VARIABLE_ALREADY_EXISTS.replace("%1",e.name);else f=t.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,f=f.replace("%1",e.name).replace("%2",e.type);Ye(f,function(){b(d)})}else a.Rc(d,"")}})}b("")}
function zi(a,b){Bi(a,function(c){c&&(c=c.replace(/[\s\xa0]+/g," ").trim(),c==t.RENAME_VARIABLE||c==t.NEW_VARIABLE)&&(c=null);b(c)})}function Ai(a,b){b=b.na.sf();a=a.toLowerCase();for(var c=0,d;d=b[c];c++)if(d.name.toLowerCase()==a)return d;return null}function yi(a){var b=G("field");b.setAttribute("name","VAR");b.setAttribute("id",a.cb());b.setAttribute("variabletype",a.type);b.appendChild(document.createTextNode(a.name));return b}
function wc(a,b){a=a.sf();var c=[];if(b.length!=a.length)for(var d=0;d<a.length;d++){var e=a[d];b.indexOf(e)==-1&&c.push(e)}return c};var nd=null,P=null,Se=[],di=null,Ci=null,Di=null,gd=null;function ji(a){for(;a.options.fb;)a=a.options.fb;var b=L(a),c=Ih(a),d=b.parentNode;if(d){var e=d.offsetWidth;d=d.offsetHeight;if(c.width!=e){b.setAttribute("width",e+"px");var f=a;L(f);e&&(f.Vh.width=e)}c.height!=d&&(b.setAttribute("height",d+"px"),b=a,L(b),d&&(b.Vh.height=d));a.resize()}}
function oi(a){var b=nd;if(b&&!(ib(a)||b.I&&!b.isVisible()))a:{var c=ui,d="";for(e in td)a.getModifierState(e)&&(d!=""&&(d+="+"),d+=e);d!=""&&a.keyCode?d=d+"+"+a.keyCode:a.keyCode&&(d=a.keyCode.toString());d=c.ye[d]||[];var e=0;for(var f;f=d[e];e++)if(f=c.Db[f],(!f.qa||f.qa(b))&&f.ga&&f.ga(b,a,f))break a}}function Ei(a){a.i.yd||(A(!0),M(),a.u?a.dispose(!1,!0):a.dispose(!0,!0),A(!1))}
function Fi(a){if(a.xe)a=null;else{for(var b=kc(a,!0),c=0,d;d=b.childNodes[c];c++)if(d.nodeName.toLowerCase()=="next"){b.removeChild(d);break}c=a.ba();b.setAttribute("x",a.o?-c.x:c.x);b.setAttribute("y",c.y);a={xml:b,source:a.i,uo:vb(a)}}a&&(di=a.xml,Ci=a.source,Di=a.uo)}function Gi(){if(!di)return!1;var a=Ci;a.yd&&(a=a.Lj);return Di&&cf(a,Di)?(A(!0),ci(a),A(!1),!0):!1}function M(a){Ie();vg();ld();var b=!!a;Sc(nd.$e,Wc).forEach(function(c){c.Ao(b)})}function Ye(a,b){alert(a);b&&b()}
function Ze(a,b){b(confirm(a))}function Bi(a,b){b(prompt(t.NEW_VARIABLE_TITLE,a))};var Hi={am:"\u12a0\u121b\u122d\u129b",ar:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",be:"\u0431\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0456","be-tarask":"Tara\u0161kievica",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a",bn:"\u09ac\u09be\u0982\u09b2\u09be",br:"Brezhoneg",ca:"Catal\u00e0",cs:"\u010cesky",da:"Dansk",de:"Deutsch",el:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",en:"English",eo:"Esperanto",es:"Espa\u00f1ol",eu:"Euskara",fa:"\u0641\u0627\u0631\u0633\u06cc",
fi:"Suomi",fo:"F\u00f8royskt",fr:"Fran\u00e7ais",gl:"Galego",ha:"Hausa",he:"\u05e2\u05d1\u05e8\u05d9\u05ea",hi:"\u0939\u093f\u0928\u094d\u0926\u0940",hr:"Hrvatski",hu:"Magyar",hy:"\u0570\u0561\u0575\u0565\u0580\u0567\u0576",ia:"Interlingua",id:"Bahasa Indonesia",ig:"As\u1ee5s\u1ee5 Igbo",is:"\u00cdslenska",it:"Italiano",ja:"\u65e5\u672c\u8a9e",kab:"Taqbaylit",kn:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",ko:"\ud55c\uad6d\uc5b4",lt:"Lietuvi\u0173",lv:"Latvie\u0161u",ms:"Bahasa Melayu",my:"\u1019\u103c\u1014\u103a\u1019\u102c\u1005\u102c",
nb:"Norsk (bokm\u00e5l)",nl:"Nederlands, Vlaams",pl:"Polski",pms:"Piemont\u00e8is",pt:"Portugu\u00eas","pt-br":"Portugu\u00eas Brasileiro",ro:"Rom\u00e2n\u0103",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",sc:"Sardu",sk:"Sloven\u010dina",sl:"Sloven\u0161\u010dina",sq:"Shqip",sr:"\u0421\u0440\u043f\u0441\u043a\u0438","sr-latn":"Srpski",sv:"Svenska",th:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",ti:"\u1275\u130d\u122d\u129b",tr:"T\u00fcrk\u00e7e",uk:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",
ur:"\u0627\u064f\u0631\u062f\u064f\u0648\u202c",vi:"Ti\u1ebfng Vi\u1ec7t",yo:"\u00c8d\u00e8 Yor\u00f9b\u00e1","zh-hans":"\u7b80\u4f53\u4e2d\u6587","zh-hant":"\u6b63\u9ad4\u4e2d\u6587"},Ii=window.BlocklyGamesLang,Ji=window.BlocklyGamesLanguages,Ki=["ar","fa","he","ur"].includes(Ii),Li=/\.html$/.test(window.location.pathname),W=document.getElementById.bind(document);
function Mi(a){try{if(a.lineno||a.colno){var b=Date.now();if(!(Mi.cl+1E4>b)){Mi.cl=b;var c=new XMLHttpRequest,d="error="+encodeURIComponent((a.error&&a.error.stack||a.message+" "+a.filename+" "+a.lineno+":"+a.colno).trim())+"&url="+encodeURIComponent(window.location);c.open("POST","/scripts/errorReporter.py");c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");c.send(d);console.log("Error reported.")}}}catch(e){console.log(a.error)}}Mi.cl=0;Li||window.addEventListener("error",Mi);
var Ni,Oi=Math,Pi=Oi.floor,Qi=Number,Ri,Si=window.location.search.match(RegExp("[?&]level=([^&]+)"));Ri=Si?decodeURIComponent(Si[1].replace(/\+/g,"%20")):"NaN";var Ti=Pi.call(Oi,Qi(Ri));Ni=isNaN(Ti)?1:Math.max(1,Math.min(Ti,10));
function Ui(a){document.title=X("Games.name",!0)+(a&&" : ")+a;document.dir=Ki?"rtl":"ltr";document.head.parentElement.setAttribute("lang",Ii);if(a=W("languageMenu")){for(var b=[],c=ba(Ji),d=c.next();!d.done;d=c.next())d=d.value,b.push([Hi[d],d]);b.sort(function(e,f){return e[0]>f[0]?1:e[0]<f[0]?-1:0});a.options.length=0;b=ba(b);for(c=b.next();!c.done;c=b.next())d=ba(c.value),c=d.next().value,d=d.next().value,c=new Option(c,d),d===Ii&&(c.selected=!0),a.options.add(c);a.options.length<=1&&(a.style.display=
"none")}for(a=1;a<=10;a++)b=W("level"+a),c=!!Vi(a),b&&c&&(b.className+=" level_done");(a=document.querySelector('meta[name="viewport"]'))&&screen.availWidth<725&&a.setAttribute("content","width=725, initial-scale=.35, user-scalable=no")}function Vi(a){var b=Wi;try{var c=window.localStorage[b+a]}catch(d){}return c}
function Xi(a,b){if(!a)throw TypeError("Element not found: "+a);typeof a==="string"&&(a=W(a));a.addEventListener("click",b,!0);a.addEventListener("touchend",function(c){c.preventDefault();b(c)},!0)}function X(a,b){var c=window.BlocklyGamesMsg[a];c===void 0&&(c="[Unknown message: "+a+"]");return b?Yi(c):c}function Yi(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};function Zi(a,b){for(var c=0,d=0;d<b.length;d++)for(var e=b[d];e;)setTimeout(e.Kd.bind(e,a),c),e=xb(e),c+=10}function $i(a,b){if(mc(a))Array.prototype.push.apply(b,wb(a,!1));else{a=jc(a,!1);for(var c=0;c<a.length;c++)$i(a[c],b)}}function aj(a){var b=[];a=a.Xa(!0);for(var c=0;c<a.length;c++)$i(a[c],b);return b}function bj(a,b){A(b);var c=a.shift();c&&(c.i?(c.dispose(!1,!0),setTimeout(bj,10,a,b)):bj(a,b));A(!1)}
$g.register({Wa:function(){return t.UNDO},qa:function(a){return a.i.Rd.length>0?"enabled":"disabled"},ga:function(a){ef(a.i,!1)},ob:"workspace",id:"undoWorkspace",weight:1});$g.register({Wa:function(){return t.REDO},qa:function(a){return a.i.Sf.length>0?"enabled":"disabled"},ga:function(a){ef(a.i,!0)},ob:"workspace",id:"redoWorkspace",weight:2});
$g.register({Wa:function(){return t.CLEAN_UP},qa:function(a){return a.i.Ma()?a.i.Xa(!1).length>1?"enabled":"disabled":"hidden"},ga:function(a){a=a.i;a.Fb(!1);A(!0);for(var b=a.Xa(!0),c=0,d=0,e;e=b[d];d++)if(e.Ma()){var f=e.ba();e.moveBy(-f.x,c-f.y);sh(e);c=e.ba().y+Of(e).height+a.ma.C().wg}A(!1);a.Fb(!0)},ob:"workspace",id:"cleanWorkspace",weight:3});
$g.register({Wa:function(){return t.COLLAPSE_ALL},qa:function(a){if(a.i.options.collapse){a=a.i.Xa(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(!c.isCollapsed())return"enabled";c=xb(c)}return"disabled"}return"hidden"},ga:function(a){Zi(!0,a.i.Xa(!0))},ob:"workspace",id:"collapseWorkspace",weight:4});
$g.register({Wa:function(){return t.EXPAND_ALL},qa:function(a){if(a.i.options.collapse){a=a.i.Xa(!1);for(var b=0;b<a.length;b++)for(var c=a[b];c;){if(c.isCollapsed())return"enabled";c=xb(c)}return"disabled"}return"hidden"},ga:function(a){Zi(!1,a.i.Xa(!0))},ob:"workspace",id:"expandWorkspace",weight:5});
$g.register({Wa:function(a){if(a.i)return a=aj(a.i).length,a==1?t.DELETE_BLOCK:t.DELETE_X_BLOCKS.replace("%1",String(a))},qa:function(a){if(a.i)return aj(a.i).length>0?"enabled":"disabled"},ga:function(a){if(a.i){vh(a.i);var b=aj(a.i),c=qb();b.length<2?bj(b,c):Ze(t.DELETE_ALL_BLOCKS.replace("%1",b.length),function(d){d&&bj(b,c)})}},ob:"workspace",id:"workspaceDelete",weight:6});
$g.register({Wa:function(){return t.DUPLICATE_BLOCK},qa:function(a){a=a.block;return!a.zb&&mc(a)&&a.Ma()?(df(a.i)?cf(a.i,vb(a)):1)?"enabled":"disabled":"hidden"},ga:function(a){if(a.block){a=a.block;var b=di,c=Ci;Fi(a);ci(a.i);di=b;Ci=c}},ob:"block",id:"blockDuplicate",weight:1});
$g.register({Wa:function(a){return a.block.Kb?t.REMOVE_COMMENT:t.ADD_COMMENT},qa:function(a){a=a.block;return Xa||a.zb||!a.i.options.$m||a.isCollapsed()||!a.yb()?"hidden":"enabled"},ga:function(a){a=a.block;a.Kb?a.Ge(null):a.Ge("")},ob:"block",id:"blockComment",weight:2});
$g.register({Wa:function(a){return wf(a.block)?t.EXTERNAL_INPUTS:t.INLINE_INPUTS},qa:function(a){a=a.block;if(!a.zb&&a.Ma()&&!a.isCollapsed())for(var b=1;b<a.m.length;b++)if(a.m[b-1].type!=3&&a.m[b].type!=3)return"enabled";return"hidden"},ga:function(a){a.block.Nd(!wf(a.block))},ob:"block",id:"blockInline",weight:3});
$g.register({Wa:function(a){return a.block.isCollapsed()?t.EXPAND_BLOCK:t.COLLAPSE_BLOCK},qa:function(a){a=a.block;return!a.zb&&a.Ma()&&a.i.options.collapse?"enabled":"hidden"},ga:function(a){a.block.Kd(!a.block.isCollapsed())},ob:"block",id:"blockCollapseExpand",weight:4});
$g.register({Wa:function(a){return a.block.isEnabled()?t.DISABLE_BLOCK:t.ENABLE_BLOCK},qa:function(a){a=a.block;return!a.zb&&a.i.options.disable&&a.yb()?Sg(a)?"disabled":"enabled":"hidden"},ga:function(a){a=a.block;var b=x;b||A(!0);a.Md(!a.isEnabled());b||A(!1)},ob:"block",id:"blockDisable",weight:5});
$g.register({Wa:function(a){var b=a.block;a=wb(b,!1).length;(b=xb(b))&&(a-=wb(b,!1).length);return a==1?t.DELETE_BLOCK:t.DELETE_X_BLOCKS.replace("%1",String(a))},qa:function(a){return!a.block.zb&&mc(a.block)?"enabled":"hidden"},ga:function(a){A(!0);a.block&&Ei(a.block);A(!1)},ob:"block",id:"blockDelete",weight:6});
$g.register({Wa:function(){return t.HELP},qa:function(a){a=a.block;return(typeof a.Rb=="function"?a.Rb():a.Rb)?"enabled":"hidden"},ga:function(a){a.block.showHelp()},ob:"block",id:"blockHelp",weight:7});function Y(a,b){return" "+a+","+b+" "}function cj(a,b){return" "+a+b.join("")}function dj(a,b){return" M "+a+","+b+" "}function Q(a,b){return" m "+a+","+b+" "}function ej(a,b){return" l "+a+","+b+" "}function R(a,b){return" "+a+" "+b+" "}function fj(a,b,c){return"a "+b+" "+b+" "+a+c};function gj(){this.$b=0;this.Nm=3;this.qb=5;this.Zj=8;this.Sa=10;this.ek=this.qb;this.We=15;this.ae=5;this.Oh=8;this.Km=15;this.Mh=4;this.Jm=12;this.um=16;this.tm=this.Rj=this.We;this.Zb=8;this.Rm=this.Te=15;this.ck=0;this.dk=20;this.nm=4;this.Sm=this.qb;this.Tm=this.Sa;this.pm=this.qb;this.om=this.Sa;this.Pj=!1;this.Pm=15;this.Qm=100;this.Om=15;this.wg=24;this.wm=14.5;this.vm=this.We+11;this.ym=2;this.xm=this.wg;this.bk=Q(0,0);this.Gm=12;this.Hm=6;this.Se=11;this.Xd="normal";this.Wd="sans-serif";
this.Vj=this.ug=-1;this.tg=4;this.Sj=16;this.Qe=5;this.zm="#fff";this.Lh=!Xa&&!Ya;this.Tj=this.Sj;this.Bm=this.Am=this.Uj=!1;this.Dm=this.Qe;this.Re=12;this.Cm="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=";
this.uh=String(Math.random()).substring(2);this.ui="";this.wi=null;this.Ck="";this.gf=this.yk=this.ii=null;this.Qj="#cc0a0a";this.Xj="#4286f4";this.sg=100;this.fk=5;this.rg=10;this.rm=2;this.sm=4;this.Em="#000000";this.Wj=.2;this.ak={Mm:1,Zd:2}}g=gj.prototype;
g.init=function(){this.Yd=this.Wi();this.Zd=this.Xi();this.$d=this.Zi();this.Nh=this.Yi();var a=this.Zb;this.vg={width:a,height:a,pj:fj("0 0,0",a,Y(-a,a)),oh:fj("0 0,0",a,Y(a,a))};a=this.Zb;this.Ue={Mj:Q(0,a)+fj("0 0,1",a,Y(a,-a)),po:fj("0 0,1",a,Y(a,a)),Xm:fj("0 0,1",a,Y(-a,a)),Uh:fj("0 0,1",a,Y(-a,-a)),Yn:a}};
g.Zf=function(){this.Ag=Object.create(null);var a=document.createElement("span");a.style.font=this.Xd+" "+(this.Se+"pt ")+this.Wd;a.textContent="Hg";var b=document.createElement("div");b.style.width="1px";b.style.height=0;var c=document.createElement("div");c.style.display="flex";c.style.position="fixed";c.style.top=0;c.style.left=0;c.appendChild(a);c.appendChild(b);document.body.appendChild(c);try{var d={};c.style.alignItems="baseline";d.Jb=b.offsetTop-a.offsetTop;c.style.alignItems="flex-end";d.height=
b.offsetTop-a.offsetTop}finally{document.body.removeChild(c)}a=d;this.ug=a.height;this.Vj=a.Jb};function wh(a,b){var c="auto_"+b;a.Ag[c]||(a.Ag[c]=hj({colourPrimary:b}));return{style:a.Ag[c],name:c}}function rh(a,b){return a.Ag[b||""]||(b&&b.indexOf("auto_")==0?wh(a,b.substring(5)).style:hj({colourPrimary:"#000000"}))}
function hj(a){var b={};a&&qd(b,a);a=yb(b.colourPrimary||"#000");b.nd=a.zf;b.colourSecondary?a=yb(b.colourSecondary).zf:(a=b.nd,a=Ia("#fff",a,.6)||a);b.Dg=a;b.colourTertiary?a=yb(b.colourTertiary).zf:(a=b.nd,a=Ia("#fff",a,.3)||a);b.ie=a;b.rd=b.hat||"";return b}g.dispose=function(){this.wi&&F(this.wi);this.ii&&F(this.ii);this.yk&&F(this.yk);this.gf=null};g.Wi=function(){var a=this.Gm,b=this.Hm;return{height:a,width:b,path:" l"+[Y(b,a/4),Y(-b*2,a/2),Y(b,a/4)].join("")}};
g.Zi=function(){var a=this.Pm,b=this.Qm;return{height:a,width:b,path:cj("c",[Y(30,-a),Y(70,-a),Y(b,0)])}};g.Yi=function(){function a(f){f=f?-1:1;var h=-f,k=c/2;return cj("c",[Y(0,f*(k+2.5)),Y(-b,h*(k+.5)),Y(-b,f*k)])+cj("s",[Y(b,h*2.5),Y(b,f*k)])}var b=this.Oh,c=this.We,d=a(!0),e=a(!1);return{type:this.ak.Mm,width:b,height:c,Cb:e,Pf:d}};
g.Xi=function(){function a(h){return" l"+[Y(h*d,c),Y(h*3,0),Y(h*d,-c)].join("")}var b=this.Km,c=this.Mh,d=(b-3)/2,e=a(1),f=a(-1);return{type:this.ak.Zd,width:b,height:c,bd:e,Fl:f}};function Kf(a,b){switch(b.type){case 1:case 2:return a.Nh;case 4:case 3:return a.Zd;default:throw Error("Unknown connection type");}}
g.Fa=function(a,b,c){c=this.Bi(c);b="blockly-renderer-style-"+b;this.gf=document.getElementById(b);c=c.join("\n");if(this.gf)this.gf.firstChild.textContent=c;else{var d=document.createElement("style");d.id=b;d.appendChild(document.createTextNode(c));document.head.insertBefore(d,document.head.firstChild);this.gf=d}a=D(Ib,{},a);b=D(Nb,{id:"blocklyEmbossFilter"+this.uh},a);D(Kb,{"in":"SourceAlpha",stdDeviation:1,result:"blur"},b);c=D(Mb,{"in":"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,
"lighting-color":"white",result:"specOut"},b);D(Lb,{x:-5E3,y:-1E4,z:2E4},c);D(Jb,{"in":"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},b);D(Jb,{"in":"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},b);this.ui=b.id;this.wi=b;a=D(Sb,{id:"blocklyDisabledPattern"+this.uh,patternUnits:"userSpaceOnUse",width:10,height:10},a);D(Tb,{width:10,height:10,fill:"#aaa"},a);D(Rb,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},a);this.Ck=a.id;this.ii=a};
g.Bi=function(a){return[a+" .blocklyText, ",a+" .blocklyFlyoutLabelText {","font: "+this.Xd+" "+this.Se+"pt "+this.Wd+";","}",a+" .blocklyText {","fill: #fff;","}",a+" .blocklyNonEditableText>rect,",a+" .blocklyEditableText>rect {","fill: "+this.zm+";","fill-opacity: .6;","stroke: none;","}",a+" .blocklyNonEditableText>text,",a+" .blocklyEditableText>text {","fill: #000;","}",a+" .blocklyFlyoutLabelText {","fill: #000;","}",a+" .blocklyText.blocklyBubbleText {","fill: #000;","}",a+" .blocklyEditableText:not(.editing):hover>rect {",
"stroke: #fff;","stroke-width: 2;","}",a+" .blocklyHtmlInput {","font-family: "+this.Wd+";","font-weight: "+this.Xd+";","}",a+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",a+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",a+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",a+" .blocklyReplaceable .blocklyPathLight,",a+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",a+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.Wj+
";","stroke: none;","}"]};function ij(a){this.fe=this.M=this.type=this.height=this.width=0;this.g=a;this.Bb=this.g.Te};function jj(a,b){jj.h.constructor.call(this,a);this.Ua=b;this.shape=Kf(this.g,b);this.xd=!!this.shape.isDynamic;this.type|=1024}K(jj,ij);function kj(a,b){kj.h.constructor.call(this,a,b);this.type|=8192;this.height=this.xd?0:this.shape.height;this.Gb=this.width=this.xd?0:this.shape.width;this.lb=this.g.ae;this.cf=0}K(kj,jj);function lj(a,b){lj.h.constructor.call(this,a,b);this.type|=2048;this.height=this.shape.height;this.width=this.shape.width}K(lj,jj);
function mj(a,b){mj.h.constructor.call(this,a,b);this.type|=4096;this.height=this.shape.height;this.width=this.shape.width}K(mj,jj);function nj(a,b){nj.h.constructor.call(this,a,b.connection);this.type|=128;this.input=b;this.align=b.align;(this.Qc=b.connection&&b.connection.H()?b.connection.H():null)?(a=Of(this.Qc),this.bf=a.width,this.Fg=a.height):this.Fg=this.bf=0;this.lb=this.cf=0}K(nj,jj);
function oj(a,b){oj.h.constructor.call(this,a,b);this.type|=256;this.Qc?(this.width=this.bf,this.height=this.Fg):(this.height=this.g.vm,this.width=this.g.wm);this.je=this.xd?this.shape.height(this.height):this.shape.height;this.cc=this.xd?this.shape.width(this.height):this.shape.width;this.Qc||(this.width+=this.cc*(this.xd?2:1));this.lb=this.xd?this.shape.lb(this.je):this.g.ae;this.cf=this.xd?this.shape.cf(this.cc):0}K(oj,nj);
function pj(a,b){pj.h.constructor.call(this,a,b);this.type|=512;this.height=this.Qc?this.Fg+this.g.ck:this.g.xm;this.width=this.g.Rm+this.shape.width}K(pj,nj);function qj(a,b){qj.h.constructor.call(this,a,b);this.type|=64;this.height=this.Qc?this.Fg-this.g.ae-this.g.qb:this.shape.height;this.width=this.shape.width+this.g.ym;this.lb=this.g.ae;this.je=this.shape.height;this.cc=this.shape.width}K(qj,nj);function rj(a,b){rj.h.constructor.call(this,a);this.icon=b;this.isVisible=b.isVisible();this.type|=4;a=b.Po();this.height=a.height;this.width=a.width}K(rj,ij);function sj(a){sj.h.constructor.call(this,a);this.type|=524288;this.height=this.g.Yd.height;this.width=this.g.Yd.width}K(sj,ij);function tj(a,b){tj.h.constructor.call(this,a);this.Fk=b;this.yb=b.Pe;this.nn=b.Kk();this.type|=1;a=this.Fk.getSize();this.height=a.height;this.width=a.width}K(tj,ij);
function uj(a){uj.h.constructor.call(this,a);this.type|=2;this.height=this.g.$d.height;this.width=this.g.$d.width;this.ee=this.height}K(uj,ij);function vj(a,b){vj.h.constructor.call(this,a);this.type=(b&&b!="left"?131072:32768)|16384;this.width=this.height=this.g.$b}K(vj,ij);function wj(a,b){wj.h.constructor.call(this,a);this.type=(b&&b!="left"?262144:65536)|16384;this.width=this.g.Zb;this.height=this.g.Zb/2}K(wj,ij);
function xj(a,b){xj.h.constructor.call(this,a);this.type|=40;this.width=b;this.height=this.g.Om}K(xj,ij);function yj(a){this.type=1048576;this.elements=[];this.M=this.Aa=this.Xb=this.minWidth=this.minHeight=this.width=this.height=0;this.Ok=this.te=this.Ii=this.ua=this.Uc=!1;this.g=a;this.Bb=this.g.Te;this.align=null}yj.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.");};function zj(a){for(var b=a.elements.length-1,c;c=a.elements[b];b--)if(c.type&128)return c;return null}yj.prototype.Gh=function(){return!0};yj.prototype.nf=function(){return!0};
function Aj(a){Aj.h.constructor.call(this,a);this.type|=2097152;this.ee=this.vc=0;this.zn=!1;this.connection=null}K(Aj,yj);Aj.prototype.Ji=function(a){var b=(a.rd?a.rd==="cap":this.g.Pj)&&!a.u&&!a.A,c=a.A&&a.A.H();return!!a.u||b||(c?xb(c)==a:!1)};
Aj.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,e.type&8||(e.type&2?c=Math.max(c,e.ee):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.vc=this.ee=c;this.Xb=this.width};Aj.prototype.Gh=function(){return!1};Aj.prototype.nf=function(){return!1};function Bj(a){Bj.h.constructor.call(this,a);this.type|=4194304;this.Pk=!1;this.connection=null;this.Jb=this.jf=0}K(Bj,yj);
Bj.prototype.Ji=function(a){return!!a.u||!!xb(a)};Bj.prototype.measure=function(){for(var a=0,b=0,c=0,d=0,e;e=this.elements[d];d++)b+=e.width,e.type&8||(e.type&4096?c=Math.max(c,e.height):a=Math.max(a,e.height));this.width=Math.max(this.minWidth,b);this.height=Math.max(this.minHeight,a)+c;this.jf=c;this.Xb=this.width};Bj.prototype.Gh=function(){return!1};Bj.prototype.nf=function(){return!1};
function Cj(a,b,c){Cj.h.constructor.call(this,a);this.type|=24;this.width=c;this.height=b;this.Ik=!1;this.Xb=0;this.elements=[new xj(this.g,c)]}K(Cj,yj);Cj.prototype.measure=function(){};function Dj(a){Dj.h.constructor.call(this,a);this.type|=8388608;this.vk=0}K(Dj,yj);
Dj.prototype.measure=function(){this.width=this.minWidth;this.height=this.minHeight;for(var a=0,b=0,c;c=this.elements[b];b++)this.width+=c.width,c.type&128&&(c.type&512?a+=c.bf:c.type&64&&c.bf!=0&&(a+=c.bf-c.cc)),c.type&8||(this.height=Math.max(this.height,c.height));this.vk=a;this.Xb=this.width+a};Dj.prototype.nf=function(){return!this.Uc&&!this.ua};function Ej(a,b){this.T=b;this.ma=a;this.g=this.ma.C();this.u=b.u?new kj(this.g,b.u):null;this.we=wf(b)&&!b.isCollapsed();this.isCollapsed=b.isCollapsed();this.Ab=b.Ab();this.o=b.o;this.fd=this.width=this.Oe=this.height=0;this.rows=[];this.Xk=[];this.Sk=[];this.xa=new Aj(this.g);this.$=new Bj(this.g);this.Fh=this.Gb=0}g=Ej.prototype;
g.measure=function(){var a=!!this.T.A,b=(this.T.rd?this.T.rd==="cap":this.g.Pj)&&!this.u&&!a,c=this.xa.Ji(this.T)?vj:wj;this.xa.elements.push(new c(this.g));b?(a=new uj(this.g),this.xa.elements.push(a),this.xa.vc=a.ee):a&&(this.xa.zn=!0,this.xa.connection=new lj(this.g,this.T.A),this.xa.elements.push(this.xa.connection));this.T.m.length&&this.T.m[0].type==3&&!this.T.isCollapsed()?this.xa.minHeight=this.g.Tm:this.xa.minHeight=this.g.Sm;c=vj;this.xa.elements.push(new c(this.g,"right"));this.rows.push(this.xa);
a=new Dj(this.g);this.Xk.push(a);c=Mf(this.T);b=0;for(var d;d=c[b];b++){var e=new rj(this.g,d);this.isCollapsed&&d.Go?this.Sk.push(e):a.elements.push(e)}d=null;for(b=0;c=this.T.m[b];b++)if(c.isVisible()){!d||c.type!=3&&d.type!=3&&(c.type!=1&&c.type!=5||this.we)||(this.rows.push(a),a=new Dj(this.g),this.Xk.push(a));for(d=0;e=c.X[d];d++)a.elements.push(new tj(this.g,e,c));this.ik(c,a);d=c}this.isCollapsed&&(a.Ok=!0,a.elements.push(new sj(this.g)));(a.elements.length||a.te)&&this.rows.push(a);this.qj();
this.rows.push(this.$);this.hk();a=this.rows;this.rows=[];for(b=0;b<a.length;b++)if(this.rows.push(a[b]),b!=a.length-1){c=this.rows;d=c.push;e=a[b];var f=a[b+1],h=new Cj(this.g,this.Lk(e,f),this.width-this.Gb);e.ua&&(h.Ik=!0);f.ua&&(h.Xo=!0);d.call(c,h)}for(d=c=b=a=0;e=this.rows[d];d++)e.measure(),b=Math.max(b,e.width),e.ua&&(a=Math.max(a,e.width-zj(e).width)),c=Math.max(c,e.Xb);this.fd=a;this.width=b;for(d=0;e=this.rows[d];d++)e.ua&&(e.fd=this.fd);this.Oe=Math.max(b,c);this.u&&(this.Gb=this.u.width,
this.width+=this.u.width,this.Oe+=this.u.width);this.Ph();this.Gk()};g.qj=function(){this.$.Pk=!!this.T.D;this.$.minHeight=this.T.m.length&&this.T.m[this.T.m.length-1].type==3?this.g.om:this.g.pm;this.$.Ji(this.T)?this.$.elements.push(new vj(this.g)):this.$.elements.push(new wj(this.g));this.$.Pk&&(this.$.connection=new mj(this.g,this.T.D),this.$.elements.push(this.$.connection));this.$.elements.push(new vj(this.g,"right"))};
g.ik=function(a,b){this.we&&a.type==1?(b.elements.push(new oj(this.g,a)),b.Ii=!0):a.type==3?(b.elements.push(new pj(this.g,a)),b.ua=!0):a.type==1?(b.elements.push(new qj(this.g,a)),b.Uc=!0):a.type==5&&(b.minHeight=Math.max(b.minHeight,a.v()&&a.v().P?this.g.tm:this.g.Rj),b.te=!0);b.align==null&&(b.align=a.align)};
g.hk=function(){for(var a=0,b;b=this.rows[a];a++){var c=b.elements;b.elements=[];b.Gh()&&b.elements.push(new xj(this.g,this.pd(null,c[0])));if(c.length){for(var d=0;d<c.length-1;d++)b.elements.push(c[d]),b.elements.push(new xj(this.g,this.pd(c[d],c[d+1])));b.elements.push(c[c.length-1]);b.nf()&&b.elements.push(new xj(this.g,this.pd(c[c.length-1],null)))}}};
g.pd=function(a,b){if(!a&&b&&b.type&512)return this.g.dk;if(a&&a.type&128&&!b){if(a.type&64)return this.g.$b;if(a.type&256)return this.g.Sa;if(a.type&512)return this.g.$b}return a&&a.type&32768&&b&&(b.type&2048||b.type&4096)?b.Bb:a&&a.type&65536&&b&&(b.type&2048||b.type&4096)?b.Bb-this.g.Zb:this.g.qb};g.Ph=function(){for(var a=0,b;b=this.rows[a];a++)if(b.ua)Fj(this,b);else{var c=this.uf(b)-b.width;c>0&&Gj(b,c);b.type&6291456&&(b.Xb=b.width)}};g.uf=function(){return this.width-this.Gb};
function Gj(a,b){a:{var c=0;for(var d;d=a.elements[c];c++)if(d.type&8){c=d;break a}c=null}a:{d=a.elements.length-1;for(var e;e=a.elements[d];d--)if(e.type&8){d=e;break a}d=null}if(a.Uc||a.ua)a.Xb+=b;a.align==-1?d.width+=b:a.align==0?(c.width+=b/2,d.width+=b/2):a.align==1?c.width+=b:d.width+=b;a.width+=b}function Fj(a,b){var c=zj(b),d=b.width-c.width,e=a.fd;d=e-d;d>0&&Gj(b,d);d=b.width;e=a.uf(b);c.width+=e-d;c.height=Math.max(c.height,b.height);b.width+=e-d;b.Xb=Math.max(b.width,a.fd+b.vk)}g.Lk=function(){return this.g.qb};
g.Jk=function(a,b){return b.type&8?a.Aa+b.height/2:a.type&4194304?(a=a.Aa+a.height-a.jf,b.type&4096?a+b.height/2:a-b.height/2):a.type&2097152?b.type&2?a.vc-b.height/2:a.vc+b.height/2:a.Aa+a.height/2};function Hj(a,b){for(var c=b.M,d=0,e;e=b.elements[d];d++)e.type&8&&(e.height=b.height),e.M=c,e.fe=a.Jk(b,e),c+=e.width}
g.Gk=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++)d.Aa=b,d.M=this.Gb,b+=d.height,a=Math.max(a,d.Xb),Hj(this,d);this.u&&this.T.D&&this.T.D.isConnected()&&(a=Math.max(a,Of(this.T.D.H()).width));this.Oe=a+this.Gb;this.height=b;this.Fh=this.xa.vc;this.$.Jb=b-this.$.jf};function Ij(a,b){this.T=a;this.F=b;a.ba();this.Wg=this.R="";this.g=b.ma.C()}g=Ij.prototype;g.Mb=function(){Jj(this);Kj(this);Lj(this);this.T.ea.Dj(this.R+"\n"+this.Wg);this.F.o&&this.T.ea.zi();Mj(this)};function Mj(a){a.T.height=a.F.height;a.T.width=a.F.Oe}function Jj(a){for(var b=0,c;c=a.F.Sk[b];b++)c.icon.Dn.setAttribute("display","none")}function Kj(a){a.ri();for(var b=1;b<a.F.rows.length-1;b++){var c=a.F.rows[b];c.Ok?a.lf(c):c.ua?a.pi(c):c.Uc?a.si(c):a.Dk(c)}a.mi();a.oi()}
g.ri=function(){var a=this.F.xa,b=a.elements,c=this.F.xa;if(c.connection){var d=c.M+c.Bb;jh(c.connection.Ua,this.F.o?-d:d,0)}this.R+=Q(a.M,this.F.Fh);for(c=0;d=b[c];c++)d.type&65536?this.R+=this.g.Ue.Mj:d.type&262144?this.R+=this.g.Ue.po:d.type&2048?this.R+=d.shape.bd:d.type&2?this.R+=this.g.$d.path:d.type&8&&(this.R+=R("h",d.width));this.R+=R("v",a.height)};g.lf=function(a){this.R+=this.g.Yd.path+R("v",a.height-this.g.Yd.height)};
g.si=function(a){var b=zj(a);this.Kl(a);var c=typeof b.shape.Cb=="function"?b.shape.Cb(b.height):b.shape.Cb;this.R+=R("H",b.M+b.width)+c+R("v",a.height-b.je)};g.pi=function(a){var b=zj(a);this.R+=R("H",b.M+b.Bb+b.shape.width)+(b.shape.Fl+R("h",-(b.Bb-this.g.vg.width))+this.g.vg.pj)+R("v",a.height-2*this.g.vg.height)+this.g.vg.oh+R("H",a.M+a.width);this.Nl(a)};g.Dk=function(a){this.R+=R("V",a.Aa+a.height)};
g.mi=function(){var a=this.F.$,b=a.elements;this.Ml();for(var c=0,d="",e=b.length-1,f;f=b[e];e--)f.type&4096?d+=f.shape.Fl:f.type&32768?d+=R("H",a.M):f.type&65536?d+=this.g.Ue.Uh:f.type&262144?(d+=this.g.Ue.Xm,c=this.g.Ue.Yn):f.type&8&&(d+=R("h",f.width*-1));this.R+=R("V",a.Jb-c);this.R+=d};
g.oi=function(){var a=this.F.u;if(this.F.u){var b=this.F.Gb+this.F.u.cf;jh(this.T.u,this.F.o?-b:b,this.F.u.lb)}a&&(b=a.lb+a.height,a=typeof a.shape.Pf=="function"?a.shape.Pf(a.height):a.shape.Pf,this.R+=R("V",b)+a);this.R+="z"};
function Lj(a){for(var b=0,c;c=a.F.rows[b];b++)for(var d=0,e;e=c.elements[d];d++)if(e.type&256)a.ni(e);else if(e.type&4||e.type&1){var f=a;if(e.type&1)var h=e.Fk.O();else e.type&4&&(h=e.icon.Dn);var k=e.fe-e.height/2,l=e.M,m="";f.F.o&&(l=-(l+e.width),e.nn&&(l+=e.width,m="scale(-1 1)"));e.type&4?(h.setAttribute("display","block"),h.setAttribute("transform","translate("+l+","+k+")"),e.icon.an()):h.setAttribute("transform","translate("+l+","+k+")"+m);f.F.Ab&&h.setAttribute("display","none")}}
g.ni=function(a){var b=a.height,c=a.lb;this.Wg+=dj(a.M+a.cc,a.fe-b/2)+R("v",c)+a.shape.Cb+R("v",b-(a.je+c))+R("h",a.width-a.cc)+R("v",-b)+"z";this.Ll(a)};g.Ll=function(a){var b=a.fe-a.height/2;if(a.Ua){var c=a.M+a.cc+a.cf;this.F.o&&(c*=-1);jh(a.Ua,c,b+a.lb)}};g.Nl=function(a){var b=zj(a);if(b.Ua){var c=a.M+a.fd+b.Bb;this.F.o&&(c*=-1);jh(b.Ua,c,a.Aa)}};g.Kl=function(a){var b=zj(a);if(b.Ua){var c=a.M+a.width;this.F.o&&(c*=-1);jh(b.Ua,c,a.Aa)}};
g.Ml=function(){var a=this.F.$;if(a.connection){var b=a.connection,c=b.M;jh(b.Ua,this.F.o?-c:c,a.Jb)}};function Nj(a,b,c,d){var e=a?a.i.id:void 0;d&&d.getType()=="workspace"&&(e=d.L.id);Nj.h.constructor.call(this,e);this.Z=a?a.id:null;this.xl=c;this.tl=d;this.mc=b}K(Nj,Fd);Nj.prototype.type="marker_move";Nj.prototype.S=function(){var a=Nj.h.S.call(this);a.isCursor=this.mc;a.blockId=this.Z;a.oldNode=this.xl;a.newNode=this.tl;return a};Nj.prototype.K=function(a){Nj.h.K.call(this,a);this.mc=a.isCursor;this.Z=a.blockId;this.xl=a.oldNode;this.tl=a.newNode};q(p,"marker_move",Nj);function bi(a,b,c){this.j=a;this.aj=c;this.Of=null;this.g=b;this.le=null;a=this.mc()?this.g.Qj:this.g.Xj;this.sb=c.Zh||a}g=bi.prototype;g.O=function(){return this.G};g.vf=function(){return this.aj};g.mc=function(){return this.aj.type=="cursor"};
g.Fa=function(){var a=this.mc()?"blocklyCursor":"blocklyMarker";this.G=D(Ob,{"class":a},null);this.Gc=D(Ob,{width:this.g.sg,height:this.g.fk},this.G);this.Yc=D(Tb,{width:this.g.sg,height:this.g.fk},this.Gc);this.Dd=D(Tb,{"class":"blocklyVerticalMarker",rx:10,ry:10},this.Gc);this.Cd=D(Rb,{transform:""},this.Gc);this.Fc=D(Rb,{transform:"",fill:"none","stroke-width":this.g.sm},this.Gc);this.Bc();this.mc()&&(a={attributeType:"XML",attributeName:"fill",dur:"1s",values:this.sb+";transparent;transparent;",
repeatCount:"indefinite"},D(Gb,a,this.Yc),D(Gb,a,this.Cd),a.attributeName="stroke",D(Gb,a,this.Fc));return this.G};function Oj(a,b){a.mc()?(a.Of&&a.Of.Jc(null),b.Jc(a.O())):(a.Of&&a.Of.ed(null),b.ed(a.O()));a.Of=b}
g.Mb=function(a,b){if(b){this.g=this.j.ma.C();var c=this.mc()?this.g.Qj:this.g.Xj;this.sb=this.aj.Zh||c;this.Yc.setAttribute("fill",this.sb);this.Dd.setAttribute("stroke",this.sb);this.Cd.setAttribute("fill",this.sb);this.Fc.setAttribute("stroke",this.sb);this.mc()&&(c=this.sb+";transparent;transparent;",this.Yc.firstChild.setAttribute("values",c),this.Cd.firstChild.setAttribute("values",c),this.Fc.firstChild.setAttribute("values",c));c=b.L.type;if(b.getType()=="block")Pj(this,b);else if(b.getType()==
"output")Pj(this,b);else if(c==1){var d=b.L;c=d.v();var e=d.Hd.x,f=d.Hd.y;d=dj(0,0)+Kf(this.g,d).Cb;this.Cd.setAttribute("d",d);this.Cd.setAttribute("transform","translate("+e+","+f+")"+(this.j.o?" scale(-1 1)":""));this.le=this.Cd;Oj(this,c);Qj(this)}else if(c==3)f=b.L,c=f.v(),e=0,f=f.Hd.y,d=Of(c).width,this.j.o&&(e=-d),Rj(this,e,f,d),Oj(this,c),Qj(this);else if(b.getType()=="previous")Pj(this,b);else if(b.getType()=="field")c=b.L,e=c.getSize().width,f=c.getSize().height,Sj(this,0,0,e,f),Oj(this,
c),Qj(this);else if(b.getType()=="workspace")e=b.jm,c=e.x,e=e.y,this.j.o&&(c-=this.g.sg),Rj(this,c,e,this.g.sg),Oj(this,this.j),Qj(this);else if(b.getType()=="stack"){c=b.L;f=Of(c);e=f.width+this.g.rg;f=f.height+this.g.rg;var h=d=-this.g.rg/2,k=-this.g.rg/2;this.j.o&&(h=-(e+d));Sj(this,h,k,e,f);Oj(this,c);Qj(this)}c=b.v();a=new (B("marker_move"))(c,this.mc(),a,b);z(a);a=this.le.childNodes[0];a!==void 0&&a.beginElement&&a.beginElement()}else this.Bc()};
function Pj(a,b){b=b.v();var c=b.width,d=b.height,e=d*.75,f=a.g.rm;if(b.A){var h=Kf(a.g,b.A);a.Fc.setAttribute("d",Q(-f,e)+R("V",-f)+R("H",a.g.Te)+h.bd+R("H",c+f*2)+R("V",e))}else b.u?(h=Kf(a.g,b.u),a.Fc.setAttribute("d",Q(c,0)+R("h",-(c-h.width))+R("v",a.g.ae)+h.Cb+R("V",d)+R("H",c))):a.Fc.setAttribute("d",Q(-f,e)+R("V",-f)+R("H",c+f*2)+R("V",e));a.j.o&&a.rf(a.Fc);a.le=a.Fc;Oj(a,b);Qj(a)}function Qj(a){a.Bc();a.le.style.display=""}
function Rj(a,b,c,d){a.Yc.setAttribute("x",b);a.Yc.setAttribute("y",c);a.Yc.setAttribute("width",d);a.le=a.Yc}function Sj(a,b,c,d,e){a.Dd.setAttribute("x",b);a.Dd.setAttribute("y",c);a.Dd.setAttribute("width",d);a.Dd.setAttribute("height",e);a.le=a.Dd}g.rf=function(a){a.setAttribute("transform","scale(-1 1)")};g.Bc=function(){this.Yc.style.display="none";this.Dd.style.display="none";this.Cd.style.display="none";this.Fc.style.display="none"};g.dispose=function(){this.G&&F(this.G)};function Tj(a,b,c){this.df=c;this.tc=a;this.wa=D(Rb,{"class":"blocklyPath"},this.tc);this.style=b;this.$i=this.hf=null}g=Tj.prototype;g.Dj=function(a){this.wa.setAttribute("d",a)};g.zi=function(){this.wa.setAttribute("transform","scale(-1 1)")};g.Jc=function(a){a?(this.tc.appendChild(a),this.hf=a):this.hf=null};g.ed=function(a){a?(this.hf?this.tc.insertBefore(a,this.hf):this.tc.appendChild(a),this.$i=a):this.$i=null};
g.Ea=function(a){this.wa.setAttribute("stroke",this.style.ie);this.wa.setAttribute("fill",this.style.nd);this.$l(a.P);this.Nj(!a.isEnabled()||Sg(a))};g.He=function(a){this.style=a};function Jf(a,b,c){c?E(a.tc,b):ac(a.tc,b)}g.Zl=function(a){a?this.wa.setAttribute("filter","url(#"+this.df.ui+")"):this.wa.setAttribute("filter","none")};g.$l=function(a){a&&(this.wa.setAttribute("stroke","none"),this.wa.setAttribute("fill",this.style.Dg))};
g.Nj=function(a){Jf(this,"blocklyDisabled",a);a&&this.wa.setAttribute("fill","url(#"+this.df.Ck+")")};function gh(a,b){Jf(a,"blocklySelected",b)};function Uj(a){this.name=a;this.nj=this.g=null}g=Uj.prototype;g.Ob=function(){return this.name+"-renderer"};g.init=function(a,b){this.g=this.Vi();b&&(this.nj=b,qd(this.g,b));this.g.Zf(a);this.g.init()};g.Fa=function(a,b){this.g.Fa(a,this.name+"-"+b.name,"."+this.Ob()+"."+b.Ob())};g.tj=function(a,b){var c=this.C();c.dispose();this.g=this.Vi();this.nj&&qd(this.g,this.nj);this.g.uh=c.uh;this.g.Zf(b);this.g.init();this.Fa(a,b)};g.dispose=function(){this.g&&this.g.dispose()};g.Vi=function(){return new gj};
g.kl=function(a){return new Ej(this,a)};g.il=function(a,b){return new Ij(a,b)};g.jl=function(a,b){return new Tj(a,b,this.g)};g.C=function(){return this.g};g.U=function(a){var b=this.kl(a);b.measure();this.il(a,b).Mb()};function Vj(){Vj.h.constructor.call(this);this.Lh=!1;this.Ca=1;this.Im=30;this.ck=-this.Mh/2}K(Vj,gj);Vj.prototype.Bi=function(a){return Vj.h.Bi.call(this,a).concat([a+" .blocklyInsertionMarker>.blocklyPathLight,",a+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.Wj+";","stroke: none;","}"])};function Wj(a){this.F=a;this.Af=this.B="";this.Da=this.F.o;a=a.ma;this.g=a.C();this.mb=a.mb;this.eb=this.mb.OFFSET;this.mj=this.mb.Lm;this.ve=this.mb.Fm;this.Rf=this.mb.Nh;this.Ln=this.mb.Zd;this.io=this.mb.$d;this.bl=this.mb.Yd}Wj.prototype.lf=function(a){this.F.o&&(this.B+=this.bl.bd+R("v",a.height-this.bl.height-this.eb))};function Xj(a,b){var c=b.M+b.width-a.eb;b.Ik&&(a.B+=R("H",c));a.Da&&(a.B+=R("H",c),b.height>a.eb&&(a.B+=R("V",b.Aa+b.height-a.eb)))};function Yj(a,b){Yj.h.constructor.call(this,a,b);this.Qc&&(this.width+=this.g.Ca,this.height+=this.g.Ca)}K(Yj,oj);function Zj(a,b){Zj.h.constructor.call(this,a,b);this.Qc&&(this.height+=this.g.Ca)}K(Zj,pj);function ak(a,b){ak.h.constructor.call(this,a,b)}K(ak,Ej);g=ak.prototype;g.qj=function(){ak.h.qj.call(this);this.T.m.length&&this.T.m[this.T.m.length-1].type==3||(this.$.minHeight=this.g.qb-this.g.Ca)};g.ik=function(a,b){this.we&&a.type==1?(b.elements.push(new Yj(this.g,a)),b.Ii=!0):a.type==3?(b.elements.push(new Zj(this.g,a)),b.ua=!0):a.type==1?(b.elements.push(new qj(this.g,a)),b.Uc=!0):a.type==5&&(b.minHeight=Math.max(b.minHeight,this.g.Rj),b.te=!0);this.we||b.align!=null||(b.align=a.align)};
g.hk=function(){for(var a=!1,b=0,c;c=this.rows[b];b++)c.Uc&&(a=!0);for(b=0;c=this.rows[b];b++){var d=c.elements;c.elements=[];c.Gh()&&c.elements.push(new xj(this.g,this.pd(null,d[0])));if(d.length){for(var e=0;e<d.length-1;e++){c.elements.push(d[e]);var f=this.pd(d[e],d[e+1]);c.elements.push(new xj(this.g,f))}c.elements.push(d[d.length-1]);c.nf()&&(f=this.pd(d[d.length-1],null),a&&c.te&&(f+=this.g.Oh),c.elements.push(new xj(this.g,f)))}}};
g.pd=function(a,b){if(!a)return b&&b.type&1&&b.yb?this.g.qb:b&&b.type&256?this.g.Zj:b&&b.type&512?this.g.dk:this.g.Sa;if(!(a.type&128)&&(!b||b.type&512))return a.type&1&&a.yb?this.g.qb:a.type&4?this.g.Sa*2+1:a.type&2?this.g.$b:a.type&6144?this.g.Sa:a.type&65536?this.g.Jm:a.type&524288?this.g.$b:this.g.Sa;if(a.type&128&&!b){if(a.type&64)return this.g.$b;if(a.type&256)return this.g.Sa;if(a.type&512)return this.g.$b}if(!(a.type&128)&&b&&b.type&128){if(a.type&1&&a.yb){if(b.type&256||b.type&64)return this.g.Nm}else{if(b.type&
256||b.type&64)return this.g.Zj;if(b.type&512)return this.g.Sa}return this.g.Sa-1}if(a.type&4&&b&&!(b.type&128))return this.g.Sa;if(a.type&256&&b&&b.type&1)return b.yb?this.g.qb:this.g.Sa;if(a.type&32768&&b){if(b.type&2)return this.g.$b;if(b.type&2048)return b.Bb;if(b.type&4096)return a=(this.o?1:-1)*this.g.Ca/2,b.Bb+a}if(a.type&65536&&b){if(b.type&2048)return b.Bb-this.g.Zb;if(b.type&4096)return a=(this.o?1:-1)*this.g.Ca/2,b.Bb-this.g.Zb+a}return a.type&1&&b&&b.type&1&&a.yb==b.yb||b&&b.type&524288?
this.g.Sa:this.g.qb};g.Lk=function(a,b){return a.type&2097152&&b.type&4194304?this.g.um:a.type&2097152||b.type&4194304?this.g.$b:a.Uc&&b.Uc?this.g.Sa:!a.ua&&b.ua?this.g.nm:a.ua&&b.ua||!a.ua&&b.te||a.te?this.g.Sa:this.g.qb};
g.Jk=function(a,b){if(b.type&8)return a.Aa+b.height/2;if(a.type&4194304)return a=a.Aa+a.height-a.jf,b.type&4096?a+b.height/2:a-b.height/2;if(a.type&2097152)return b.type&2?a.vc-b.height/2:a.vc+b.height/2;var c=a.Aa;b.type&1||b.type&4?(c+=b.height/2,(a.Ii||a.ua)&&b.height+this.g.ek<=a.height&&(c+=this.g.ek)):c=b.type&256?c+b.height/2:c+a.height/2;return c};
g.Ph=function(){if(this.we){for(var a=0,b=null,c=this.rows.length-1,d;d=this.rows[c];c--)d.ej=a,d.type&8388608&&(d.ua&&Fj(this,d),b&&b.ua&&d.width<b.width?d.ej=b.width:a=d.width,b=d);for(c=a=0;d=this.rows[c];c++)d.ua?a=this.uf(d):d.type&8?d.width=Math.max(a,d.ej):(a=Math.max(a,d.ej)-d.width,a>0&&Gj(d,a),a=d.width)}else ak.h.Ph.call(this)};g.uf=function(a){return this.we&&a.ua?this.fd+this.g.Im+this.Gb:ak.h.uf.call(this,a)};
g.Gk=function(){for(var a=0,b=0,c=0,d;d=this.rows[c];c++){d.Aa=b;d.M=this.Gb;b+=d.height;a=Math.max(a,d.Xb);var e=b-this.xa.ee;d==this.$&&e<this.g.wg&&(e=this.g.wg-e,this.$.height+=e,b+=e);Hj(this,d)}this.u&&this.T.D&&this.T.D.isConnected()&&(a=Math.max(a,Of(this.T.D.H()).width-this.g.Ca));this.$.Jb=b-this.$.jf;this.Oe=a+this.Gb+this.g.Ca;this.width+=this.g.Ca;this.height=b+this.g.Ca;this.Fh=this.xa.vc};function bk(a,b){bk.h.constructor.call(this,a,b);this.kc=new Wj(b)}K(bk,Ij);g=bk.prototype;g.Mb=function(){Jj(this);Kj(this);Lj(this);var a=this.T.ea;a.Dj(this.R+"\n"+this.Wg);var b=this.kc;a.Od.setAttribute("d",b.B+"\n"+b.Af);this.F.o&&a.zi();Mj(this)};
g.ri=function(){var a=this.kc,b=this.F.xa;a.B+=Q(b.M,a.F.Fh);for(var c=0,d;d=b.elements[c];c++)d.type&32768?a.B+=a.mb.bk:d.type&65536?a.B+=a.mj.Mj(a.Da):d.type&2048?a.B+=a.Ln.bd:d.type&2?a.B+=a.io.path(a.Da):d.type&8&&d.width!=0&&(a.B+=R("H",d.M+d.width-a.eb));a.B+=R("H",b.M+b.width-a.eb);Xj(this.kc,this.F.xa);bk.h.ri.call(this)};g.lf=function(a){this.kc.lf(a);bk.h.lf.call(this,a)};
g.si=function(a){var b=this.kc,c=zj(a);if(b.Da){var d=a.height-c.je;b.B+=dj(c.M+c.width-b.eb,a.Aa)+b.Rf.Cb(b.Da)+R("v",d)}else b.B+=dj(c.M+c.width,a.Aa)+b.Rf.Cb(b.Da);bk.h.si.call(this,a)};g.pi=function(a){var b=this.kc,c=zj(a);if(b.Da){var d=a.height-2*b.ve.height;b.B+=dj(c.M,a.Aa)+b.ve.pj(b.Da)+R("v",d)+b.ve.oh(b.Da)+ej(a.width-c.M-b.ve.width,0)}else b.B+=dj(c.M,a.Aa+a.height)+b.ve.oh(b.Da)+ej(a.width-c.M-b.ve.width,0);bk.h.pi.call(this,a)};
g.Dk=function(a){Xj(this.kc,a);this.R+=R("H",a.M+a.width)+R("V",a.Aa+a.height)};g.mi=function(){var a=this.kc,b=this.F.$;if(a.Da)a.B+=R("V",b.Jb-a.eb);else{var c=a.F.$.elements[0];c.type&32768?a.B+=dj(b.M+a.eb,b.Jb-a.eb):c.type&65536&&(a.B+=dj(b.M,b.Jb),a.B+=a.mj.Uh())}bk.h.mi.call(this)};
g.oi=function(){var a=this.kc,b=a.F.u;b&&(b=b.lb+b.height,a.Da?a.B+=dj(a.F.Gb,b):(a.B+=dj(a.F.Gb+a.eb,a.F.$.Jb-a.eb),a.B+=R("V",b)),a.B+=a.Rf.Pf(a.Da));a.Da||(b=a.F.xa,a.B=b.elements[0].type&65536?a.B+R("V",a.mj.height):a.B+R("V",b.vc+a.eb));bk.h.oi.call(this)};
g.ni=function(a){var b=this.kc,c=b.eb,d=a.M+a.cc,e=a.fe-a.height/2,f=a.width-a.cc,h=e+c;b.Da?(e=a.height-(a.lb+a.je)+c,b.Af+=dj(d-c,h)+R("v",a.lb-c)+b.Rf.Cb(b.Da)+R("v",e)+R("h",f)):b.Af+=dj(a.M+a.width+c,h)+R("v",a.height)+R("h",-f)+dj(d,e+a.lb)+b.Rf.Cb(b.Da);bk.h.ni.call(this,a)};g.Ll=function(a){var b=a.fe-a.height/2;if(a.Ua){var c=a.M+a.cc+this.g.Ca;this.F.o&&(c*=-1);jh(a.Ua,c,b+a.lb+this.g.Ca)}};
g.Nl=function(a){var b=zj(a);if(b.Ua){var c=a.M+a.fd+b.Bb;c=this.F.o?c*-1:c+this.g.Ca;jh(b.Ua,c,a.Aa+this.g.Ca)}};g.Kl=function(a){var b=zj(a);if(b.Ua){var c=a.M+a.width+this.g.Ca;this.F.o&&(c*=-1);jh(b.Ua,c,a.Aa)}};g.Ml=function(){var a=this.F.$;if(a.connection){var b=a.connection,c=b.M;jh(b.Ua,(this.F.o?-c:c)+this.g.Ca/2,a.Jb+this.g.Ca)}};function ck(a){this.ke=a;this.OFFSET=.5;this.bk=Q(this.OFFSET,this.OFFSET)}g=ck.prototype;g.init=function(){this.Fm=dk(this);this.Lm=ek(this);this.Nh=this.Yi();this.Zd=this.Xi();this.Yd=this.Wi();this.$d=this.Zi()};function dk(a){var b=a.ke.Zb;a=a.OFFSET;var c=(1-Math.SQRT1_2)*(b+a)-a,d=Q(c,c)+fj("0 0,0",b,Y(-c-a,b-c)),e=fj("0 0,0",b+a,Y(b+a,b+a)),f=Q(c,-c)+fj("0 0,0",b+a,Y(b-c,c+a));return{width:b+a,height:b,pj:function(h){return h?d:""},oh:function(h){return h?e:f}}}
function ek(a){var b=a.ke.Zb;a=a.OFFSET;var c=(1-Math.SQRT1_2)*(b-a)+a,d=Q(c,c)+fj("0 0,1",b-a,Y(b-c,-c+a)),e=Q(a,b)+fj("0 0,1",b-a,Y(b,-b+a)),f=-c,h=Q(c,f)+fj("0 0,1",b-a,Y(-c+a,-f-b));return{height:b,Mj:function(k){return k?d:e},Uh:function(){return h}}}
g.Yi=function(){var a=this.ke.Oh,b=this.ke.We,c=Q(-2,-b+2.5+.9)+ej(a*-.45,-2.1),d=R("v",2.5)+Q(-a*.97,2.5)+cj("q",[Y(-a*.05,10),Y(a*.3,9.5)])+Q(a*.67,-1.9)+R("v",2.5),e=R("v",-1.5)+Q(a*-.92,-.5)+cj("q",[Y(a*-.19,-5.5),Y(0,-11)])+Q(a*.92,1),f=Q(-5,b-.7)+ej(a*.46,-2.1);return{width:a,height:b,Pf:function(h){return h?c:e},Cb:function(h){return h?d:f}}};g.Xi=function(){return{bd:R("h",this.OFFSET)+this.ke.Zd.bd}};g.Wi=function(){return{bd:ej(5.1,2.6)+Q(-10.2,6.8)+ej(5.1,2.6),height:12,width:10.2}};
g.Zi=function(){var a=Q(25,-8.7)+cj("c",[Y(29.7,-6.2),Y(57.2,-.5),Y(75,8.7)]),b=cj("c",[Y(17.8,-9.2),Y(45.3,-14.9),Y(75,-8.7)])+dj(100.5,this.ke.$d.height+.5);return{path:function(c){return c?a:b}}};function fk(a,b,c){this.df=c;this.tc=a;this.fg=D(Rb,{"class":"blocklyPathDark",transform:"translate(1,1)"},this.tc);this.wa=D(Rb,{"class":"blocklyPath"},this.tc);this.Od=D(Rb,{"class":"blocklyPathLight"},this.tc);this.$h="#000000";this.style=b}K(fk,Tj);g=fk.prototype;g.Dj=function(a){this.wa.setAttribute("d",a);this.fg.setAttribute("d",a)};g.zi=function(){this.wa.setAttribute("transform","scale(-1 1)");this.Od.setAttribute("transform","scale(-1 1)");this.fg.setAttribute("transform","translate(1,1) scale(-1 1)")};
g.Ea=function(a){this.Od.style.display="";this.fg.style.display="";this.Od.setAttribute("stroke",this.style.ie);this.fg.setAttribute("fill",this.$h);fk.h.Ea.call(this,a);this.wa.setAttribute("stroke","none")};g.He=function(a){this.style=a;this.$h=Ia("#000",this.style.nd,.2)||this.$h};g.Zl=function(a){a?(this.wa.setAttribute("filter","url(#"+this.df.ui+")"),this.Od.style.display="none"):(this.wa.setAttribute("filter","none"),this.Od.style.display="inline")};
g.$l=function(a){a&&(this.Od.style.display="none",this.fg.setAttribute("fill",this.style.Dg),this.wa.setAttribute("stroke","none"),this.wa.setAttribute("fill",this.style.Dg))};g.Nj=function(a){fk.h.Nj.call(this,a);a&&this.wa.setAttribute("stroke","none")};function gk(a){gk.h.constructor.call(this,a);this.mb=null}K(gk,Uj);g=gk.prototype;g.init=function(a,b){gk.h.init.call(this,a,b);this.mb=new ck(this.C());this.mb.init()};g.tj=function(a,b){gk.h.tj.call(this,a,b);this.mb.init()};g.Vi=function(){return new Vj};g.kl=function(a){return new ak(this,a)};g.il=function(a,b){return new bk(a,b)};g.jl=function(a,b){return new fk(a,b,this.C())};q(wa,"geras",gk);(function(){var a={name:"escape",qa:function(b){return!b.options.readOnly},ga:function(){M();return!0}};ui.register(a);U(27,a.name)})();(function(){var a={name:"delete",qa:function(b){return!b.options.readOnly&&P&&mc(P)},ga:function(b,c){c.preventDefault();if(kg())return!1;Ei(P);return!0}};ui.register(a);U(46,a.name);U(8,a.name)})();
(function(){var a={name:"copy",qa:function(c){return!c.options.readOnly&&!kg()&&P&&mc(P)&&P.Ma()},ga:function(c,d){d.preventDefault();M();Fi(P);return!0}};ui.register(a);var b=V(67,[17]);U(b,a.name);b=V(67,[18]);U(b,a.name);b=V(67,[91]);U(b,a.name)})();(function(){var a={name:"cut",qa:function(c){return!c.options.readOnly&&!kg()&&P&&mc(P)&&P.Ma()&&!P.i.yd},ga:function(){Fi(P);Ei(P);return!0}};ui.register(a);var b=V(88,[17]);U(b,a.name);b=V(88,[18]);U(b,a.name);b=V(88,[91]);U(b,a.name)})();
(function(){var a={name:"paste",qa:function(c){return!c.options.readOnly&&!kg()},ga:function(){return Gi()}};ui.register(a);var b=V(86,[17]);U(b,a.name);b=V(86,[18]);U(b,a.name);b=V(86,[91]);U(b,a.name)})();(function(){var a={name:"undo",qa:function(c){return!c.options.readOnly&&!kg()},ga:function(c){M();ef(c,!1);return!0}};ui.register(a);var b=V(90,[17]);U(b,a.name);b=V(90,[18]);U(b,a.name);b=V(90,[91]);U(b,a.name)})();
(function(){var a={name:"redo",qa:function(c){return!kg()&&!c.options.readOnly},ga:function(c){M();ef(c,!0);return!0}};ui.register(a);var b=V(90,[16,17]);U(b,a.name);b=V(90,[16,18]);U(b,a.name);b=V(90,[16,91]);U(b,a.name);b=V(89,[17]);U(b,a.name)})();var hk=null,ik=null;function jk(){var a=hk();kk("app="+encodeURIComponent(Wi)+"&data="+encodeURIComponent(a))}var lk=new Map;
function kk(a){var b="/scripts/storage.py",c=mk;var d=d===void 0?"POST":d;lk.has(b)&&lk.get(b).abort();var e=new XMLHttpRequest;lk.set(b,e);e.onload=function(){this.status===200?c&&c.call(e):nk(X("Games.httpRequestError",!1)+"\nXHR status: "+e.status);lk.delete(b)};d==="POST"?(e.open(d,b),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(a)):(a&&(b+="?"+a),e.open(d,b),e.send())}
function mk(){window.location.hash=this.responseText.trim();nk(X("Games.linkAlert",!1).replace("%1",window.location.href));ik=hk()}function nk(a){if(typeof Z==="object"){var b=W("linkButton");Z.mo(b,a)}else alert(a)};var O=null,ok="";function pk(){var a=X("Games.puzzle",!0);Ui(a);if(a=W("linkButton"))Li?a.style.display="none":(hk=qk,Xi(a,jk));(a=W("languageMenu"))&&a.addEventListener("change",rk,!0)}
function qk(){for(var a=O,b=G("xml"),c=Ue(a),d=Object.create(null),e=0;e<c.length;e++){var f=Bc(c[e]);if(f)for(var h=0;h<f.length;h++){var k=f[h],l=k.cb();l&&(d[l]=k)}}c=[];for(l in d)c.push(d[l]);d=G("variables");for(l=0;e=c[l];l++)f=G("variable"),f.appendChild(document.createTextNode(e.name)),e.type&&f.setAttribute("type",e.type),f.id=e.cb(),d.appendChild(f);d.hasChildNodes()&&b.appendChild(d);l=[].concat(a.Hh);l.length>1&&(a.qc.offset=Math.sin(3*Math.PI/180),a.o&&(a.qc.offset*=-1),l.sort(a.qc));
for(d=0;c=l[d];d++)b.appendChild(c.fp(!0));a=a.Xa(!0);for(d=0;l=a[d];d++)b.appendChild(ic(l,!0));O.Xa(!1).length===1&&b.querySelector&&(a=b.querySelector("block"))&&(a.removeAttribute("x"),a.removeAttribute("y"));return nc(b)}function sk(){ik!==null&&ik!==qk()&&(window.location.hash="",ik=null)}function tk(){var a={rtl:Ki,scrollbars:!1,trashcan:!1},b=W("toolbox");b&&(a.toolbox=b);a.media="third-party/blockly/media/";a.oneBasedIndex=!1;O=fi("blockly",a);O.Ec.push(sk)}
function uk(){window.location=(Li?"index.html":"./")+"?lang="+Ii}function rk(){window.sessionStorage&&(window.sessionStorage.hl=qk());var a=W("languageMenu");a=encodeURIComponent(a.options[a.selectedIndex].value);var b=window.location.search;b=b.length<=1?"?lang="+a:/[?&]lang=[^&]*/.test(b)?b.replace(/([?&]lang=)[^&]*/,"$1"+a):b.replace(/\?/,"?lang="+a+"&");window.location=window.location.protocol+"//"+window.location.host+window.location.pathname+b};var Z={Dc:!1,zk:null,Ig:null,Jg:null,Lg:null,Kg:null,Ch:function(a,b,c,d,e,f){function h(){if(Z.Dc){m.style.visibility="visible";m.style.zIndex=10;n.style.visibility="hidden";var v=a.getElementsByClassName("primary");v.length||(v=a.getElementsByClassName("secondary"),v.length||(v=a.getElementsByTagName("button")));v.length&&v[0].focus()}}if(!a)throw TypeError("Content not found: "+a);for(var k=a.getElementsByClassName("addHideHandler"),l;l=k[0];)l.addEventListener("click",Z.Ug,!0),l.addEventListener("touchend",
Z.Ug,!0),l.classList.remove("addHideHandler");Z.Dc&&Z.Ug(!1);nd&&M(!0);Z.Dc=!0;Z.zk=b;Z.Ig=f;var m=W("dialog");f=W("dialogShadow");var n=W("dialogBorder"),u;for(u in e)m.style[u]=e[u];d&&(f.style.visibility="visible",f.style.opacity=.3,f.style.zIndex=9,d=document.createElement("div"),d.id="dialogHeader",m.appendChild(d),Z.Jg=Oc(d,"mousedown",Z.hn));m.appendChild(a);a.classList.remove("dialogHiddenContent");try{b.blur()}catch(v){}c&&b?(Z.fh(b,!1,.2),Z.fh(m,!0,.8),setTimeout(h,175)):h()},Ak:0,Bk:0,
hn:function(a){Z.gi();if(!mb(a)){var b=W("dialog");Z.Ak=b.offsetLeft-a.clientX;Z.Bk=b.offsetTop-a.clientY;Z.Lg=Oc(document,"mouseup",Z.gi);Z.Kg=Oc(document,"mousemove",Z.jn);a.stopPropagation()}},jn:function(a){var b=W("dialog"),c=Z.Ak+a.clientX;a=Z.Bk+a.clientY;a=Math.max(a,0);a=Math.min(a,window.innerHeight-b.offsetHeight);c=Math.max(c,0);c=Math.min(c,window.innerWidth-b.offsetWidth);b.style.left=c+"px";b.style.top=a+"px"},gi:function(){Z.Lg&&(I(Z.Lg),Z.Lg=null);Z.Kg&&(I(Z.Kg),Z.Kg=null)},Ug:function(a){function b(){d.style.zIndex=
-1;d.style.visibility="hidden";W("dialogBorder").style.visibility="hidden"}a=a===void 0?!0:a;if(Z.Dc){Z.gi();Z.Jg&&(I(Z.Jg),Z.Jg=null);Z.Dc=!1;Z.Ig&&Z.Ig();Z.Ig=null;var c=a?Z.zk:null;a=W("dialog");var d=W("dialogShadow");d.style.opacity=0;c&&a?(Z.fh(a,!1,.8),Z.fh(c,!0,.2),setTimeout(b,175)):b();a.style.visibility="hidden";a.style.zIndex=-1;for((c=W("dialogHeader"))&&c.parentNode.removeChild(c);a.firstChild;)c=a.firstChild,c.classList.add("dialogHiddenContent"),document.body.appendChild(c)}},fh:function(a,
b,c){function d(){e.style.width=f.width+"px";e.style.height=f.height+"px";e.style.left=f.x+"px";e.style.top=f.y+"px";e.style.opacity=c}if(a){var e=W("dialogBorder"),f=Z.getBBox(a);b?(e.className="dialogAnimate",setTimeout(d,1)):(e.className="",d());e.style.visibility="visible"}},getBBox:function(a){var b=Wa(a);b={x:b.x,y:b.y};a.getBBox?(a=a.getBBox(),b.height=a.height,b.width=a.width):(b.height=a.offsetHeight,b.width=a.offsetWidth);return b},mo:function(a,b){var c=W("containerStorage");c.textContent=
"";b=ba(b.split("\n"));for(var d=b.next();!d.done;d=b.next()){var e=document.createElement("p");e.appendChild(document.createTextNode(d.value));c.appendChild(e)}c=W("dialogStorage");Z.Ch(c,a,!0,!0,{width:"50%",left:"25%",top:"5em"},Z.Jj);Z.Ij()},Wm:function(){if(!Vi(Ni))if(Z.Dc||O.xb())setTimeout(Z.Wm,15E3);else{var a=W("dialogAbort"),b=W("abortOk");b.addEventListener("click",uk,!0);b.addEventListener("touchend",uk,!0);Z.Ch(a,null,!1,!0,{width:"40%",left:"30%",top:"3em"},function(){document.body.removeEventListener("keydown",
Z.gk,!0)});document.body.addEventListener("keydown",Z.gk,!0)}},ei:function(a){!Z.Dc||a.keyCode!==13&&a.keyCode!==27&&a.keyCode!==32||(Z.Ug(!0),a.stopPropagation(),a.preventDefault())},Ij:function(){document.body.addEventListener("keydown",Z.ei,!0)},Jj:function(){document.body.removeEventListener("keydown",Z.ei,!0)},gk:function(a){Z.ei(a);a.keyCode!==13&&a.keyCode!==32||uk()}};window.BlocklyDialogs=Z;
function vk(){return[{name:X("Puzzle.animal1",!1),ph:"duck.jpg",qh:70,rh:100,dh:2,kg:[X("Puzzle.animal1Trait1",!1),X("Puzzle.animal1Trait2",!1)],Rb:X("Puzzle.animal1HelpUrl",!1)},{name:X("Puzzle.animal2",!1),ph:"cat.jpg",qh:70,rh:100,dh:4,kg:[X("Puzzle.animal2Trait1",!1),X("Puzzle.animal2Trait2",!1)],Rb:X("Puzzle.animal2HelpUrl",!1)},{name:X("Puzzle.animal3",!1),ph:"bee.jpg",qh:70,rh:100,dh:6,kg:[X("Puzzle.animal3Trait1",!1),X("Puzzle.animal3Trait2",!1)],Rb:X("Puzzle.animal3HelpUrl",!1)},{name:X("Puzzle.animal4",
!1),ph:"snail.jpg",qh:70,rh:100,dh:0,kg:[X("Puzzle.animal4Trait1",!1),X("Puzzle.animal4Trait2",!1)],Rb:X("Puzzle.animal4HelpUrl",!1)}]};function wk(){return'\n<div class="farSide farSideButtons">\n  <button class="secondary addHideHandler">'+Yi(t.DIALOG_OK)+"</button>\n</div>\n"};function xk(){var a={lang:Ii,Bn:Li},b=X("Games.puzzle",!0),c='<button id="checkButton" class="primary">'+X("Puzzle.checkAnswers",!0)+"</button>";var d='\n&nbsp;\n<button id="helpButton">'+X("Games.help",!0)+"</button>\n";c&&(c=" &nbsp; "+c);b='\n<span id="title">\n  <a href="'+(a.Bn?"index.html":"./")+"?lang="+a.lang+'">'+X("Games.name",!0)+"</a> : "+b+"\n</span>\n";if(a.level){for(var e=" &nbsp ",f=1;f<=a.In;f++){var h="?lang="+a.lang+"&level="+f;e+=" ";e=f===a.level?e+('<span class="level_number level_done" id="level'+
f+'">'+f+"</span>"):f===a.In?e+('<a class="level_number" id="level'+f+'" href="'+h+'">'+f+"</a>"):e+('<a class="level_dot" id="level'+f+'" href="'+h+'"></a>')}a=e}else a="";return'\n\n<table width="100%">\n  <tr>\n    <td>\n      <h1>\n        '+(b+"\n        "+a+'\n      </h1>\n    </td>\n    <td id="header_cta" class="farSide">\n      <select id="languageMenu"></select>\n      \n      '+d+"\n      "+c+'\n    </td>\n  </tr>\n</table>\n\n\n<div id="blockly"></div>\n\n\n<div id="dialogShadow" class="dialogAnimate"></div>\n<div id="dialogBorder"></div>\n<div id="dialog"></div>\n\n<div id="help" class="dialogHiddenContent">\n  <div>')+
X("Puzzle.helpText",!0)+'</div>\n  <div id="sample" class="readonly"></div>\n  '+wk()+'\n</div>\n<div id="answers" class="dialogHiddenContent">\n  <div id="answerMessage">\n  </div>\n  <div id="graph"><div id="graphValue"></div></div>\n  '+wk()+"\n</div>\n"};function yk(a,b,c){typeof a!="function"&&(zk(a),a=JSON.parse(JSON.stringify(a)));this.ze=a;this.Kj=this.rj=this.Pg=null;a=this.ze;if(Array.isArray(a)){for(var d=!1,e=0;e<a.length;e++){var f=a[e][0];typeof f=="string"?a[e][0]=ob(f):(f.alt!=null&&(a[e][0].alt=ob(f.alt)),d=!0)}if(!(d||a.length<2)){f=[];for(e=0;e<a.length;e++)f.push(a[e][0]);var h=Oa(f);e=Pa(f,h);d=Qa(f,h);if((e||d)&&!(h<=e+d)){e&&(this.rj=f[0].substring(0,e-1));d&&(this.Kj=f[0].substr(1-d));f=[];for(h=0;h<a.length;h++){var k=a[h][0],
l=a[h][1];k=k.substring(e,k.length-d);f[h]=[k,l]}this.ze=f}}}this.Ee=Ak(this,!1)[0];yk.h.constructor.call(this,this.Ee[1],b,c);this.Ke=this.ld=this.Ya=this.Za=this.Uf=null}K(yk,xg);yk.K=function(a){return new yk(a.options,void 0,a)};yk.prototype.Ai=function(a){typeof this.ze=="function"&&Ak(this,!1);wd(this,a.textContent)};yk.prototype.$j=!0;var Bk=ab?"\u25bc":"\u25be";g=yk.prototype;g.qm="default";
g.Vg=function(){!this.C().Uj||this.C().Uj&&!this.l.P?Ag(this):this.rk=this.l.O();Bg(this);this.Ya=D(Pb,{},this.bb);this.C().Bm?(this.Ke=D(Pb,{height:this.C().Re+"px",width:this.C().Re+"px"},this.bb),this.Ke.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.C().Cm)):(this.ld=D(Wb,{},this.Qa),this.ld.appendChild(document.createTextNode(this.l.o?Bk+" ":" "+Bk)),this.l.o?this.Qa.insertBefore(this.ld,this.Pd):this.Qa.appendChild(this.ld));this.sa&&E(this.sa,"blocklyDropdownRect")};
g.Dh=function(a){var b=new Tg;b.Xf("listbox");this.Za=b;var c=Ak(this,!1);this.Uf=null;for(var d=0;d<c.length;d++){var e=c[d][0],f=c[d][1];if(typeof e=="object"){var h=new Image(e.width,e.height);h.src=e.src;h.alt=e.alt||"";e=h}e=new Xg(e,f);e.Xf("option");e.yj=this.l.o;e.Xh=!0;b.Tb.push(e);e.Yh=f==this.hb;f==this.hb&&(this.Uf=e);Yg(e,this.tn,this)}this.Za.lj=a&&typeof a.clientX==="number"?new w(a.clientX,a.clientY):null;this.Za.U(Yc);E(this.Za.Ga,"blocklyDropdownMenu");this.C().Am&&(a=this.l.P?this.l.getParent().Ci():
this.l.Ci(),b=this.l.P?this.l.getParent().style.ie:this.l.style.ie,Xc.style.backgroundColor=a,Xc.style.borderColor=b);a=this.ln.bind(this);this.sa?(f=this.sa.getBoundingClientRect(),c=Wa(this.sa),d=f.width,f=f.height):(f=Of(this.l),b=this.l.i.scale,c=Wa(zg(this)),d=f.width*b,f=f.height*b,$a?(c.x+=1.5*b,c.y+=1.5*b):Ya||Xa||(c.x-=.5*b,c.y-=.5*b),d+=1*b,f+=1*b);b=new Na(c.y,c.y+f,c.x,c.x+d);d=new Na(b.top,b.bottom,b.left,b.right);b=d.left+(d.right-d.left)/2;c=d.bottom;d=d.top;f=this.v();for(e=f.i;e.options.fb;)e=
e.options.fb;$c=L(e).parentNode;f=f.o;ad=this;cd=a||null;a=Xc;a.style.direction=f?"rtl":"ltr";f=nd;dd=f.ma.Ob();ed=f.Ac().Ob();E(a,dd);E(a,ed);a=Wa($c);f=Ua($c);a={left:a.x,right:a.x+f.width,top:a.y,bottom:a.y+f.height,width:f.width,height:f.height};f=Ua(Xc);c+f.height<a.bottom?a=hd(b,c,a,f):d-f.height>a.top?a=jd(b,d,a,f):c+f.height<document.documentElement.clientHeight?a=hd(b,c,a,f):d-f.height>document.documentElement.clientTop?a=jd(b,d,a,f):(a=id(b,a.left,a.right,f.width),a={Mi:a.oe,Ni:0,xi:a.oe,
yi:0,Qh:null,ce:null,Sh:null,Rh:!1});d=a;d.Rh?(Zc.style.display="",Zc.style.transform="translate("+d.ce+"px,"+d.Sh+"px) rotate(45deg)",Zc.setAttribute("class",d.Qh?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Zc.style.display="none";a=Math.floor(d.Mi);b=Math.floor(d.Ni);c=Math.floor(d.xi);d=Math.floor(d.yi);f=Xc;f.style.left=a+"px";f.style.top=b+"px";f.style.display="block";f.style.opacity=1;f.style.transform="translate("+(c-a)+"px,"+(d-b)+"px)";this.Za.focus();
this.Uf&&this.Za.Kc(this.Uf);this.Ea()};g.ln=function(){this.Za&&this.Za.dispose();this.Uf=this.Za=null;this.Ea()};g.tn=function(a){ad===this&&ld();wd(this,a.hb)};function Ak(a,b){return typeof a.ze=="function"?(a.Pg&&b||(a.Pg=a.ze.call(a),zk(a.Pg)),a.Pg):a.ze}
g.Mg=function(a){for(var b=!1,c=Ak(this,!0),d=0,e;e=c[d];d++)if(e[1]==a){b=!0;break}return b?a:(this.l&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.l.type+", Field name: "+this.name+", Value: "+a),null)};g.kf=function(a){yk.h.kf.call(this,a);a=Ak(this,!0);for(var b=0,c;c=a[b];b++)c[1]==this.hb&&(this.Ee=c)};
g.Ea=function(){this.sa&&(this.sa.setAttribute("stroke",this.l.style.ie),this.Za?this.sa.setAttribute("fill",this.l.style.ie):this.sa.setAttribute("fill","transparent"));this.l&&this.ld&&(this.ld.style.fill=this.l.P?this.l.style.Dg:this.l.style.nd)};
g.wj=function(){this.Pd.nodeValue="";this.Ya.style.display="none";var a=this.Ee&&this.Ee[0];if(a&&typeof a=="object"){this.Ya.style.display="";this.Ya.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a.src);this.Ya.setAttribute("height",a.height);this.Ya.setAttribute("width",a.width);var b=Number(a.height);a=Number(a.width);var c=!!this.sa,d=Math.max(c?this.C().Tj:0,b+10);c=c?this.C().Qe:0;if(this.Ke)var e=Ck(this,a+c,d/2-this.C().Re/2);else{e=this.ld;var f=this.C().Se,h=this.C().Xd,k=this.C().Wd;
e=hc(e,f+"pt",h,k)}this.Pa.width=a+e+c*2;this.Pa.height=d;f=0;this.l.o?this.Ya.setAttribute("x",c+e):(f=a+e,this.Qa.setAttribute("text-anchor","end"),this.Ya.setAttribute("x",c));this.Ya.setAttribute("y",d/2-b/2);Dg(this,f+c,a+e)}else this.Pd.nodeValue=Cg(this),E(this.Qa,"blocklyDropdownText"),this.Qa.setAttribute("text-anchor","start"),a=!!this.sa,b=Math.max(a?this.C().Tj:0,this.C().ug),d=this.Qa,c=this.C().Se,e=this.C().Xd,f=this.C().Wd,d=hc(d,c+"pt",e,f),a=a?this.C().Qe:0,c=0,this.Ke&&(c=Ck(this,
d+a,b/2-this.C().Re/2)),this.Pa.width=d+c+a*2,this.Pa.height=b,Dg(this,a,d);Eg(this)};function Ck(a,b,c){if(!a.Ke)return 0;var d=a.sa?a.C().Qe:0,e=a.C().Dm,f=a.C().Re;a.Ke.setAttribute("transform","translate("+(a.l.o?d:b+e)+","+c+")");return f+e}g.Fi=function(){if(!this.Ee)return null;var a=this.Ee[0];return typeof a=="object"?a.alt:a};
function zk(a){if(!Array.isArray(a))throw TypeError("FieldDropdown options must be an array.");if(!a.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var b=!1,c=0;c<a.length;++c){var d=a[c];Array.isArray(d)?typeof d[1]!="string"?(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option id must be a string. Found "+d[1]+" in: ",d)):d[0]&&typeof d[0]!="string"&&typeof d[0].src!="string"&&(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must have a string label or image description. Found"+
d[0]+" in: ",d)):(b=!0,console.error("Invalid option["+c+"]: Each FieldDropdown option must be an array. Found: ",d))}if(b)throw TypeError("Found invalid FieldDropdown options.");}q(va,"field_dropdown",yk);function Dk(a,b,c,d,e,f,h){if(!a)throw Error("Src value of an image field is required");a=ob(a);c=Number(ob(c));b=Number(ob(b));if(isNaN(c)||isNaN(b))throw Error("Height and width values of an image field must cast to numbers.");if(c<=0||b<=0)throw Error("Height and width values of an image field must be greater than 0.");this.rf=!1;this.yg="";Dk.h.constructor.call(this,a,null,h);h||(this.rf=!!f,this.yg=ob(d)||"");this.Pa=new Ta(b,c+Ek);this.En=c;this.xc=null;typeof e=="function"&&(this.xc=e);this.Ya=
null}K(Dk,xg);Dk.prototype.Kh="";Dk.K=function(a){return new Dk(a.src,a.width,a.height,void 0,void 0,void 0,a)};var Ek=1;g=Dk.prototype;g.Pe=!1;g.Wc=!1;g.af=function(a){Dk.h.af.call(this,a);this.rf=!!a.flipRtl;this.yg=ob(a.alt)||""};g.Vg=function(){this.Ya=D(Pb,{height:this.En+"px",width:this.Pa.width+"px",alt:this.yg},this.bb);this.Ya.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.hb);this.xc&&(this.Ya.style.cursor="pointer")};g.bm=function(){};
g.Mg=function(a){return typeof a!="string"?null:a};g.kf=function(a){this.hb=a;this.Ya&&this.Ya.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",String(this.hb))};g.Kk=function(){return this.rf};g.Dh=function(){this.xc&&this.xc(this)};g.Fi=function(){return this.yg};q(va,"field_image",Dk);function Fk(){for(var a=vk(),b=[[X("Puzzle.legsChoose",!1),"0"]],c=0;c<a.length;c++)b[c+1]=["\u00a0\u00a0"+a[c].dh+"\u00a0\u00a0",String(c+1)];b.sort(function(d,e){return d[0]-e[0]});return b}
tf.animal={init:function(){this.Fe(120);Lg(this.uc(5,""),"","NAME");var a=this.uc(1,"PIC");Lg(Pg(a),X("Puzzle.picture",!1));Lg(Lg(Pg(this.uc(5,"")),X("Puzzle.legs",!1)),new yk(Fk),"LEGS");a=this.uc(3,"TRAITS");Lg(a,X("Puzzle.traits",!1));this.Nd(!1)},Hc:function(){var a=document.createElement("mutation");a.setAttribute("animal",this.rb);return a},Sc:function(a){this.Id(parseInt(a.getAttribute("animal")))},rb:0,Id:function(a){var b=vk();this.rb=a;Rg(this,b[a-1].name);this.Rb=b[a-1].Rb},Ri:function(){return Number(Xe(this,
"LEGS"))===this.rb}};tf.picture={init:function(){this.Fe(30);this.uc(5,"PIC");this.Cj(!0);this.$f("")},Hc:tf.animal.Hc,Sc:tf.animal.Sc,rb:0,Id:function(a){this.rb=a;var b=vk();Lg(Ac(this,"PIC"),new Dk("puzzle/"+b[a-1].ph,b[a-1].rh,b[a-1].qh))},Ri:function(){var a=this.getParent();return a&&a.rb===this.rb}};
tf.trait={init:function(){this.Fe(290);Lg(this.uc(5,""),"","NAME");this.Ej(!0);this.Bj(!0)},Hc:function(){var a=document.createElement("mutation");a.setAttribute("animal",this.rb);a.setAttribute("trait",this.Yl);return a},Sc:function(a){this.Id(parseInt(a.getAttribute("animal")),parseInt(a.getAttribute("trait")))},rb:0,Yl:0,Id:function(a,b){this.rb=a;this.Yl=b;var c=vk();Rg(this,c[a-1].kg[b-1])},Ri:function(){var a=Qg(this);return a&&a.rb===this.rb}};var Wi="puzzle";function Gk(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c];a[c]=d}}
function Hk(){for(var a=Ue(O),b=0,c=[],d=ba(a),e=d.next();!e.done;e=d.next())e=e.value,e.Ri()||(b++,e.select(),c.push(e));var f=W("graphValue");setTimeout(function(){f.style.width=100*(a.length-b)/a.length+"px"},500);b===1?e=[X("Puzzle.error1",!1),X("Puzzle.tryAgain",!1)]:b?e=[X("Puzzle.error2",!1).replace("%1",b),X("Puzzle.tryAgain",!1)]:(e=[X("Puzzle.error0",!1).replace("%1",a.length)],ok=qk(),window.localStorage&&(window.localStorage[Wi+Ni]=ok));d=W("answerMessage");d.textContent="";e=ba(e);for(var h=
e.next();!h.done;h=e.next()){var k=document.createElement("div");k.appendChild(document.createTextNode(h.value));d.appendChild(k)}d=W("answers");e=W("checkButton");Z.Ch(d,e,!0,!0,{width:"25%",left:Ki?"5%":"70%",top:"5em"},b?Z.Jj:uk);Z.Ij();if(c.length){Gk(c);var l=c[0],m=function(){l.select();Z.Dc&&(setTimeout(function(){dg(l)},150),setTimeout(m,300))};m()}else setTimeout(Ik,2E3),P&&dg(P)}
function Ik(){O.ac.play("win",.5);O.options.Ha.dc=!0;for(var a=O.Xa(!1),b=0;b<a.length;b++)Jk(a[b],b/a.length*360)}
function Jk(a,b){if(Z.Dc){var c=O.hc(),d=c.Ra/2,e=c.Ka/2,f=Of(a);c=a.ba();Ki&&(c.x-=f.width);var h=Math.max(175,Math.min(d,e)-Math.max(f.height,f.width)/2),k=Date.now(),l=b+k/50%360;h*=Math.sin(k%5E3/5E3*(Math.PI*2))/8+.875;e=h*Math.cos(l*Math.PI/180)+e-f.width/2;f=h*Math.sin(l*Math.PI/180)+d-f.height/2;Math.sqrt(Math.pow(e-c.x,2)+Math.pow(f-c.y,2))<5?(d=e-c.x,c=f-c.y):(c=Math.atan2(f-c.y,e-c.x)*180/Math.PI,c%=360,c<0&&(c+=360),d=Math.round(5*Math.cos(c*Math.PI/180)),c=Math.round(5*Math.sin(c*Math.PI/
180)));a.moveBy(d,c);setTimeout(Jk,50,a,b)}}
function Kk(a){var b='<xml>;<block type="animal" x="5" y="5">;<mutation animal="1"></mutation>;<title name="LEGS">1</title>;<value name="PIC">;<block type="picture">;<mutation animal="1"></mutation>;</block>;</value>;<statement name="TRAITS">;<block type="trait">;<mutation animal="1" trait="2"></mutation>;<next>;<block type="trait">;<mutation animal="1" trait="1"></mutation>;</block>;</next>;</block>;</statement>;</block>;</xml>'.split(";"),c=W("sample");c.firstChild||(c=fi(c,{rtl:Ki,readOnly:!0}),
typeof b!=="string"&&(b=b.join("")),pc(oc(b),c));b=W("help");c=W("helpButton");Z.Ch(b,c,a,!0,{width:"50%",left:"25%",top:"5em"},Z.Jj);Z.Ij()}
(function(a){function b(){window.BlocklyGamesMsg?(window.BlocklyMsg&&(t=window.BlocklyMsg),a()):setTimeout(b,99)}window.addEventListener("load",b)})(function(){function a(){b.style.width=window.innerWidth-20+"px";b.style.height=window.innerHeight-b.offsetTop-15+"px"}document.body.innerHTML=xk();pk();var b=W("blockly");a(null);window.addEventListener("resize",a);tk();var c=Vi(Ni);try{var d=window.sessionStorage.hl}catch(n){d=null}if(d)delete window.sessionStorage.hl,d=oc(d),pc(d,O);else if(c)d=oc(c),
pc(d,O);else{d=[];for(var e=[],f=[],h=vk(),k=0;k<h.length;k++){var l=O.Be("animal");l.Id(k+1);d.push(l);l=O.Be("picture");l.Id(k+1);e.push(l);for(l=0;l<h[k].kg.length;l++){var m=O.Be("trait");m.Id(k+1,l+1);f.push(m)}}Gk(d);Gk(e);Gk(f);e=[].concat(d,e,f);Ki&&e.reverse();d=ba(e);for(f=d.next();!f.done;f=d.next())f=f.value,f.di=!1,f.ue(),f.U();d=0;f=ba(e);for(h=f.next();!h.done;h=f.next())h=h.value,k=h.O().getBBox(),h.Do=k.width,h.Co=k.height,h.nk=k.width*k.height,d+=h.nk;ji(O);f=Ih(O);f.width-=50;f.height-=
50;h=0;e=ba(e);for(k=e.next();!k.done;k=e.next())k=k.value,l=k.O().getBBox(),m=void 0,m=Ki?l.width+h/d*f.width:h/d*(f.width-l.width),m=Math.round(m+Math.random()*50),k.moveBy(m,Math.round(Math.random()*(f.height-l.height))),h+=k.nk}ff();Xi("checkButton",Hk);Xi("helpButton",function(){Kk(!0)});c||Kk(!1);oa=na*=2;O.ac.load(["puzzle/win.mp3","puzzle/win.ogg"],"win")});
